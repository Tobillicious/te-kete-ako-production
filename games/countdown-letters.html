<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown Letters: Te Reo MƒÅori | Te Kete Ako</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Merriweather:ital,wght@0,400;1,300&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/main.css">
    <style>
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem;
            text-align: center;
        }
        
        .game-header {
            margin-bottom: 2rem;
        }
        
        .game-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }
        
        .game-subtitle {
            color: var(--color-text-secondary);
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }
        
        .timer-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            margin: 2rem 0;
            padding: 1rem;
            background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-accent) 100%);
            border-radius: 12px;
            color: white;
        }
        
        .timer {
            font-size: 3rem;
            font-weight: bold;
            font-family: 'Montserrat', sans-serif;
        }
        
        .timer-label {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .letters-container {
            margin: 2rem 0;
            padding: 2rem;
            background: #f8f9fa;
            border-radius: 12px;
            border: 3px solid var(--color-secondary);
        }
        
        .letters-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 0.5rem;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .letter-tile {
            width: 50px;
            height: 50px;
            background: white;
            border: 2px solid var(--color-secondary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--color-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
        }
        
        .letter-tile:hover {
            background: var(--color-secondary);
            color: white;
            transform: scale(1.05);
        }
        
        .letter-tile.used {
            background: #e9ecef;
            border-color: #dee2e6;
            color: #6c757d;
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .letter-tile.selected {
            background: linear-gradient(135deg, #B8860B, #DAA520);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(184, 134, 11, 0.4);
            animation: pulse-selected 0.3s ease-out;
        }
        
        @keyframes pulse-selected {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1.1); }
        }
        
        .letter-tile.flash-success {
            animation: flash-green 0.6s ease-out;
        }
        
        @keyframes flash-green {
            0% { background: var(--color-secondary); transform: scale(1); }
            50% { background: #00ff88; transform: scale(1.15); box-shadow: 0 0 20px rgba(0, 255, 136, 0.6); }
            100% { background: var(--color-secondary); transform: scale(1); }
        }
        
        .current-word {
            transition: all 0.3s ease;
        }
        
        .current-word.typing {
            animation: typing-glow 1s ease-in-out infinite alternate;
        }
        
        @keyframes typing-glow {
            from { box-shadow: 0 0 5px rgba(44, 95, 65, 0.3); }
            to { box-shadow: 0 0 15px rgba(44, 95, 65, 0.6); }
        }
        
        .word-success {
            animation: word-celebration 0.8s ease-out;
        }
        
        @keyframes word-celebration {
            0% { transform: scale(1); }
            25% { transform: scale(1.1) rotate(2deg); }
            50% { transform: scale(1.2) rotate(-1deg); }
            75% { transform: scale(1.1) rotate(1deg); }
            100% { transform: scale(1); }
        }
        
        .maori-word-bonus {
            animation: maori-celebration 1s ease-out;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 300% 300%;
        }
        
        @keyframes maori-celebration {
            0% { 
                background-position: 0% 50%;
                transform: scale(1) rotate(0deg);
            }
            25% { 
                background-position: 25% 50%;
                transform: scale(1.05) rotate(1deg);
            }
            50% { 
                background-position: 50% 50%;
                transform: scale(1.1) rotate(-1deg);
            }
            75% { 
                background-position: 75% 50%;
                transform: scale(1.05) rotate(0.5deg);
            }
            100% { 
                background-position: 100% 50%;
                transform: scale(1) rotate(0deg);
            }
        }
        
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }
        
        .shuffle-animation {
            animation: shuffle-spin 0.5s ease-in-out;
        }
        
        @keyframes shuffle-spin {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(90deg) scale(0.8); }
            50% { transform: rotate(180deg) scale(0.6); }
            75% { transform: rotate(270deg) scale(0.8); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        .word-building {
            margin: 2rem 0;
        }
        
        .current-word {
            font-size: 2rem;
            font-weight: bold;
            color: var(--color-primary);
            min-height: 3rem;
            padding: 1rem;
            background: white;
            border: 2px solid var(--color-secondary);
            border-radius: 8px;
            margin: 1rem 0;
            letter-spacing: 0.2rem;
        }
        
        .word-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .btn {
            background: var(--color-secondary);
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            padding: 12px 24px;
            transition: background-color 0.2s ease;
        }
        
        .btn:hover {
            background: #2c5f3f;
        }
        
        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        
        .btn.secondary {
            background: #6c757d;
        }
        
        .btn.secondary:hover {
            background: #5a6268;
        }
        
        .words-found {
            margin: 2rem 0;
            text-align: left;
        }
        
        .words-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .word-category {
            background: white;
            border: 2px solid var(--color-secondary);
            border-radius: 8px;
            padding: 1rem;
        }
        
        .category-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--color-secondary);
            margin-bottom: 0.5rem;
        }
        
        .found-word {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            margin: 0.25rem 0;
            background: var(--color-cultural-light);
            border-radius: 4px;
        }
        
        .word-text {
            font-weight: bold;
        }
        
        .word-points {
            color: var(--color-secondary);
            font-weight: bold;
        }
        
        .score-container {
            display: flex;
            justify-content: space-around;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .score-item {
            text-align: center;
        }
        
        .score-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--color-secondary);
        }
        
        .score-label {
            font-size: 0.9rem;
            color: var(--color-text-secondary);
        }
        
        .game-instructions {
            background: var(--color-cultural-light);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            text-align: left;
        }
        
        .target-words {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border: 2px solid #856404;
        }
        
        .message {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
        }
        
        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .message.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        @media (max-width: 768px) {
            .letters-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.75rem;
            }
            
            .letter-tile {
                width: 60px;
                height: 60px;
                font-size: 1.8rem;
            }
            
            .timer-container {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .timer {
                font-size: 2.5rem;
            }
        }
    </style>
</head>

<body>
    <header class="site-header no-print">
        <div class="nav-container">
            <a href="/index.html" class="nav-brand">
                <span class="brand-logo">üß∫</span>
                <span class="brand-text">
                    <span class="brand-main">Te Kete Ako</span>
                </span>
            </a>
            <nav class="main-nav">
                <ul>
                        <li>
                            <a href="/browse.html">
                                <span class="nav-icon">üìö</span>
                                <span class="nav-text-mi" lang="mi">NgƒÅ Rauemi</span>
                                <span class="nav-text-en">Resources</span>
                            </a>
                        <div class="nav-dropdown">
                            <ul>
                                <li><a href="/unit-plans.html"><span class="dropdown-mi">üìö NgƒÅ Mahere WƒÅhanga</span><span class="dropdown-en">Unit Plans (6-8 weeks)</span></a></li>
                                <li><a href="/lessons.html"><span class="dropdown-mi">üìñ NgƒÅ Mahere Akoranga</span><span class="dropdown-en">Lesson Plans (60-75 min)</span></a></li>
                                <li><a href="/handouts.html"><span class="dropdown-mi">üìÑ NgƒÅ Kape</span><span class="dropdown-en">Handouts & Materials</span></a></li>
                                <li><a href="/browse.html"><span class="dropdown-mi">üîç Tirohia Katoa</span><span class="dropdown-en">Browse All Resources</span></a></li>
                            </ul>
                        </div>
                    </li>
                        <li>
                            <a href="/browse.html?filter=subject">
                                <span class="nav-icon">üé®</span>
                                <span class="nav-text-mi" lang="mi">NgƒÅ Marau</span>
                                <span class="nav-text-en">Subjects</span>
                            </a>
                        <div class="nav-dropdown">
                            <ul>
                                <li><a href="/browse.html?subject=english"><span class="dropdown-mi">üìù Reo PƒÅkehƒÅ</span><span class="dropdown-en">English</span></a></li>
                                <li><a href="/browse.html?subject=math"><span class="dropdown-mi">üî¢ PƒÅngarau</span><span class="dropdown-en">Mathematics</span></a></li>
                                <li><a href="/browse.html?subject=science"><span class="dropdown-mi">üî¨ P≈´taiao</span><span class="dropdown-en">Science</span></a></li>
                                <li><a href="/browse.html?subject=social-studies"><span class="dropdown-mi">üåè Tikanga-ƒÅ-Iwi</span><span class="dropdown-en">Social Studies</span></a></li>
                                <li><a href="/browse.html?subject=te-reo"><span class="dropdown-mi">üåø Te Reo MƒÅori</span><span class="dropdown-en">MƒÅori Language</span></a></li>
                                <li><a href="/browse.html?subject=arts"><span class="dropdown-mi">üé® NgƒÅ Toi</span><span class="dropdown-en">The Arts</span></a></li>
                                <li><a href="/browse.html?subject=health-pe"><span class="dropdown-mi">üí™ Hauora</span><span class="dropdown-en">Health & PE</span></a></li>
                                <li><a href="/browse.html?subject=technology"><span class="dropdown-mi">üîß Hangarau</span><span class="dropdown-en">Technology</span></a></li>
                            </ul>
                        </div>
                    </li>
                        <li>
                            <a href="/browse.html?filter=year">
                                <span class="nav-icon">üìÖ</span>
                                <span class="nav-text-mi" lang="mi">NgƒÅ Tau</span>
                                <span class="nav-text-en">Year Levels</span>
                            </a>
                            <div class="nav-dropdown nav-dropdown-wide">
                                <div class="year-stage-label">Primary / Tuatahi (1-6)</div>
                                <ul class="year-grid">
                                    <li><a href="/browse.html?year=1"><span class="dropdown-mi">Tau 1</span><span class="dropdown-en">Year 1</span></a></li>
                                    <li><a href="/browse.html?year=2"><span class="dropdown-mi">Tau 2</span><span class="dropdown-en">Year 2</span></a></li>
                                    <li><a href="/browse.html?year=3"><span class="dropdown-mi">Tau 3</span><span class="dropdown-en">Year 3</span></a></li>
                                </ul>
                                <ul class="year-grid">
                                    <li><a href="/browse.html?year=4"><span class="dropdown-mi">Tau 4</span><span class="dropdown-en">Year 4</span></a></li>
                                    <li><a href="/browse.html?year=5"><span class="dropdown-mi">Tau 5</span><span class="dropdown-en">Year 5</span></a></li>
                                    <li><a href="/browse.html?year=6"><span class="dropdown-mi">Tau 6</span><span class="dropdown-en">Year 6</span></a></li>
                                </ul>
                                <div class="year-stage-label">Intermediate / Waenga (7-8)</div>
                                <ul class="year-grid">
                                    <li><a href="/browse.html?year=7"><span class="dropdown-mi">Tau 7</span><span class="dropdown-en">Year 7</span></a></li>
                                    <li><a href="/browse.html?year=8"><span class="dropdown-mi">Tau 8</span><span class="dropdown-en">Year 8</span></a></li>
                                </ul>
                                <div class="year-stage-label">Junior Secondary / Tuarua (9-10)</div>
                                <ul class="year-grid">
                                    <li><a href="/browse.html?year=9"><span class="dropdown-mi">Tau 9</span><span class="dropdown-en">Year 9</span></a></li>
                                    <li><a href="/browse.html?year=10"><span class="dropdown-mi">Tau 10</span><span class="dropdown-en">Year 10</span></a></li>
                                </ul>
                                <div class="year-stage-label">Senior Secondary / NCEA (11-13)</div>
                                <ul class="year-grid">
                                    <li><a href="/browse.html?year=11"><span class="dropdown-mi">Tau 11</span><span class="dropdown-en">Year 11</span></a></li>
                                    <li><a href="/browse.html?year=12"><span class="dropdown-mi">Tau 12</span><span class="dropdown-en">Year 12</span></a></li>
                                    <li><a href="/browse.html?year=13"><span class="dropdown-mi">Tau 13</span><span class="dropdown-en">Year 13</span></a></li>
                                </ul>
                            </div>
                        </li>
                    <li>
                        <a href="#more">
                            <span class="nav-icon">üì¶</span>
                            <span class="nav-text-mi" lang="mi">ƒítahi Atu</span>
                            <span class="nav-text-en">More Stuff</span>
                        </a>
                        <div class="nav-dropdown">
                            <ul>
                                <li><a href="/games.html"><span class="dropdown-mi">üéÆ NgƒÅ Kƒìmu</span><span class="dropdown-en">Games</span></a></li>
                                <li><a href="/youtube.html"><span class="dropdown-mi">üì∫ Ataata YouTube</span><span class="dropdown-en">YouTube Videos</span></a></li>
                                <li><a href="/curriculum-alignment.html"><span class="dropdown-mi">üìã Te Marautanga</span><span class="dropdown-en">Curriculum Alignment</span></a></li>
                                <li><a href="/other-resources.html"><span class="dropdown-mi">üîó ƒítahi Atu Rauemi</span><span class="dropdown-en">Other Resources</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="auth-nav auth-logged-out">
                        <a href="/login.html" class="auth-btn">
                            <span class="nav-icon">üîê</span>
                            <span class="nav-text-mi" lang="mi">Takiuru</span>
                            <span class="nav-text-en">Login</span>
                        </a>
                    </li>
                    <li class="auth-nav auth-logged-in" style="display: none;">
                        <a href="/my-kete.html" class="dashboard-btn">
                            <span class="nav-icon">üß∫</span>
                            <span class="nav-text-mi" lang="mi">T≈çku Kete</span>
                            <span class="nav-text-en">My Kete</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="main-container">
        <aside class="left-sidebar no-print">
            <div class="sidebar-widget">
                <h3 class="sidebar-widget-title">Game Navigation</h3>
                <ul>
                    <li><a href="/games.html">‚Üê Back to All Games</a></li>
                    <li><a href="te-reo-wordle.html">Te Reo MƒÅori Wordle</a></li>
                    <li><a href="#" onclick="showInstructions()">How to Play</a></li>
                    <li><a href="#" onclick="newGame()">New Game</a></li>
                </ul>
            </div>

            <div class="sidebar-widget cultural-accent">
                <h3 class="sidebar-widget-title">Whakataukƒ´</h3>
                <p style="font-style: italic; color: var(--color-secondary);">"K≈çrero MƒÅori, kia roa ai"</p>
                <p style="font-size: 0.9rem;">Speak MƒÅori, that it may continue</p>
            </div>

            <div class="sidebar-widget">
                <h3 class="sidebar-widget-title">Scoring Guide</h3>
                <ul style="font-size: 0.9rem;">
                    <li><strong>3-4 letters:</strong> 1 point</li>
                    <li><strong>5-6 letters:</strong> 2 points</li>
                    <li><strong>7-8 letters:</strong> 5 points</li>
                    <li><strong>9 letters:</strong> 18 points!</li>
                    <li><strong>Te Reo MƒÅori:</strong> Double points!</li>
                </ul>
            </div>
        </aside>

        <main class="content-area">
            <div class="game-container">
                <div class="game-header">
                    <h1 class="game-title">Countdown Letters</h1>
                    <p class="game-subtitle">Build the longest words from 9 letters - Te Reo MƒÅori earns double points!</p>
                </div>

                <div class="timer-container">
                    <div class="timer-section">
                        <div class="timer" id="timer">30</div>
                        <div class="timer-label">seconds remaining</div>
                    </div>
                    <div class="game-status">
                        <button class="btn" id="startBtn" onclick="startGame()">Start Game</button>
                        <button class="btn secondary" id="pauseBtn" onclick="pauseGame()" style="display: none;">Pause</button>
                    </div>
                </div>

                <div class="letters-container">
                    <h3>Available Letters</h3>
                    <div class="letters-grid" id="lettersGrid">
                        <!-- Letters will be generated by JavaScript -->
                    </div>
                </div>

                <div class="word-building">
                    <h3>Build Your Word</h3>
                    <div class="current-word" id="currentWord">Click letters to build words</div>
                    <div class="word-controls">
                        <button class="btn secondary" onclick="clearWord()">Clear</button>
                        <button class="btn" onclick="submitWordWithValidation()">Submit Word</button>
                        <button class="btn secondary" onclick="shuffleLetters()">Shuffle Letters</button>
                    </div>
                </div>

                <div id="message"></div>

                <div class="score-container">
                    <div class="score-item">
                        <div class="score-number" id="totalScore">0</div>
                        <div class="score-label">Total Points</div>
                    </div>
                    <div class="score-item">
                        <div class="score-number" id="wordsFound">0</div>
                        <div class="score-label">Words Found</div>
                    </div>
                    <div class="score-item">
                        <div class="score-number" id="longestWord">0</div>
                        <div class="score-label">Longest Word</div>
                    </div>
                    <div class="score-item">
                        <div class="score-number" id="maoriWords">0</div>
                        <div class="score-label">Te Reo MƒÅori</div>
                    </div>
                </div>

                <div class="target-words">
                    <h4>üéØ Challenge Goals</h4>
                    <p>Can you find the 9-letter word? Look for Te Reo MƒÅori words for double points!</p>
                    <p><strong>Hint:</strong> Common MƒÅori word endings: -NGA, -AKI, -ARA, -URU</p>
                </div>

                <div class="words-found">
                    <h3>Words Found</h3>
                    <div class="words-grid">
                        <div class="word-category">
                            <div class="category-title">Short Words (3-4 letters)</div>
                            <div id="shortWords"></div>
                        </div>
                        <div class="word-category">
                            <div class="category-title">Medium Words (5-6 letters)</div>
                            <div id="mediumWords"></div>
                        </div>
                        <div class="word-category">
                            <div class="category-title">Long Words (7+ letters)</div>
                            <div id="longWords"></div>
                        </div>
                        <div class="word-category">
                            <div class="category-title">Te Reo MƒÅori (Double Points!)</div>
                            <div id="maoriWordsFound"></div>
                        </div>
                    </div>
                </div>

                <div class="game-instructions">
                    <h4>How to Play:</h4>
                    <ol>
                        <li>Click <strong>Start Game</strong> to begin the 30-second timer</li>
                        <li><strong>Click letters</strong> or <strong>type on keyboard</strong> to build words (minimum 3 letters)</li>
                        <li>Press <strong>Enter</strong> to submit words, or click Submit button</li>
                        <li>Te Reo MƒÅori words earn <strong>double points</strong>!</li>
                        <li>Try to find the longest possible word</li>
                    </ol>
                    
                    <h4>‚å®Ô∏è Keyboard Shortcuts:</h4>
                    <ul>
                        <li><strong>Type letters:</strong> Add letters to your word</li>
                        <li><strong>Enter:</strong> Submit current word</li>
                        <li><strong>Backspace:</strong> Remove last letter</li>
                        <li><strong>Escape:</strong> Clear entire word</li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <footer class="site-footer no-print">
        <div class="footer-content">
            <div class="footer-grid">
                <!-- Brand Section -->
                <div class="footer-section footer-brand">
                    <h3>üß∫ Te Kete Ako</h3>
                    <p class="footer-whakataukƒ´">"Whaowhia te kete mƒÅtauranga"</p>
                    <p class="footer-tagline">Fill the basket of knowledge</p>
                    <p class="footer-description">Quality teaching resources for Aotearoa New Zealand educators, honoring mƒÅtauranga MƒÅori and contemporary pedagogy.</p>
                </div>

                <!-- Resources Section -->
                <div class="footer-section footer-resources">
                    <h4><span class="footer-mi">NgƒÅ Rauemi</span> <span class="footer-en">Resources</span></h4>
                    <ul>
                        <li><a href="/unit-plans.html">üìö Unit Plans / NgƒÅ Mahere WƒÅhanga</a></li>
                        <li><a href="/lessons.html">üìñ Lesson Plans / NgƒÅ Akoranga</a></li>
                        <li><a href="/handouts.html">üìÑ Handouts / NgƒÅ Kape</a></li>
                        <li><a href="/games.html">üéÆ Games / NgƒÅ Kƒìmu</a></li>
                        <li><a href="/browse.html">üîç Browse All / Tirohia Katoa</a></li>
                    </ul>
                </div>

                <!-- Curriculum Section -->
                <div class="footer-section footer-curriculum">
                    <h4><span class="footer-mi">Te Marautanga</span> <span class="footer-en">Curriculum</span></h4>
                    <ul>
                        <li><a href="/browse.html?subject=english">üìù English / Reo PƒÅkehƒÅ</a></li>
                        <li><a href="/browse.html?subject=math">üî¢ Mathematics / PƒÅngarau</a></li>
                        <li><a href="/browse.html?subject=science">üî¨ Science / P≈´taiao</a></li>
                        <li><a href="/browse.html?subject=social-studies">üåè Social Studies / Tikanga-ƒÅ-Iwi</a></li>
                        <li><a href="/curriculum-alignment.html">üìã NZ Curriculum Alignment</a></li>
                    </ul>
                </div>

                <!-- Account & Support Section -->
                <div class="footer-section footer-support">
                    <h4><span class="footer-mi">Tautoko</span> <span class="footer-en">Support</span></h4>
                    <ul>
                        <li><a href="/my-kete.html">üß∫ My Kete / T≈çku Kete</a></li>
                        <li><a href="/login.html">üîê Login / Takiuru</a></li>
                        <li><a href="#about">‚ÑπÔ∏è About Us / M≈ç MƒÅtou</a></li>
                        <li><a href="#contact">‚úâÔ∏è Contact / WhakapƒÅ Mai</a></li>
                        <li><a href="#help">‚ùì Help / ƒÄwhina</a></li>
                    </ul>
                </div>
            </div>

            <!-- Footer Bottom -->
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <span class="footer-copyright">¬© 2025 Te Kete Ako</span>
                    <span class="footer-separator">‚Ä¢</span>
                    <span class="footer-location">Aotearoa New Zealand</span>
                    <span class="footer-separator">‚Ä¢</span>
                    <a href="#privacy">Privacy</a>
                    <span class="footer-separator">‚Ä¢</span>
                    <a href="#terms">Terms</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Game state
        let gameLetters = [];
        let currentWord = '';
        let selectedLetters = [];
        let foundWords = [];
        let score = 0;
        let gameTime = 30;
        let gameTimer = null;
        let gameActive = false;
        let gamePaused = false;

        // Te Reo MƒÅori word lists for scoring
        const MAORI_WORDS = [
            // Common 3-4 letter words
            'kai', 'poi', 'hui', 'iwi', 'tui', 'moa', 'kia', 'ana', 'awa', 'ika',
            'kai', 'mea', 'nei', 'pai', 'tao', 'tau', 'uri', 'wai', 'whƒÅ', 'ako',
            'ata', 'hoa', 'hou', 'koe', 'mƒÅu', 'noa', 'roa', 'tae', 'tua', 'ura',
            
            // 5-6 letter words
            'aroha', 'kaiako', 'mauri', 'tangi', 'tapu', 'tino', 'wairua', 'whenua',
            'whare', 'mana', 'papa', 'rama', 'roto', 'taha', 'taiao', 'taonga', 'whaea',
            'matua', 'tamariki', 'hap≈´', 'iwi', 'kura', 'ranga', 'waka', 'mata', 'nuku',
            
            // 7+ letter words
            'whakat≈çhea', 'rangatiratanga', 'manaakitanga', 'whakapapa', 'kaitiakitanga',
            'whakat≈çhea', 'tangata', 'tamariki', 'kaumƒÅtua', 'wahine', 'tƒÅngata'
        ];

        // Letter frequency for realistic game generation
        const LETTER_FREQUENCIES = {
            'A': 8, 'E': 8, 'I': 7, 'O': 6, 'U': 4,  // MƒÅori vowels are common
            'N': 6, 'R': 6, 'T': 6, 'K': 5, 'M': 5, 'W': 5, 'H': 5,
            'G': 4, 'P': 4, 'L': 3, 'S': 3, 'C': 2, 'F': 2,
            'B': 1, 'D': 1, 'J': 1, 'Q': 1, 'V': 1, 'X': 1, 'Y': 1, 'Z': 1
        };

        // Generate letters for the game
        function generateLetters() {
            const letters = [];
            const letterPool = [];
            
            // Build weighted letter pool
            for (const [letter, frequency] of Object.entries(LETTER_FREQUENCIES)) {
                for (let i = 0; i < frequency; i++) {
                    letterPool.push(letter);
                }
            }
            
            // Ensure we have some vowels and common MƒÅori letters
            const essentialLetters = ['A', 'E', 'I', 'N', 'G'];
            essentialLetters.forEach(letter => {
                if (letters.length < 9) {
                    letters.push(letter);
                }
            });
            
            // Fill remaining spots randomly
            while (letters.length < 9) {
                const randomLetter = letterPool[Math.floor(Math.random() * letterPool.length)];
                letters.push(randomLetter);
            }
            
            return letters;
        }

        // Initialize game
        function initGame() {
            gameLetters = generateLetters();
            selectedLetters = [];
            currentWord = '';
            foundWords = [];
            score = 0;
            gameTime = 30;
            gameActive = false;
            gamePaused = false;
            
            renderLetters();
            updateDisplay();
            updateTimer();
            
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
        }

        // Render letter tiles
        function renderLetters() {
            const grid = document.getElementById('lettersGrid');
            grid.innerHTML = '';
            
            gameLetters.forEach((letter, index) => {
                const tile = document.createElement('div');
                tile.className = 'letter-tile';
                tile.textContent = letter;
                tile.onclick = () => selectLetter(index);
                tile.id = `letter-${index}`;
                grid.appendChild(tile);
            });
        }

        // Select a letter with tactile feedback
        function selectLetter(index) {
            if (!gameActive || gamePaused) return;
            
            const tile = document.getElementById(`letter-${index}`);
            if (tile.classList.contains('used')) return;
            
            selectedLetters.push(index);
            currentWord += gameLetters[index];
            tile.classList.add('selected');
            
            // Add subtle feedback
            hapticFeedback('light');
            
            updateCurrentWord();
        }

        // Update current word display with flashy effects
        function updateCurrentWord() {
            const display = document.getElementById('currentWord');
            if (currentWord) {
                display.textContent = currentWord;
                display.style.fontSize = '2rem';
                display.style.fontWeight = 'bold';
                display.style.color = '#2C5F41';
                display.classList.add('typing');
            } else {
                display.textContent = 'Click letters or type to build words';
                display.style.fontSize = '1.2rem';
                display.style.fontWeight = 'normal';
                display.style.color = '#666';
                display.classList.remove('typing');
            }
        }

        // Clear current word
        function clearWord() {
            selectedLetters.forEach(index => {
                const tile = document.getElementById(`letter-${index}`);
                tile.classList.remove('selected');
                tile.classList.remove('used');
            });
            selectedLetters = [];
            currentWord = '';
            updateCurrentWord();
        }

        // Submit current word
        function submitWord() {
            if (!gameActive || currentWord.length < 3) {
                showMessage('Words must be at least 3 letters long!', 'error');
                return;
            }
            
            if (foundWords.find(w => w.word === currentWord.toLowerCase())) {
                showMessage('You already found that word!', 'error');
                clearWord();
                return;
            }
            
            // Calculate points
            const isMaori = MAORI_WORDS.includes(currentWord.toLowerCase());
            let points = calculatePoints(currentWord.length);
            if (isMaori) points *= 2;
            
            // Add to found words
            const wordObj = {
                word: currentWord.toLowerCase(),
                length: currentWord.length,
                points: points,
                isMaori: isMaori
            };
            foundWords.push(wordObj);
            score += points;
            
            // Mark letters as used
            selectedLetters.forEach(index => {
                const tile = document.getElementById(`letter-${index}`);
                tile.classList.add('used');
                tile.classList.remove('selected');
            });
            
            // Trigger letter celebration animations
            selectedLetters.forEach((index, delay) => {
                setTimeout(() => {
                    const tile = document.getElementById(`letter-${index}`);
                    tile.classList.add('flash-success');
                    setTimeout(() => tile.classList.remove('flash-success'), 600);
                }, delay * 100);
            });
            
            // Trigger word celebration
            const display = document.getElementById('currentWord');
            if (isMaori) {
                display.classList.add('maori-word-bonus');
                setTimeout(() => display.classList.remove('maori-word-bonus'), 1000);
            } else {
                display.classList.add('word-success');
                setTimeout(() => display.classList.remove('word-success'), 800);
            }
            
            // Show success message with excitement
            const message = isMaori ? 
                `üåø Ka rawe! "${currentWord}" is Te Reo MƒÅori - ${points} points (doubled)!` :
                `‚ú® Great! "${currentWord}" - ${points} points!`;
            showMessage(message, 'success');
            
            // Reset for next word
            selectedLetters = [];
            currentWord = '';
            updateCurrentWord();
            updateDisplay();
        }

        // Calculate points based on word length
        function calculatePoints(length) {
            if (length <= 4) return 1;
            if (length <= 6) return 2;
            if (length <= 8) return 5;
            return 18; // 9-letter word
        }

        // Start game
        function startGame() {
            // If button says "New Game", call newGame instead
            if (document.getElementById('startBtn').textContent === 'New Game') {
                newGame();
                return;
            }
            
            gameActive = true;
            gamePaused = false;
            gameTime = 30;
            
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('pauseBtn').style.display = 'inline-block';
            
            gameTimer = setInterval(() => {
                if (!gamePaused) {
                    gameTime--;
                    updateTimer();
                    
                    if (gameTime <= 0) {
                        endGame();
                    }
                }
            }, 1000);
        }

        // Pause game
        function pauseGame() {
            gamePaused = !gamePaused;
            const btn = document.getElementById('pauseBtn');
            btn.textContent = gamePaused ? 'Resume' : 'Pause';
        }

        // End game
        function endGame() {
            gameActive = false;
            clearInterval(gameTimer);
            
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
            document.getElementById('startBtn').textContent = 'New Game';
            
            showMessage(`Time's up! Final score: ${score} points with ${foundWords.length} words found.`, 'info');
        }

        // New game
        function newGame() {
            // Stop any running timer
            if (gameTimer) clearInterval(gameTimer);
            
            // Reset game state completely
            gameActive = false;
            gamePaused = false;
            gameTime = 30;
            
            // Clear all animations and classes
            document.querySelectorAll('.letter-tile').forEach(tile => {
                tile.classList.remove('selected', 'used', 'flash-success');
            });
            
            // Reset timer styling
            const timerElement = document.getElementById('timer');
            timerElement.style.color = '#2C5F41';
            timerElement.style.fontSize = '2rem';
            timerElement.style.animation = 'none';
            
            // Reset current word display
            const display = document.getElementById('currentWord');
            display.classList.remove('typing', 'word-success', 'maori-word-bonus');
            
            // Initialize fresh game
            initGame();
            document.getElementById('startBtn').textContent = 'Start Game';
            clearMessage();
        }

        // Shuffle letters with flashy animation
        function shuffleLetters() {
            const grid = document.getElementById('lettersGrid');
            grid.classList.add('shuffle-animation');
            
            setTimeout(() => {
                for (let i = gameLetters.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [gameLetters[i], gameLetters[j]] = [gameLetters[j], gameLetters[i]];
                }
                renderLetters();
                clearWord();
                grid.classList.remove('shuffle-animation');
            }, 250);
        }

        // Update timer display with excitement effects
        function updateTimer() {
            const timerElement = document.getElementById('timer');
            timerElement.textContent = gameTime;
            
            // Add urgency effects as time runs out
            if (gameTime <= 5 && gameTime > 0) {
                timerElement.style.color = '#ff4757';
                timerElement.style.fontSize = '3rem';
                timerElement.style.animation = 'pulse 0.5s ease-in-out infinite alternate';
            } else if (gameTime <= 10) {
                timerElement.style.color = '#ffa502';
                timerElement.style.fontSize = '2.5rem';
            } else {
                timerElement.style.color = '#2C5F41';
                timerElement.style.fontSize = '2rem';
                timerElement.style.animation = 'none';
            }
        }

        // Animated score counter
        function animateScore(newScore) {
            const scoreElement = document.getElementById('totalScore');
            const currentScore = parseInt(scoreElement.textContent) || 0;
            const increment = Math.ceil((newScore - currentScore) / 10);
            
            function updateScore() {
                const current = parseInt(scoreElement.textContent) || 0;
                if (current < newScore) {
                    scoreElement.textContent = Math.min(current + increment, newScore);
                    setTimeout(updateScore, 50);
                }
            }
            updateScore();
        }

        // Update score and words display
        function updateDisplay() {
            animateScore(score);
            document.getElementById('wordsFound').textContent = foundWords.length;
            
            const longestWordLength = foundWords.length > 0 ? 
                Math.max(...foundWords.map(w => w.length)) : 0;
            document.getElementById('longestWord').textContent = longestWordLength;
            
            const maoriWordCount = foundWords.filter(w => w.isMaori).length;
            document.getElementById('maoriWords').textContent = maoriWordCount;
            
            // Update word lists
            updateWordLists();
        }

        // Update word lists by category
        function updateWordLists() {
            const shortWords = document.getElementById('shortWords');
            const mediumWords = document.getElementById('mediumWords');
            const longWords = document.getElementById('longWords');
            const maoriWordsFound = document.getElementById('maoriWordsFound');
            
            shortWords.innerHTML = '';
            mediumWords.innerHTML = '';
            longWords.innerHTML = '';
            maoriWordsFound.innerHTML = '';
            
            foundWords.forEach(wordObj => {
                const wordDiv = document.createElement('div');
                wordDiv.className = 'found-word';
                wordDiv.innerHTML = `
                    <span class="word-text">${wordObj.word.toUpperCase()}</span>
                    <span class="word-points">${wordObj.points}pts</span>
                `;
                
                if (wordObj.isMaori) {
                    maoriWordsFound.appendChild(wordDiv);
                } else if (wordObj.length <= 4) {
                    shortWords.appendChild(wordDiv);
                } else if (wordObj.length <= 6) {
                    mediumWords.appendChild(wordDiv);
                } else {
                    longWords.appendChild(wordDiv);
                }
            });
        }

        // Haptic feedback simulation
        function hapticFeedback(type = 'light') {
            if (navigator.vibrate) {
                switch(type) {
                    case 'success': navigator.vibrate([100, 50, 100]); break;
                    case 'error': navigator.vibrate([200]); break;
                    case 'light': navigator.vibrate([10]); break;
                }
            }
        }

        // Sound effect placeholders (could add actual sounds later)
        function playSound(type) {
            // Future: Add actual sound effects
            console.log(`üîä Playing ${type} sound`);
        }

        // Show message with effects
        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.innerHTML = `<div class="message ${type}">${text}</div>`;
            
            // Add haptic feedback
            hapticFeedback(type);
            
            // Add sound feedback
            playSound(type);
            
            if (type === 'error' || type === 'success') {
                setTimeout(() => {
                    messageDiv.innerHTML = '';
                }, 3000);
            }
        }

        // Clear message
        function clearMessage() {
            document.getElementById('message').innerHTML = '';
        }

        // Show instructions
        function showInstructions() {
            showMessage('Build words from the 9 letters provided. Click letters or type on keyboard! Te Reo MƒÅori words earn double points! Press Enter to submit, Backspace to undo, Escape to clear. You have 30 seconds once you start the timer.', 'info');
        }

        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (!gameActive || gamePaused) return;
            
            const key = e.key.toUpperCase();
            
            // Handle letter input
            if (key.match(/[A-Z]/) && key.length === 1) {
                const letterIndex = gameLetters.findIndex((letter, index) => 
                    letter === key && !document.getElementById(`letter-${index}`).classList.contains('used')
                );
                if (letterIndex !== -1) {
                    selectLetter(letterIndex);
                } else {
                    // Give feedback when typing unavailable letters
                    showMessage(`Letter "${key}" is not available or already used!`, 'error');
                    setTimeout(() => clearMessage(), 1500);
                }
            }
            
            // Handle special keys
            if (e.key === 'Enter') {
                e.preventDefault();
                submitWordWithValidation();
            } else if (e.key === 'Backspace' || e.key === 'Delete') {
                e.preventDefault();
                if (selectedLetters.length > 0) {
                    const lastIndex = selectedLetters.pop();
                    const tile = document.getElementById(`letter-${lastIndex}`);
                    tile.classList.remove('selected');
                    currentWord = currentWord.slice(0, -1);
                    updateCurrentWord();
                }
            } else if (e.key === 'Escape') {
                e.preventDefault();
                clearWord();
            }
        });

        // Check if word can be formed from available letters
        function canFormWord(word) {
            const wordLetters = word.toUpperCase().split('');
            const availableLetters = [...gameLetters]; // Copy array
            
            for (const letter of wordLetters) {
                const index = availableLetters.indexOf(letter);
                if (index === -1) {
                    return false; // Letter not available
                }
                availableLetters.splice(index, 1); // Remove used letter
            }
            
            return true; // All letters available
        }

        // Word validation using dictionary API
        async function validateWord(word) {
            if (word.length < 3) return false;
            
            // CRITICAL: First check if word can be formed from available letters
            if (!canFormWord(word)) {
                return false;
            }
            
            // Check against our MƒÅori word list first
            if (MAORI_WORDS.includes(word.toLowerCase())) {
                return true;
            }
            
            // Use the MƒÅori dictionary API for validation
            if (window.maoriDictionaryAPI) {
                try {
                    const isValid = await window.maoriDictionaryAPI.validateWord(word);
                    return isValid;
                } catch (error) {
                    console.warn('Dictionary API error:', error);
                }
            }
            
            // Common English words dictionary (curated list for Countdown)
            const commonEnglishWords = [
                // 3-letter words
                'the', 'and', 'for', 'are', 'but', 'not', 'you', 'all', 'can', 'had', 'her', 'was', 'one', 'our', 'out', 'day', 'get', 'has', 'him', 'his', 'how', 'man', 'new', 'now', 'old', 'see', 'two', 'way', 'who', 'boy', 'did', 'its', 'let', 'put', 'say', 'she', 'too', 'use',
                
                // 4-letter words
                'that', 'with', 'have', 'this', 'will', 'your', 'from', 'they', 'know', 'want', 'been', 'good', 'much', 'some', 'time', 'very', 'when', 'come', 'here', 'just', 'like', 'long', 'make', 'many', 'over', 'such', 'take', 'than', 'them', 'well', 'work', 'back', 'call', 'came', 'each', 'find', 'give', 'hand', 'high', 'keep', 'last', 'left', 'life', 'live', 'look', 'made', 'most', 'move', 'must', 'name', 'need', 'next', 'open', 'part', 'play', 'said', 'same', 'seem', 'show', 'side', 'tell', 'turn', 'used', 'want', 'ways', 'week', 'went', 'were', 'what', 'word', 'year',
                
                // 5-letter words
                'which', 'their', 'would', 'there', 'could', 'other', 'after', 'first', 'never', 'these', 'think', 'where', 'being', 'every', 'great', 'might', 'shall', 'still', 'those', 'under', 'while', 'about', 'again', 'before', 'found', 'going', 'house', 'right', 'small', 'sound', 'still', 'three', 'water', 'words', 'years', 'place', 'state', 'thing', 'through', 'world', 'young',
                
                // 6+ letter words
                'should', 'around', 'because', 'between', 'during', 'follow', 'little', 'number', 'people', 'public', 'school', 'second', 'system', 'without', 'another', 'example', 'government', 'important', 'information', 'different', 'national', 'question', 'complete', 'however', 'nothing', 'program', 'problem', 'several', 'special', 'usually', 'against', 'company', 'general', 'perhaps', 'picture', 'service', 'through', 'together', 'various', 'working'
            ];
            
            return commonEnglishWords.includes(word.toLowerCase());
        }

        // Enhanced submit word with validation
        async function submitWordWithValidation() {
            if (!gameActive || currentWord.length < 3) {
                showMessage('Words must be at least 3 letters long!', 'error');
                return;
            }
            
            if (foundWords.find(w => w.word === currentWord.toLowerCase())) {
                showMessage('You already found that word!', 'error');
                clearWord();
                return;
            }
            
            // Show validation feedback
            showMessage('Checking word...', 'info');
            
            // Check if word can be formed first (faster check)
            if (!canFormWord(currentWord)) {
                showMessage(`"${currentWord}" uses letters you don't have! Use only the available letters.`, 'error');
                clearWord();
                return;
            }
            
            const isValid = await validateWord(currentWord);
            if (!isValid) {
                showMessage(`"${currentWord}" is not in our dictionary. Try common English words or Te Reo MƒÅori!`, 'error');
                clearWord();
                return;
            }
            
            // Word is valid, proceed with original submit logic
            submitWord();
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
    <script src="../js/maori-dictionary-api.js"></script>
    <script src="../js/daily-whakatauki.js"></script>

    <!-- Bug Report Widget for Beta Testing -->
    <script src="../js/analytics-dashboard.js"></script>
    <script>
        if (typeof TeKeteAkoAnalytics !== 'undefined') {
            window.teKeteAnalytics = new TeKeteAkoAnalytics();
        }
    </script>
    <!-- Supabase CDN -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <!-- Supabase Client -->
    <script src="../js/supabase-client.js"></script>
    <!-- Auth UI -->
    <script src="../js/auth-ui.js"></script>
    <!-- Load main functionality -->
    <script src="../js/main.js"></script>

</body>
</html>