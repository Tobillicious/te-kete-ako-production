<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/css/te-kete-professional.css">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://unpkg.com https://supabase.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: https://placehold.co; connect-src 'self' https://nlgldaqtubrlcqddppbq.supabase.co https://supabase.com;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Library Administration | Te Kete Ako</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Merriweather:ital,wght@0,400;1,300&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/youtube-library.css">
    <style>
        .admin-header {
            background: linear-gradient(135deg, var(--color-primary), var(--color-forest));
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .admin-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--color-border);
        }

        .admin-tab {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: var(--color-text-secondary);
            transition: all var(--transition-medium);
        }

        .admin-tab.active {
            color: var(--color-secondary);
            border-bottom-color: var(--color-secondary);
        }

        .admin-tab:hover {
            color: var(--color-primary);
        }

        .admin-section {
            display: none;
            background: var(--color-surface);
            border-radius: 15px;
            padding: 2rem;
            border: 1px solid var(--color-border);
            box-shadow: var(--shadow-medium);
        }

        .admin-section.active {
            display: block;
        }

        .pending-videos-grid {
            display: grid;
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .pending-video-card {
            background: var(--color-background);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 1.5rem;
            display: grid;
            grid-template-columns: 200px 1fr auto;
            gap: 1.5rem;
            align-items: start;
        }

        .pending-video-thumbnail {
            width: 200px;
            height: 120px;
            border-radius: 8px;
            overflow: hidden;
            background: var(--color-border-light);
        }

        .pending-video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .pending-video-info h4 {
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }

        .pending-video-meta {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            margin: 0.5rem 0;
        }

        .video-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 0.5rem 0;
        }

        .tag {
            background: var(--color-cultural-light);
            color: var(--color-primary);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .moderation-actions {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            min-width: 200px;
        }

        .action-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-medium);
        }

        .approve-btn {
            background: var(--color-forest);
            color: white;
        }

        .approve-btn:hover {
            background: var(--color-secondary);
            transform: translateY(-1px);
        }

        .reject-btn {
            background: var(--color-maori-red);
            color: white;
        }

        .reject-btn:hover {
            background: #c53030;
            transform: translateY(-1px);
        }

        .edit-btn {
            background: var(--color-accent);
            color: white;
        }

        .edit-btn:hover {
            background: #e69500;
            transform: translateY(-1px);
        }

        .stats-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--color-secondary), var(--color-cultural-teal));
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .search-analytics {
            background: var(--color-background);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .analytics-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--color-primary);
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color var(--transition-medium);
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--color-secondary);
            box-shadow: 0 0 0 3px rgba(0, 176, 185, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .cultural-validation {
            background: var(--color-cultural-light);
            border: 2px solid var(--color-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .cultural-validation h4 {
            color: var(--color-secondary);
            margin-bottom: 1rem;
        }

        @media (max-width: 768px) {
            .pending-video-card {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .pending-video-thumbnail {
                width: 100%;
                height: 200px;
            }

            .moderation-actions {
                flex-direction: row;
                justify-content: center;
                min-width: unset;
            }

            .stats-dashboard {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body data-auto-init="true" data-current-page="admin">

    <!-- Site Header -->
                    <header class="site-header no-print">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">
                <span class="brand-logo">🧺</span>
                <span class="brand-text">
                    <span class="brand-main">Te Kete Ako</span>
                </span>
            </a>
            <nav class="main-nav">
                <ul>
                        <li>
                            <a href="browse.html">
                                <span class="nav-icon">📚</span>
                                <span class="nav-text-mi" lang="mi">Ngā Rauemi</span>
                                <span class="nav-text-en">Resources</span>
                            </a>
                        <div class="nav-dropdown">
                            <ul>
                                <li><a href="unit-plans.html"><span class="dropdown-mi">📚 Ngā Mahere Wāhanga</span><span class="dropdown-en">Unit Plans (6-8 weeks)</span></a></li>
                                <li><a href="lessons.html"><span class="dropdown-mi">📖 Ngā Mahere Akoranga</span><span class="dropdown-en">Lesson Plans (60-75 min)</span></a></li>
                                <li><a href="handouts.html"><span class="dropdown-mi">📄 Ngā Kape</span><span class="dropdown-en">Handouts & Materials</span></a></li>
                                <li><a href="browse.html"><span class="dropdown-mi">🔍 Tirohia Katoa</span><span class="dropdown-en">Browse All Resources</span></a></li>
                            </ul>
                        </div>
                    </li>
                        <li>
                            <a href="browse.html?filter=subject">
                                <span class="nav-icon">🎨</span>
                                <span class="nav-text-mi" lang="mi">Ngā Marau</span>
                                <span class="nav-text-en">Subjects</span>
                            </a>
                        <div class="nav-dropdown">
                            <ul>
                                <li><a href="browse.html?subject=english"><span class="dropdown-mi">📝 Reo Pākehā</span><span class="dropdown-en">English</span></a></li>
                                <li><a href="browse.html?subject=math"><span class="dropdown-mi">🔢 Pāngarau</span><span class="dropdown-en">Mathematics</span></a></li>
                                <li><a href="browse.html?subject=science"><span class="dropdown-mi">🔬 Pūtaiao</span><span class="dropdown-en">Science</span></a></li>
                                <li><a href="browse.html?subject=social-studies"><span class="dropdown-mi">🌏 Tikanga-ā-Iwi</span><span class="dropdown-en">Social Studies</span></a></li>
                                <li><a href="browse.html?subject=te-reo"><span class="dropdown-mi">🌿 Te Reo Māori</span><span class="dropdown-en">Māori Language</span></a></li>
                                <li><a href="browse.html?subject=arts"><span class="dropdown-mi">🎨 Ngā Toi</span><span class="dropdown-en">The Arts</span></a></li>
                                <li><a href="browse.html?subject=health-pe"><span class="dropdown-mi">💪 Hauora</span><span class="dropdown-en">Health & PE</span></a></li>
                                <li><a href="browse.html?subject=technology"><span class="dropdown-mi">🔧 Hangarau</span><span class="dropdown-en">Technology</span></a></li>
                            </ul>
                        </div>
                    </li>
                        <li>
                            <a href="browse.html?filter=year">
                                <span class="nav-icon">📅</span>
                                <span class="nav-text-mi" lang="mi">Ngā Tau</span>
                                <span class="nav-text-en">Year Levels</span>
                            </a>
                            <div class="nav-dropdown nav-dropdown-wide">
                                <div class="year-stage-label">Primary / Tuatahi (1-6)</div>
                                <ul class="year-grid">
                                    <li><a href="browse.html?year=1"><span class="dropdown-mi">Tau 1</span><span class="dropdown-en">Year 1</span></a></li>
                                    <li><a href="browse.html?year=2"><span class="dropdown-mi">Tau 2</span><span class="dropdown-en">Year 2</span></a></li>
                                    <li><a href="browse.html?year=3"><span class="dropdown-mi">Tau 3</span><span class="dropdown-en">Year 3</span></a></li>
                                </ul>
                                <ul class="year-grid">
                                    <li><a href="browse.html?year=4"><span class="dropdown-mi">Tau 4</span><span class="dropdown-en">Year 4</span></a></li>
                                    <li><a href="browse.html?year=5"><span class="dropdown-mi">Tau 5</span><span class="dropdown-en">Year 5</span></a></li>
                                    <li><a href="browse.html?year=6"><span class="dropdown-mi">Tau 6</span><span class="dropdown-en">Year 6</span></a></li>
                                </ul>
                                <div class="year-stage-label">Intermediate / Waenga (7-8)</div>
                                <ul class="year-grid">
                                    <li><a href="browse.html?year=7"><span class="dropdown-mi">Tau 7</span><span class="dropdown-en">Year 7</span></a></li>
                                    <li><a href="browse.html?year=8"><span class="dropdown-mi">Tau 8</span><span class="dropdown-en">Year 8</span></a></li>
                                </ul>
                                <div class="year-stage-label">Junior Secondary / Tuarua (9-10)</div>
                                <ul class="year-grid">
                                    <li><a href="browse.html?year=9"><span class="dropdown-mi">Tau 9</span><span class="dropdown-en">Year 9</span></a></li>
                                    <li><a href="browse.html?year=10"><span class="dropdown-mi">Tau 10</span><span class="dropdown-en">Year 10</span></a></li>
                                </ul>
                                <div class="year-stage-label">Senior Secondary / NCEA (11-13)</div>
                                <ul class="year-grid">
                                    <li><a href="browse.html?year=11"><span class="dropdown-mi">Tau 11</span><span class="dropdown-en">Year 11</span></a></li>
                                    <li><a href="browse.html?year=12"><span class="dropdown-mi">Tau 12</span><span class="dropdown-en">Year 12</span></a></li>
                                    <li><a href="browse.html?year=13"><span class="dropdown-mi">Tau 13</span><span class="dropdown-en">Year 13</span></a></li>
                                </ul>
                            </div>
                        </li>
                    <li>
                        <a href="#more">
                            <span class="nav-icon">📦</span>
                            <span class="nav-text-mi" lang="mi">Ētahi Atu</span>
                            <span class="nav-text-en">More Stuff</span>
                        </a>
                        <div class="nav-dropdown">
                            <ul>
                                <li><a href="games.html"><span class="dropdown-mi">🎮 Ngā Kēmu</span><span class="dropdown-en">Games</span></a></li>
                                <li><a href="youtube.html"><span class="dropdown-mi">📺 Ataata YouTube</span><span class="dropdown-en">YouTube Videos</span></a></li>
                                <li><a href="curriculum-alignment.html"><span class="dropdown-mi">📋 Te Marautanga</span><span class="dropdown-en">Curriculum Alignment</span></a></li>
                                <li><a href="other-resources.html"><span class="dropdown-mi">🔗 Ētahi Atu Rauemi</span><span class="dropdown-en">Other Resources</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="auth-nav auth-logged-out">
                        <a href="login.html" class="auth-btn">
                            <span class="nav-icon" data-icon="login"></span>
                            <span class="nav-text-mi" lang="mi">Takiuru</span>
                            <span class="nav-text-en">Login</span>
                        </a>
                    </li>
                    <li class="auth-nav auth-logged-in" style="display: none;">
                        <a href="my-kete.html" class="dashboard-btn">
                            <span class="nav-icon" data-icon="kete"></span>
                            <span class="nav-text-mi" lang="mi">Tōku Kete</span>
                            <span class="nav-text-en">My Kete</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="main-container">
        <main class="content-area" style="width: 100%; max-width: none;">
            <!-- Admin Header -->
            <section class="admin-header">
                <h1>🛠️ YouTube Library Administration</h1>
                <p>Manage educational video content, review submissions, and maintain quality standards for Te Kete Ako's video library.</p>
            </section>

            <!-- Admin Tabs -->
            <div class="admin-tabs">
                <button class="admin-tab active" onclick="switchTab('pending')">
                    📋 Pending Reviews <span id="pending-count" class="tab-count">(0)</span>
                </button>
                <button class="admin-tab" onclick="switchTab('approved')">
                    ✅ Approved Videos
                </button>
                <button class="admin-tab" onclick="switchTab('analytics')">
                    📊 Analytics
                </button>
                <button class="admin-tab" onclick="switchTab('bulk-import')">
                    📤 Bulk Import
                </button>
                <button class="admin-tab" onclick="switchTab('settings')">
                    ⚙️ Settings
                </button>
            </div>

            <!-- Pending Reviews Section -->
            <section id="pending-section" class="admin-section active">
                <div class="section-header">
                    <h2>Videos Awaiting Review</h2>
                    <p>Review and moderate newly submitted educational videos for quality, cultural authenticity, and curriculum alignment.</p>
                </div>

                <div id="pending-videos" class="pending-videos-grid">
                    <!-- Pending videos will be loaded here -->
                </div>
            </section>

            <!-- Approved Videos Section -->
            <section id="approved-section" class="admin-section">
                <div class="section-header">
                    <h2>Approved Video Library</h2>
                    <p>Manage approved videos, update metadata, and handle content moderation.</p>
                </div>

                <div class="search-analytics">
                    <div class="analytics-filters">
                        <div class="form-group">
                            <label class="form-label" for="approved-search">Search Videos</label>
                            <input type="text" id="approved-search" class="form-input" placeholder="Search by title, subject, or tags...">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="approved-subject">Subject Filter</label>
                            <select id="approved-subject" class="form-select">
                                <option value="">All Subjects</option>
                                <option value="te-ao-maori">Te Ao Māori</option>
                                <option value="english">English</option>
                                <option value="mathematics">Mathematics</option>
                                <option value="science">Science</option>
                                <option value="social-sciences">Social Sciences</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="approved-status">Quality Filter</label>
                            <select id="approved-status" class="form-select">
                                <option value="">All Videos</option>
                                <option value="high-quality">High Quality (4-5 stars)</option>
                                <option value="culturally-authentic">Culturally Authentic</option>
                                <option value="curriculum-aligned">Curriculum Aligned</option>
                                <option value="assessment-ready">Assessment Ready</option>
                            </select>
                        </div>
                    </div>
                    <button class="action-btn approve-btn" onclick="searchApprovedVideos()">🔍 Search</button>
                </div>

                <div id="approved-videos" class="pending-videos-grid">
                    <!-- Approved videos will be loaded here -->
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics-section" class="admin-section">
                <div class="section-header">
                    <h2>Library Analytics</h2>
                    <p>Monitor usage patterns, popular content, and library performance metrics.</p>
                </div>

                <div class="stats-dashboard">
                    <div class="stat-card">
                        <div class="stat-number" id="total-videos">0</div>
                        <div class="stat-label">Total Videos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="monthly-views">0</div>
                        <div class="stat-label">Monthly Views</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="user-bookmarks">0</div>
                        <div class="stat-label">User Bookmarks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avg-rating">0.0</div>
                        <div class="stat-label">Average Rating</div>
                    </div>
                </div>

                <div class="search-analytics">
                    <h3>Popular Content</h3>
                    <div id="popular-content-list">
                        <!-- Popular content will be loaded here -->
                    </div>
                </div>

                <div class="search-analytics">
                    <h3>Cultural Content Statistics</h3>
                    <div id="cultural-stats">
                        <!-- Cultural content stats will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Bulk Import Section -->
            <section id="bulk-import-section" class="admin-section">
                <div class="section-header">
                    <h2>Bulk Video Import</h2>
                    <p>Import multiple videos from CSV or search YouTube directly for educational content.</p>
                </div>

                <div class="search-analytics">
                    <h3>YouTube Search & Import</h3>
                    <div class="analytics-filters">
                        <div class="form-group">
                            <label class="form-label" for="youtube-search">Search YouTube</label>
                            <input type="text" id="youtube-search" class="form-input" placeholder="Enter educational search terms...">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="max-results">Max Results</label>
                            <select id="max-results" class="form-select">
                                <option value="10">10 videos</option>
                                <option value="25">25 videos</option>
                                <option value="50">50 videos</option>
                            </select>
                        </div>
                    </div>
                    <button class="action-btn approve-btn" onclick="searchYouTube()">🔍 Search YouTube</button>
                </div>

                <div id="youtube-search-results" class="pending-videos-grid" style="margin-top: 2rem;">
                    <!-- YouTube search results will be loaded here -->
                </div>

                <div class="search-analytics" style="margin-top: 2rem;">
                    <h3>CSV Import</h3>
                    <p>Upload a CSV file with video data for bulk import. Required columns: title, youtube_url, subjects, year_levels</p>
                    <input type="file" id="csv-upload" accept=".csv" class="form-input">
                    <button class="action-btn edit-btn" onclick="processCsvUpload()" style="margin-top: 1rem;">📊 Process CSV</button>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings-section" class="admin-section">
                <div class="section-header">
                    <h2>Library Settings</h2>
                    <p>Configure library parameters, moderation settings, and content policies.</p>
                </div>

                <div class="search-analytics">
                    <h3>Content Moderation Settings</h3>
                    <div class="checkbox-group">
                        <input type="checkbox" id="auto-approve-trusted">
                        <label for="auto-approve-trusted">Auto-approve videos from trusted sources</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="require-cultural-review">
                        <label for="require-cultural-review">Require cultural review for Māori content</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="enable-user-reporting">
                        <label for="enable-user-reporting">Enable user reporting of inappropriate content</label>
                    </div>
                </div>

                <div class="search-analytics">
                    <h3>Quality Standards</h3>
                    <div class="form-group">
                        <label class="form-label" for="min-video-quality">Minimum Video Quality Score</label>
                        <select id="min-video-quality" class="form-select">
                            <option value="3">3 Stars - Good</option>
                            <option value="4">4 Stars - Very Good</option>
                            <option value="5">5 Stars - Excellent</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="max-video-duration">Maximum Video Duration (minutes)</label>
                        <input type="number" id="max-video-duration" class="form-input" value="60" min="1" max="180">
                    </div>
                </div>

                <button class="action-btn approve-btn" onclick="saveSettings()">💾 Save Settings</button>
            </section>
        </main>
    </div>

    <!-- Video Review Modal -->
    <div id="review-modal" class="modal">
        <div class="modal-content">
            <h3>Review Video</h3>
            <div id="review-video-details">
                <!-- Video details will be loaded here -->
            </div>
            
            <div class="cultural-validation">
                <h4>🌟 Cultural Content Validation</h4>
                <div class="checkbox-group">
                    <input type="checkbox" id="culturally-authentic">
                    <label for="culturally-authentic">Content is culturally authentic and appropriate</label>
                </div>
                <div class="form-group">
                    <label class="form-label" for="cultural-rating">Cultural Authenticity Rating</label>
                    <select id="cultural-rating" class="form-select">
                        <option value="">Not Applicable</option>
                        <option value="5">5 - Highly Authentic</option>
                        <option value="4">4 - Very Authentic</option>
                        <option value="3">3 - Moderately Authentic</option>
                        <option value="2">2 - Somewhat Authentic</option>
                        <option value="1">1 - Not Authentic</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="educational-value">Educational Value</label>
                <select id="educational-value" class="form-select">
                    <option value="5">5 - Excellent</option>
                    <option value="4">4 - Very Good</option>
                    <option value="3">3 - Good</option>
                    <option value="2">2 - Fair</option>
                    <option value="1">1 - Poor</option>
                </select>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="curriculum-aligned">
                <label for="curriculum-aligned">Aligns with NZ Curriculum</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="assessment-ready">
                <label for="assessment-ready">Has assessment materials available</label>
            </div>

            <div class="form-group">
                <label class="form-label" for="moderation-notes">Moderation Notes</label>
                <textarea id="moderation-notes" class="form-textarea" placeholder="Add any notes about this video's content, quality, or suitability..."></textarea>
            </div>

            <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
                <button class="action-btn reject-btn" onclick="moderateVideo('rejected')">❌ Reject</button>
                <button class="action-btn approve-btn" onclick="moderateVideo('approved')">✅ Approve</button>
                <button class="action-btn" onclick="closeModal()" style="background: var(--color-text-muted);">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        let currentVideoId = null;
        let currentTab = 'pending';

        // Initialize admin interface
        document.addEventListener('DOMContentLoaded', () => {
            loadPendingVideos();
            loadAnalytics();
        });

        // Tab switching
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');

            // Update sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`${tabName}-section`).classList.add('active');

            currentTab = tabName;

            // Load content based on tab
            switch(tabName) {
                case 'pending':
                    loadPendingVideos();
                    break;
                case 'approved':
                    loadApprovedVideos();
                    break;
                case 'analytics':
                    loadAnalytics();
                    break;
            }
        }

        // Load pending videos for review
        async function loadPendingVideos() {
            try {
                // Mock data for demonstration
                const mockPendingVideos = [
                    {
                        id: '1',
                        title: 'Traditional Māori Weaving Techniques',
                        description: 'An in-depth look at traditional weaving methods passed down through generations.',
                        thumbnail_url: 'https://img.youtube.com/vi/mock1/maxresdefault.jpg',
                        duration: '18:45',
                        channel_name: 'Cultural Heritage NZ',
                        subjects: ['te-ao-maori', 'the-arts'],
                        year_levels: [8, 9, 10, 11, 12],
                        submitted_by: 'teacher@school.nz',
                        submitted_date: '2025-01-05'
                    },
                    {
                        id: '2',
                        title: 'Climate Change Solutions in New Zealand',
                        description: 'Young environmental scientists discuss innovative solutions to climate challenges in Aotearoa.',
                        thumbnail_url: 'https://img.youtube.com/vi/mock2/maxresdefault.jpg',
                        duration: '22:15',
                        channel_name: 'Youth Climate Action',
                        subjects: ['science', 'environmental-studies'],
                        year_levels: [9, 10, 11, 12, 13],
                        submitted_by: 'science.teacher@high.school.nz',
                        submitted_date: '2025-01-04'
                    }
                ];

                const container = document.getElementById('pending-videos');
                document.getElementById('pending-count').textContent = `(${mockPendingVideos.length})`;

                container.innerHTML = mockPendingVideos.map(video => `
                    <div class="pending-video-card">
                        <div class="pending-video-thumbnail">
                            <img src="${video.thumbnail_url}" alt="${video.title}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDIwMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTIwIiBmaWxsPSIjZjNmNGY2Ii8+Cjx0ZXh0IHg9IjEwMCIgeT0iNjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZGmsbCk9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIwLjNlbSI+VmlkZW8gVGh1bWJuYWlsPC90ZXh0Pgo8L3N2Zz4K'">
                        </div>
                        <div class="pending-video-info">
                            <h4>${video.title}</h4>
                            <p class="pending-video-meta">
                                <strong>Channel:</strong> ${video.channel_name}<br>
                                <strong>Duration:</strong> ${video.duration}<br>
                                <strong>Submitted by:</strong> ${video.submitted_by}<br>
                                <strong>Date:</strong> ${video.submitted_date}
                            </p>
                            <p>${video.description}</p>
                            <div class="video-tags">
                                ${video.subjects.map(subject => `<span class="tag">${subject}</span>`).join('')}
                                <span class="tag">Years ${Math.min(...video.year_levels)}-${Math.max(...video.year_levels)}</span>
                            </div>
                        </div>
                        <div class="moderation-actions">
                            <button class="action-btn approve-btn" onclick="openReviewModal('${video.id}')">
                                📋 Review
                            </button>
                            <button class="action-btn edit-btn" onclick="editVideoMetadata('${video.id}')">
                                ✏️ Edit
                            </button>
                            <button class="action-btn reject-btn" onclick="quickReject('${video.id}')">
                                ❌ Quick Reject
                            </button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading pending videos:', error);
            }
        }

        // Load approved videos
        async function loadApprovedVideos() {
            // Implementation would fetch from API

        }

        // Load analytics data
        async function loadAnalytics() {
            // Mock analytics data
            document.getElementById('total-videos').textContent = '1,247';
            document.getElementById('monthly-views').textContent = '15,683';
            document.getElementById('user-bookmarks').textContent = '2,341';
            document.getElementById('avg-rating').textContent = '4.2';
        }

        // Open video review modal
        function openReviewModal(videoId) {
            currentVideoId = videoId;
            document.getElementById('review-modal').classList.add('active');
            
            // Load video details into modal
            // This would typically fetch from API
            document.getElementById('review-video-details').innerHTML = `
                <div style="text-align: center; margin-bottom: 2rem;">
                    <h4>Review Video: Traditional Māori Weaving Techniques</h4>
                    <p><strong>Duration:</strong> 18:45 | <strong>Channel:</strong> Cultural Heritage NZ</p>
                </div>
            `;
        }

        // Close modal
        function closeModal() {
            document.getElementById('review-modal').classList.remove('active');
            currentVideoId = null;
        }

        // Handle video moderation
        async function moderateVideo(action) {
            if (!currentVideoId) return;

            const moderationData = {
                video_id: currentVideoId,
                action: action,
                culturally_authentic: document.getElementById('culturally-authentic').checked,
                cultural_rating: document.getElementById('cultural-rating').value,
                educational_value: document.getElementById('educational-value').value,
                curriculum_aligned: document.getElementById('curriculum-aligned').checked,
                assessment_ready: document.getElementById('assessment-ready').checked,
                notes: document.getElementById('moderation-notes').value
            };

            try {
                // API call would go here

                
                // Show success message
                // Close modal and refresh list
                closeModal();
                loadPendingVideos();
            } catch (error) {
                console.error('Error moderating video:', error);
                }
        }

        // Quick reject functionality
        function quickReject(videoId) {
            if (confirm('Are you sure you want to reject this video?')) {

                loadPendingVideos();
            }
        }

        // Search YouTube functionality
        async function searchYouTube() {
            const query = document.getElementById('youtube-search').value;
            const maxResults = document.getElementById('max-results').value;
            
            if (!query.trim()) {
                return;
            }


            
            // Mock search results
            const resultsContainer = document.getElementById('youtube-search-results');
            resultsContainer.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <p>YouTube search results for "${query}" would appear here.</p>
                    <p>This would integrate with the YouTube Data API to find educational content.</p>
                </div>
            `;
        }

        // Save settings
        function saveSettings() {
            const settings = {
                autoApproveTrusted: document.getElementById('auto-approve-trusted').checked,
                requireCulturalReview: document.getElementById('require-cultural-review').checked,
                enableUserReporting: document.getElementById('enable-user-reporting').checked,
                minVideoQuality: document.getElementById('min-video-quality').value,
                maxVideoDuration: document.getElementById('max-video-duration').value
            };


            }

        // Logout functionality
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = 'login.html';
            }
        }

        // Modal click-outside-to-close
        document.getElementById('review-modal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closeModal();
            }
        });
    </script>

    <!-- Load Supabase Client -->
    <script src="js/supabase-client.js"></script>
    <!-- Load Auth UI -->
    <script src="js/auth-enhanced.js"></script>

<footer class="site-footer no-print">
        <div class="footer-content">
            <div class="footer-grid">
                <!-- Brand Section -->
                <div class="footer-section footer-brand">
                    <h3>🧺 Te Kete Ako</h3>
                    <p class="footer-whakataukī">"Whaowhia te kete mātauranga"</p>
                    <p class="footer-tagline">Fill the basket of knowledge</p>
                    <p class="footer-description">Quality teaching resources for Aotearoa New Zealand educators, honoring mātauranga Māori and contemporary pedagogy.</p>
                </div>

                <!-- Resources Section -->
                <div class="footer-section footer-resources">
                    <h4><span class="footer-mi">Ngā Rauemi</span> <span class="footer-en">Resources</span></h4>
                    <ul>
                        <li><a href="unit-plans.html">📚 Unit Plans / Ngā Mahere Wāhanga</a></li>
                        <li><a href="lessons.html">📖 Lesson Plans / Ngā Akoranga</a></li>
                        <li><a href="handouts.html">📄 Handouts / Ngā Kape</a></li>
                        <li><a href="games.html">🎮 Games / Ngā Kēmu</a></li>
                        <li><a href="browse.html">🔍 Browse All / Tirohia Katoa</a></li>
                    </ul>
                </div>

                <!-- Curriculum Section -->
                <div class="footer-section footer-curriculum">
                    <h4><span class="footer-mi">Te Marautanga</span> <span class="footer-en">Curriculum</span></h4>
                    <ul>
                        <li><a href="browse.html?subject=english">📝 English / Reo Pākehā</a></li>
                        <li><a href="browse.html?subject=math">🔢 Mathematics / Pāngarau</a></li>
                        <li><a href="browse.html?subject=science">🔬 Science / Pūtaiao</a></li>
                        <li><a href="browse.html?subject=social-studies">🌏 Social Studies / Tikanga-ā-Iwi</a></li>
                        <li><a href="curriculum-alignment.html">📋 NZ Curriculum Alignment</a></li>
                    </ul>
                </div>

                <!-- Account & Support Section -->
                <div class="footer-section footer-support">
                    <h4><span class="footer-mi">Tautoko</span> <span class="footer-en">Support</span></h4>
                    <ul>
                        <li><a href="my-kete.html">🧺 My Kete / Tōku Kete</a></li>
                        <li><a href="login.html">🔐 Login / Takiuru</a></li>
                        <li><a href="#about">ℹ️ About Us / Mō Mātou</a></li>
                        <li><a href="#contact">✉️ Contact / Whakapā Mai</a></li>
                        <li><a href="#help">❓ Help / Āwhina</a></li>
                    </ul>
                </div>
            </div>

            <!-- Footer Bottom -->
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <span class="footer-copyright">© 2025 Te Kete Ako</span>
                    <span class="footer-separator">•</span>
                    <span class="footer-location">Aotearoa New Zealand</span>
                    <span class="footer-separator">•</span>
                    <a href="#privacy">Privacy</a>
                    <span class="footer-separator">•</span>
                    <a href="#terms">Terms</a>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>