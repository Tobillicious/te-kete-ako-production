# CRITICAL SYSTEM RECOVERY PLAN

## EMERGENCY STATUS: WEBSITE BROKEN, STYLING MISSING

### User Feedback Analysis
- "things are no where near as you claim to be honest"
- "things are broken"
- "styling appears to be missing"
- "You broke cursor and caused a crash"
- "agents not collaborating properly"

### Root Cause Analysis
1. **CSS System Breakdown**: Multiple CSS files causing conflicts
2. **Agent Coordination Failure**: Not using MCP and GraphRAG properly
3. **Knowledge Base Gap**: Not updating shared understanding
4. **Communication Breakdown**: Not learning from each other

### Immediate Recovery Actions

#### Phase 1: Agent Coordination (IMMEDIATE)
1. **All agents check in via MCP**
   - Controller: Overall coordination
   - GraphRAG: Knowledge base recovery
   - Discovery: Earlier working state analysis
   - Tohunga Styling: CSS system recovery
   - Content Agent: Cultural integration audit
   - Navigation Agent: Link structure analysis
   - QA Agent: Testing and validation

2. **High-Level Planning Session**
   - Compare current vs earlier working state
   - Identify what worked before
   - Document styling differences
   - Create unified recovery plan

#### Phase 2: CSS System Recovery (URGENT)
1. **Diagnose Styling Issues**
   - Analyze fix-handout-css.sh script
   - Identify malformed HTML issues
   - Check CSS loading problems
   - Verify te-kete-professional.css integrity

2. **Fix CSS System Properly**
   - Ensure single design system
   - Remove conflicting stylesheets
   - Fix malformed HTML in generated resources
   - Restore professional appearance

#### Phase 3: Knowledge Base Update (HIGH PRIORITY)
1. **GraphRAG Knowledge Recovery**
   - Update with current codebase state
   - Document working vs broken states
   - Map CSS conflicts and solutions
   - Create recovery knowledge base

2. **Agent Communication Protocol**
   - Establish proper MCP usage
   - Create shared understanding
   - Document lessons learned
   - Prevent future coordination failures

### Agent-Specific Tasks

#### Controller Agent
- Coordinate all recovery efforts
- Ensure proper MCP communication
- Validate unified approach
- Monitor progress against plan

#### GraphRAG Agent
- Analyze codebase state comprehensively
- Compare earlier vs current working state
- Update knowledge base with findings
- Provide intelligent recommendations

#### Discovery Agent
- Analyze earlier working screenshots
- Identify what worked before
- Document styling differences
- Find root cause of degradation

#### Tohunga Styling Agent
- Fix CSS system properly
- Ensure single design system
- Remove conflicting stylesheets
- Restore professional appearance

#### Content Agent
- Audit cultural integration
- Ensure mātauranga Māori authenticity
- Validate educational value
- Fix content presentation issues

#### Navigation Agent
- Fix broken links and structure
- Ensure consistent navigation
- Validate component loading
- Fix header/footer issues

#### QA Agent
- Test all fixes thoroughly
- Validate accessibility compliance
- Ensure responsive design
- Document quality standards

### Success Criteria
1. **Visual Restoration**: Website looks as good as earlier screenshots
2. **CSS Consistency**: Single design system across all pages
3. **Agent Coordination**: Proper MCP and GraphRAG usage
4. **Knowledge Base**: Updated with current state and solutions
5. **User Satisfaction**: User confirms website is fixed and professional

### Timeline
- **Phase 1**: 30 minutes - Agent coordination and planning
- **Phase 2**: 60 minutes - CSS system recovery
- **Phase 3**: 30 minutes - Knowledge base update
- **Total**: 2 hours for complete recovery

### Communication Protocol
1. **All agents check in via MCP every 15 minutes**
2. **GraphRAG updates knowledge base continuously**
3. **Controller validates unified approach**
4. **User feedback incorporated immediately**

### Lessons Learned
1. **Never break existing working code**
2. **Always use MCP and GraphRAG for coordination**
3. **Compare with earlier working state before changes**
4. **Test thoroughly before claiming success**
5. **Communicate continuously with all agents**

## NEXT STEPS
1. Execute Phase 1: Agent Coordination (IMMEDIATE)
2. Execute Phase 2: CSS System Recovery (URGENT)
3. Execute Phase 3: Knowledge Base Update (HIGH PRIORITY)
4. Validate success with user
5. Document lessons learned
