<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://unpkg.com https://supabase.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: https://placehold.co; connect-src 'self' https://nlgldaqtubrlcqddppbq.supabase.co https://supabase.com;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Te Kete Ako - Award-winning educational platform integrating mƒÅtauranga MƒÅori with contemporary learning">
    <meta name="keywords" content="education, mƒÅori, indigenous, ai, learning, new zealand">
    <meta name="author" content="Te Kete Ako">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Te Kete Ako Dashboard | Your Teaching Resources</title>
    <!-- Critical CSS inlined for fastest rendering -->
    <style>
        /* Critical above-the-fold styles - inlined for performance */
        :root{--color-primary:#1a1a1a;--color-secondary:#00b0b9;--color-accent:#f5a623;--color-forest:#2C5F41;--color-background:#ffffff;--color-text-primary:#1a1a1a;--color-text-secondary:#6c757d;--color-border:#e5e7eb;--font-headings:'Montserrat','Helvetica','Arial',sans-serif;--font-body:'Lato','Helvetica','Arial',sans-serif;--header-height:72px}*{box-sizing:border-box;margin:0;padding:0}body{font-family:var(--font-body);background-color:var(--color-background);color:var(--color-text-primary);line-height:1.6;-webkit-font-smoothing:antialiased;display:flex;flex-direction:column;min-height:100vh}.site-header{background:var(--color-background);border-bottom:1px solid var(--color-border);position:sticky;top:0;z-index:1000;height:var(--header-height)}.nav-container{display:flex;align-items:center;justify-content:space-between;max-width:1200px;margin:0 auto;padding:0 1rem;height:100%}.nav-brand{font-family:var(--font-headings);font-size:1.5rem;font-weight:700;color:var(--color-forest);text-decoration:none}.mobile-nav-toggle{display:none;background:none;border:none;cursor:pointer;padding:0.5rem}.mobile-nav-icon span{display:block;width:22px;height:2px;background:var(--color-primary);margin:4px 0;transition:0.3s}@media (max-width:768px){.mobile-nav-toggle{display:block}.main-nav{display:none}}.hero-section{padding:2rem 1rem;text-align:center;background:linear-gradient(135deg,#f0f8f0 0%,#e8f4f8 100%)}.hero-title{font-family:var(--font-headings);font-size:2.5rem;color:var(--color-forest);margin-bottom:0.5rem}.hero-tagline{font-size:1.2rem;color:var(--color-text-secondary);margin-bottom:1rem}.whakatauki{font-size:1.5rem;color:var(--color-secondary);font-style:italic;margin-bottom:0.5rem}.whakatauki-translation{color:var(--color-text-secondary);margin-bottom:2rem}.main-container{display:flex;flex:1;max-width:1200px;margin:0 auto;width:100%}.content-area{flex:1;padding:0 1rem}@media (max-width:768px){.hero-title{font-size:2rem}.main-container{flex-direction:column}}.left-sidebar{display:none}.features-banner{opacity:0}.ai-revolution-section{opacity:0}
    </style>
    
    <!-- Preconnect to external services -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    
    <!-- Load non-critical CSS asynchronously -->
    <link rel="preload" href="css/main.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="css/mobile-revolution.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- Fallback for browsers that don't support preload -->
    <noscript>
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/mobile-revolution.css">
    </noscript>
    
    <!-- Load fonts with display=swap for better performance -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Merriweather:ital,wght@0,400;1,300&family=Montserrat:wght@700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2C5F41">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Te Kete Ako">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">

    <link rel="stylesheet" href="css/kehinde-wiley-design-system.css">
    <link rel="stylesheet" href="css/kehinde-wiley-implementation.css"> 
    <link rel="stylesheet" href="css/award-winning-polish.css">
</head>
<body data-current-page="dashboard" data-auth-required="true">
    <!-- Auth Protection Overlay -->
    <div id="auth-protection" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.95); z-index: 9999; display: flex; align-items: center; justify-content: center;">
        <div style="text-align: center; max-width: 500px; padding: 2rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">üîê</div>
            <h2 style="color: var(--color-primary); margin-bottom: 1rem;" class="wiley-section-title">Authenticating...</h2>
            <p style="color: var(--color-text-secondary); margin-bottom: 2rem;">Verifying your access to the dashboard</p>
            <div class="loading-spinner" style="width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid var(--color-secondary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
        </div>
    </div>

    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="display: none;">
        <defs>
            <filter id="gooey">
                <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
                <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
                <feBlend in="SourceGraphic" in2="goo" />
            </filter>
        </defs>
    </svg>

    <header class="site-header no-print">
        <div class="nav-container">
            <a href="dashboard.html" class="nav-brand">üß∫ Te Kete Ako Dashboard</a>
            
            <!-- Mobile Navigation Toggle -->
            <button class="mobile-nav-toggle" aria-label="Open mobile menu">
                <div class="mobile-nav-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            
            <nav class="main-nav">
                <ul>
                    <li>
                        <a href="my-kete.html">
                            <span class="nav-icon">üß∫</span>
                            <span class="nav-text-en">My Kete</span>
                            <span class="nav-text-mi" lang="mi">Taku Kete</span>
                        </a>
                    </li>
                    <li>
                        <a href="learning-pathways.html">
                            <span class="nav-icon">üåü</span>
                            <span class="nav-text-en">Learning Pathways</span>
                            <span class="nav-text-mi" lang="mi">NgƒÅ Ara Ako</span>
                        </a>
                    </li>
                    <li>
                        <a href="subjects.html">
                            <span class="nav-icon">üìö</span>
                            <span class="nav-text-en">Subjects</span>
                            <span class="nav-text-mi" lang="mi">NgƒÅ Marau</span>
                        </a>
                    </li>
                    <li>
                        <a href="graphrag-search.html">
                            <span class="nav-icon">üß†</span>
                            <span class="nav-text-en">AI Search</span>
                            <span class="nav-text-mi" lang="mi">Rapua AI</span>  
                        </a>
                    </li>
                    <li>
                        <a href="teacher-dashboard-ai.html">
                            <span class="nav-icon">ü§ñ</span>
                            <span class="nav-text-en">AI Tools</span>
                            <span class="nav-text-mi" lang="mi">Taputapu AI</span>  
                        </a>
                    </li>
                    <li class="auth-nav">
                        <!-- Will be populated by auth-ui.js -->
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-nav-overlay">
        <div class="mobile-nav-header">
            <div class="mobile-nav-greeting">Kia ora, <span id="mobile-user-name">Teacher</span></div>
            <div class="mobile-nav-translation">Welcome to your dashboard</div>
        </div>
        <ul class="mobile-nav-list">
            <li class="mobile-nav-item">
                <a href="my-kete.html" class="mobile-nav-link">
                    <span class="mobile-nav-icon">üß∫</span>
                    <div class="mobile-nav-text">
                        <span class="mobile-nav-text-en">My Kete</span>
                        <span class="mobile-nav-text-mi">Taku Kete</span>
                    </div>
                </a>
            </li>
            <li class="mobile-nav-item">
                <a href="teacher-dashboard-ai.html" class="mobile-nav-link">
                    <span class="mobile-nav-icon">ü§ñ</span>
                    <div class="mobile-nav-text">
                        <span class="mobile-nav-text-en">AI Teacher Tools</span>
                        <span class="mobile-nav-text-mi">Taputapu AI</span>
                    </div>
                </a>
            </li>
            <li class="mobile-nav-item">
                <a href="graphrag-search.html" class="mobile-nav-link">
                    <span class="mobile-nav-icon">üß†</span>
                    <div class="mobile-nav-text">
                        <span class="mobile-nav-text-en">AI Search</span>
                        <span class="mobile-nav-text-mi">Rapua AI</span>
                    </div>
                </a>
            </li>
        </ul>
        <button class="mobile-nav-close">Close Menu</button>
    </div>

    <div class="main-container">
        <aside class="left-sidebar no-print" style="width: 320px; min-width: 320px;">
            <div class="sidebar-widget" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; border: 2px solid var(--color-secondary); margin-bottom: 1.5rem;">
                <h3 class="sidebar-widget-title" style="color: white; text-align: center; margin-bottom: 1rem;">ü§ñ Your AI Teaching Assistant</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 0.75rem;"><a href="teacher-dashboard-ai.html" style="color: #FFD700; font-weight: bold; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">ü§ñ AI Teacher Dashboard</a></li>
                    <li style="margin-bottom: 0.75rem;"><a href="interactive-learning-demo.html" style="color: white; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">‚ö° Adaptive Learning Paths</a></li>
                    <li style="margin-bottom: 0.75rem;"><a href="deepseek-agent-test.html" style="color: white; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üß† DeepSeek AI Agent</a></li>
                    <li><a href="project-submission.html" style="color: white; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üìù Smart Project Tracker</a></li>
                </ul>
            </div>
            
            <div class="sidebar-widget" style="background: linear-gradient(135deg, #e8f5e8 0%, #f0f8ff 100%); border-radius: 12px; border: 2px solid var(--color-secondary); margin-bottom: 1.5rem;">
                <h3 class="sidebar-widget-title" style="color: var(--color-forest); text-align: center; margin-bottom: 1rem;">üìö Your Resource Collection</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 0.75rem;"><a href="my-kete.html" style="color: var(--color-secondary); font-weight: bold; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üß∫ My Saved Resources</a></li>
                    <li style="margin-bottom: 0.75rem;"><a href="handouts.html" style="color: var(--color-forest); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üìÑ Browse All Handouts</a></li>
                    <li style="margin-bottom: 0.75rem;"><a href="lessons.html" style="color: var(--color-forest); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üéì Complete Lessons</a></li>
                    <li><a href="unit-plans.html" style="color: var(--color-forest); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üìñ Full Unit Plans</a></li>
                </ul>
            </div>
            
            <div class="sidebar-widget" style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); border-radius: 12px; border: 2px solid var(--color-accent); margin-bottom: 1.5rem;">
                <h3 class="sidebar-widget-title" style="color: var(--color-primary); text-align: center; margin-bottom: 1rem;">üöÄ Quick Actions</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 0.75rem;"><a href="graphrag-search.html" style="color: var(--color-accent); font-weight: bold; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üîç AI-Powered Search</a></li>
                    <li style="margin-bottom: 0.75rem;"><a href="games.html" style="color: var(--color-primary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üéÆ Interactive Games</a></li>
                    <li style="margin-bottom: 0.75rem;"><a href="activities.html" style="color: var(--color-primary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">‚ö° 5-Minute Activities</a></li>
                    <li><a href="classroom-leaderboard.html" style="color: var(--color-primary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üèÜ Class Leaderboard</a></li>
                </ul>
            </div>
            
            <div class="sidebar-widget" style="background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%); border-radius: 12px; border: 2px solid var(--color-secondary);">
                <h3 class="sidebar-widget-title" style="color: var(--color-primary); text-align: center; margin-bottom: 1rem;">üåø Cultural Learning</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 0.75rem;"><a href="digital-purakau.html" style="color: var(--color-forest); font-weight: bold; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üìö Digital P≈´rƒÅkau</a></li>
                    <li style="margin-bottom: 0.75rem;"><a href="living-whakapapa.html" style="color: var(--color-forest); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üåø Living Whakapapa</a></li>
                    <li><a href="virtual-marae.html" style="color: var(--color-forest); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">üèõÔ∏è Virtual Marae</a></li>
                </ul>
            </div>
        </aside>

        <main class="content-area" style="padding: 1rem 2rem;">
            <!-- Personal Dashboard Header -->
            <section class="dashboard-header" style="background: linear-gradient(135deg, #f0f8f0 0%, #e8f4f8 100%); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
                <div style="text-align: center;">
                    <h1 style="font-family: var(--font-headings); font-size: 2.2rem; color: var(--color-forest); margin-bottom: 0.5rem;" class="wiley-hero-title">
                        Kia ora, <span id="user-display-name">Kaiako</span>! üëã
                    </h1>
                    <p style="color: var(--color-text-secondary); font-size: 1.1rem; margin-bottom: 1rem;">
                        Welcome back to your personalized teaching dashboard
                    </p>
                    <div class="quick-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
                        <div class="stat-card" style="background: rgba(255,255,255,0.8); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; color: var(--color-secondary); font-weight: bold;" id="saved-count">Loading...</div>
                            <div style="font-size: 0.9rem; color: var(--color-text-secondary);">Saved Resources</div>
                        </div>
                        <div class="stat-card" style="background: rgba(255,255,255,0.8); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; color: var(--color-accent); font-weight: bold;">467+</div>
                            <div style="font-size: 0.9rem; color: var(--color-text-secondary);">Total Available</div>
                        </div>
                        <div class="stat-card" style="background: rgba(255,255,255,0.8); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; color: var(--color-forest); font-weight: bold;">üß†</div>
                            <div style="font-size: 0.9rem; color: var(--color-text-secondary);">AI-Enhanced</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- AI-Powered Features Section -->
            <section class="ai-features" style="background: linear-gradient(135deg, #2c5aa0 0%, #764ba2 100%); margin: 2rem 0; padding: 2rem; border-radius: 12px; color: white;">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <h2 style="font-size: 2rem; margin: 0 0 0.5rem 0; color: white;" class="wiley-section-title">ü§ñ Your AI Teaching Revolution</h2>
                    <p style="font-size: 1.1rem; opacity: 0.95; margin: 0;">Powered by DeepSeek + GraphRAG + Adaptive Learning</p>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                    <a href="teacher-dashboard-ai.html" style="background: rgba(255,255,255,0.15); padding: 1.5rem; border-radius: 12px; text-decoration: none; color: white; transition: all 0.3s ease; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);">
                        <div style="font-size: 2.5rem; margin-bottom: 1rem; text-align: center;">ü§ñ</div>
                        <h3 style="margin: 0 0 1rem 0; color: #FFD700; font-size: 1.2rem; text-align: center;">AI Teacher Dashboard</h3>
                        <p style="line-height: 1.6; margin: 0; opacity: 0.9; font-size: 0.95rem; text-align: center;">Complete AI toolkit for lesson planning and cultural integration</p>
                    </a>
                    
                    <a href="graphrag-search.html" style="background: rgba(255,255,255,0.15); padding: 1.5rem; border-radius: 12px; text-decoration: none; color: white; transition: all 0.3s ease; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);">
                        <div style="font-size: 2.5rem; margin-bottom: 1rem; text-align: center;">üß†</div>
                        <h3 style="margin: 0 0 1rem 0; color: #98FB98; font-size: 1.2rem; text-align: center;">GraphRAG Search</h3>
                        <p style="line-height: 1.6; margin: 0; opacity: 0.9; font-size: 0.95rem; text-align: center;">AI-powered semantic search across all 467+ resources</p>
                    </a>
                    
                    <a href="interactive-learning-demo.html" style="background: rgba(255,255,255,0.15); padding: 1.5rem; border-radius: 12px; text-decoration: none; color: white; transition: all 0.3s ease; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);">
                        <div style="font-size: 2.5rem; margin-bottom: 1rem; text-align: center;">‚ö°</div>
                        <h3 style="margin: 0 0 1rem 0; color: #FFB6C1; font-size: 1.2rem; text-align: center;">Adaptive Learning</h3>
                        <p style="line-height: 1.6; margin: 0; opacity: 0.9; font-size: 0.95rem; text-align: center;">Personalized learning paths that adapt to student needs</p>
                    </a>
                </div>
            </section>

            <!-- Recent Activity Section -->
            <section class="recent-activity" style="background: white; border-radius: 12px; padding: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 2rem;">
                <h2 style="color: var(--color-primary); margin-bottom: 1.5rem; font-size: 1.5rem;" class="wiley-section-title">üìà Recent Activity & Recommendations</h2>
                <div id="recent-activity-content">
                    <div style="text-align: center; color: var(--color-text-secondary); padding: 2rem;">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">üîÑ</div>
                        <p>Loading your recent activity and AI recommendations...</p>
                    </div>
                </div>
            </section>

            <!-- Featured Resources for Authenticated Users -->
            <section class="dashboard-resources">
                <div class="section-header" style="margin-bottom: 2rem;">
                    <h2 style="color: var(--color-primary); font-size: 1.8rem;" class="wiley-section-title">üåü Recommended for You</h2>
                    <p style="color: var(--color-text-secondary);">Curated resources based on your usage and AI analysis</p>
                </div>
                <div class="featured-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                    <a href="guided-inquiry-unit/index.html" class="featured-card" style="background: white; border-radius: 12px; padding: 1.5rem; text-decoration: none; color: inherit; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease; border-left: 4px solid var(--color-secondary);">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">üèõÔ∏è</div>
                        <h3 style="color: var(--color-primary); margin-bottom: 0.5rem;">Society Design Unit</h3>
                        <p style="color: var(--color-text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Complete 5-week guided inquiry with MƒÅori governance integration</p>
                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <span style="background: var(--color-secondary); color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem;">Complete Unit</span>
                            <span style="background: var(--color-accent); color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem;">Most Popular</span>
                        </div>
                    </a>
                    
                    <a href="digital-purakau.html" class="featured-card" style="background: white; border-radius: 12px; padding: 1.5rem; text-decoration: none; color: inherit; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease; border-left: 4px solid var(--color-forest);">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">üìö</div>
                        <h3 style="color: var(--color-primary); margin-bottom: 0.5rem;">Digital P≈´rƒÅkau</h3>
                        <p style="color: var(--color-text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Interactive MƒÅori storytelling with cultural validation</p>
                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <span style="background: var(--color-forest); color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem;">Cultural</span>
                            <span style="background: var(--color-secondary); color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem;">Interactive</span>
                        </div>
                    </a>
                    
                    <a href="games/te-reo-wordle.html" class="featured-card" style="background: white; border-radius: 12px; padding: 1.5rem; text-decoration: none; color: inherit; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease; border-left: 4px solid var(--color-accent);">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">üéÆ</div>
                        <h3 style="color: var(--color-primary); margin-bottom: 0.5rem;">Te Reo Wordle</h3>
                        <p style="color: var(--color-text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Interactive language learning game with Te Reo MƒÅori</p>
                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <span style="background: var(--color-accent); color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem;">Game</span>
                            <span style="background: var(--color-forest); color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem;">Te Reo</span>
                        </div>
                    </a>
                </div>
            </section>
        </main>
    </div>

    <!-- Clean Dashboard Footer -->
    <footer class="site-footer no-print" style="background: var(--color-background); border-top: 1px solid var(--color-border); padding: 2rem 0; margin-top: 3rem;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 1rem; text-align: center;">
            <div style="margin-bottom: 1rem;">
                <h3 style="color: var(--color-forest);">üß∫ Te Kete Ako Dashboard</h3>
                <p style="color: var(--color-text-secondary); font-size: 0.9rem;">"Whaowhia te kete mƒÅtauranga" - Fill your basket of knowledge</p>
            </div>
            <div style="color: var(--color-text-secondary); font-size: 0.8rem;">
                ¬© 2025 Te Kete Ako - Personalized educational resources for Aotearoa
            </div>
        </div>
    </footer>

    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .featured-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }
    </style>

    <!-- Authentication Required Scripts (standardized order) -->
    <script src="vendor/supabase.min.js" defer></script>
    <script src="js/env-config.js" defer></script>
    <script src="js/supabase-client.js" defer></script>
    <script src="js/auth-enhanced.js" defer></script>
    
    <script>
        // Dashboard-specific authentication and personalization
        class DashboardManager {
            constructor() {
                this.currentUser = null;
                this.init();
            }
            
            async init() {
                // Wait for auth system
                if (typeof authUI === 'undefined') {
                    setTimeout(() => this.init(), 100);
                    return;
                }
                
                // Check authentication
                const isAuthenticated = await authUI.isAuthenticated();
                if (!isAuthenticated) {
                    // Redirect to login
                    window.location.href = 'login.html';
                    return;
                }
                
                // Get user and personalize dashboard
                this.currentUser = authUI.getCurrentUser();
                this.personalizeDashboard();
                this.loadDashboardData();
                
                // Hide auth protection overlay
                document.getElementById('auth-protection').style.display = 'none';
            }
            
            personalizeDashboard() {
                if (!this.currentUser) return;
                
                const email = this.currentUser.email;
                const displayName = email.split('@')[0];
                
                // Update user name displays
                const userDisplayElements = document.querySelectorAll('#user-display-name, #mobile-user-name');
                userDisplayElements.forEach(el => {
                    if (el) el.textContent = displayName;
                });
            }
            
            async loadDashboardData() {
                try {
                    // Load saved resources count
                    await this.loadSavedResourcesCount();
                    
                    // Load recent activity
                    await this.loadRecentActivity();
                } catch (error) {
                    console.error('Error loading dashboard data:', error);
                }
            }
            
            async loadSavedResourcesCount() {
                // This would typically fetch from Supabase
                // For now, use localStorage as fallback
                const savedResources = JSON.parse(localStorage.getItem('te-kete-saved-resources') || '[]');
                const countElement = document.getElementById('saved-count');
                if (countElement) {
                    countElement.textContent = savedResources.length;
                }
            }
            
            async loadRecentActivity() {
                const activityElement = document.getElementById('recent-activity-content');
                if (!activityElement) return;
                
                // Simulate loading recent activity
                setTimeout(() => {
                    activityElement.innerHTML = `
                        <div style="display: grid; gap: 1rem;">
                            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 1.5rem;">üìñ</div>
                                <div>
                                    <div style="font-weight: bold; color: var(--color-primary);">Recently Viewed: Society Design Unit</div>
                                    <div style="font-size: 0.9rem; color: var(--color-text-secondary);">Excellent choice! This unit has 95% positive feedback from teachers</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: #e8f5e8; border-radius: 8px;">
                                <div style="font-size: 1.5rem;">ü§ñ</div>
                                <div>
                                    <div style="font-weight: bold; color: var(--color-forest);">AI Recommendation: Digital P≈´rƒÅkau</div>
                                    <div style="font-size: 0.9rem; color: var(--color-text-secondary);">Based on your interest in cultural integration, this storytelling platform might be perfect for your classroom</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: #fff3e0; border-radius: 8px;">
                                <div style="font-size: 1.5rem;">üß†</div>
                                <div>
                                    <div style="font-weight: bold; color: var(--color-accent);">GraphRAG Insight</div>
                                    <div style="font-size: 0.9rem; color: var(--color-text-secondary);">New resources added this week match your teaching focus on social studies and Te Ao MƒÅori</div>
                                </div>
                            </div>
                        </div>
                    `;
                }, 1000);
            }
        }
        
        // Initialize dashboard when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            new DashboardManager();
        });
        
        // Performance optimization: Show hidden content after auth
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const hiddenElements = document.querySelectorAll('.left-sidebar, .features-banner, .ai-revolution-section');
                hiddenElements.forEach((el, index) => {
                    setTimeout(() => {
                        el.style.display = '';
                        el.style.opacity = '1';
                        el.style.transition = 'opacity 0.3s ease-in-out';
                    }, index * 100);
                });
            }, 500);
        });
    </script>
</body>
</html>