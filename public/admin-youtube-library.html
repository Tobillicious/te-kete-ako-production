<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Performance: Optimize rendering -->
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#1b4332">
    <meta name="color-scheme" content="light">
    <!-- Performance: DNS prefetch for external domains -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <!-- Performance: Preload critical resources -->
    <link rel="preload" href="/js/te-kete-professional.js" as="script">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lato:wght@300;400;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap&display=swap" as="style" crossorigin>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Library Administration | Te Kete Ako</title>
    
    
    
    <link rel="stylesheet" href="/components/badge-system.html">
    
    
    
    <script src="/js/breadcrumbs.js" defer></script>
    
    
    

    <!-- CANONICAL CSS SYSTEM -->
    <link rel="stylesheet" href="/css/te-kete-unified-design-system.css" />
    <link rel="stylesheet" href="/css/component-library.css" />
    <link rel="stylesheet" href="/css/animations-professional.css" />
    <link rel="stylesheet" href="/css/beautiful-navigation.css" />
    <link rel="stylesheet" href="/css/mobile-optimization.css" />
    <link rel="stylesheet" href="/css/print.css" />
    <!-- END CANONICAL CSS -->
</head>
<body data-auto-init="true" data-current-page="admin">
    <!-- Professional Mega Menu Navigation -->
    <div id="beautiful-nav-container"></div>
    <script>
        fetch('/components/navigation-mega-menu.html')
            .then(r => r.text())
            .then(html => {
                const div = document.createElement('div');
                div.innerHTML = html;
                document.body.insertBefore(div.firstElementChild, document.body.firstChild);
            });
    </script>

<a href="#main-content" class="skip-link">Skip to main content</a>


    <!-- Site Header -->
                    <header class="site-header no-print">
        <div class="nav-container">
            <a href="/index.html" class="nav-brand">Te Kete Ako</a>
            <nav class="main-nav">
                <ul>
                    <li>
                        <a href="/unit-plans.html">
                            <span class="nav-icon">📚</span>
                            <span class="nav-text-en">Unit Plans</span>
                            <span class="nav-text-mi" lang="mi">Ngā Waehere</span>
                        </a>
                    </li>
                    <li>
                        <a href="/teachers/index.html">
                            <span class="nav-icon">🧑‍🏫</span>
                            <span class="nav-text-en">Teachers</span>
                            <span class="nav-text-mi" lang="mi">Ngā Kaiako</span>
                        </a>
                    </li>
                    <li>
                        <a href="/lessons.html">
                            <span class="nav-icon">🎓</span>
                            <span class="nav-text-en">Lessons</span>
                            <span class="nav-text-mi" lang="mi">Ngā Akoranga</span>
                        </a>
                    </li>
                    <li>
                        <a href="/handouts.html">
                            <span class="nav-icon">📄</span>
                            <span class="nav-text-en">Handouts</span>
                            <span class="nav-text-mi" lang="mi">Ngā Rauemi</span>
                        </a>
                    </li>
                    <li>
                        <a href="/games.html">
                            <span class="nav-icon">🎮</span>
                            <span class="nav-text-en">Games</span>
                            <span class="nav-text-mi" lang="mi">Ngā Kēmu</span>  
                        </a>
                    </li>
                    <li class="auth-nav my-kete-link" style="display: none;">
                        <a href="/my-kete.html">
                            <span class="nav-icon">🧺</span>
                            My Kete
                        </a>
                    </li>
                    <li class="auth-nav">
                        <a href="/login.html" class="login-btn">
                            <span class="nav-icon">👤</span>
                            Login
                        </a>
                    </li>
                    <li class="auth-nav" style="display: none;">
                        <a href="/register-simple.html" class="register-btn">
                            <span class="nav-icon">📝</span>
                            Register
                        </a>
                    </li>
                </ul>
            </nav>
            <nav class="breadcrumbs no-print" aria-label="Breadcrumb">
                <ol id="breadcrumbs" class="breadcrumbs-list"></ol>
            </nav>
        </div>
    </header>
    <div id="search-container"></div>

    <div class="mobile-nav-overlay" id="mobileNavOverlay" onclick="closeMobileNav()"></div>

    <div class="main-container">
        <main role="main" class="content-area" style="width: 100%; max-width: none;" id="main-content">
            <!-- Admin Header -->
            <section class="admin-header">
                <h1 class="wiley-hero-title">🛠️ YouTube Library Administration</h1>
                <p>Manage educational video content, review submissions, and maintain quality standards for Te Kete Ako's video library.</p>
            </section>

    <section class="cultural-integration">
        <h2 class="section-title">
            <span>🌿</span>
            <span>Cultural Context | Horopaki Ahurea</span>
        </h2>
        
        <div class="whakatauaki-section" style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; text-align: center; border: 2px solid var(--color-accent);">
            <h3 style="font-size: 0.9rem; color: var(--color-text-secondary); margin: 0 0 0.5rem; text-transform: uppercase; letter-spacing: 1px;">Whakataukī</h3>
            <p style="font-size: 1.3rem; font-style: italic; color: var(--color-primary); margin: 0.5rem 0; font-weight: 500;">"Mā te mōhio ka ora, mā te ora ka mōhio"</p>
            <p style="font-size: 1rem; color: var(--color-text-secondary); margin: 0.5rem 0;">"Through knowledge comes wellbeing, through wellbeing comes knowledge"</p>
        </div>
        
        <div class="house-values" style="background: white; padding: 1.5rem; border-radius: 8px;">
            <h3 style="font-size: 1rem; color: var(--color-primary); margin-top: 0;">🏛️ Connection to Mangakōtukutuku College Values</h3>
            <div style="background: rgba(241, 143, 1, 0.1); padding: 1rem; border-radius: 6px; border-left: 3px solid var(--color-accent);">
                <p style="margin: 0; font-size: 0.95rem;">
                    <strong style="color: var(--color-accent); text-transform: capitalize;">Whaiara:</strong> Rising Up - Taking action to create positive change
                </p>
                <p style="margin: 0.75rem 0 0; font-size: 0.9rem; color: var(--color-text-secondary);">
                    This learning connects to the value of <strong>whaiara</strong> by encouraging students to [engage with content in ways that embody this value].
                </p>
            </div>
        </div>
        
        <div class="cultural-safety" style="background: rgba(27, 67, 50, 0.05); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
            <h4 style="font-size: 0.95rem; color: var(--color-primary); margin: 0 0 0.5rem;">🛡️ Cultural Safety Considerations</h4>
            <ul style="font-size: 0.9rem; margin: 0; color: var(--color-text-secondary);">
                <li>Approach Māori content with respect and openness</li>
                <li>Recognize students' diverse cultural backgrounds and experiences</li>
                <li>Create space for Māori students to share their perspectives</li>
                <li>Consult with whānau and local iwi for culturally sensitive topics</li>
            </ul>
        </div>
    </section>



            <!-- Admin Tabs -->
            <div class="admin-tabs">
                <button class="admin-tab active" onclick="switchTab('pending')">
                    📋 Pending Reviews <span id="pending-count" class="tab-count">(0)</span>
                </button>
                <button class="admin-tab" onclick="switchTab('approved')">
                    ✅ Approved Videos
                </button>
                <button class="admin-tab" onclick="switchTab('analytics')">
                    📊 Analytics
                </button>
                <button class="admin-tab" onclick="switchTab('bulk-import')">
                    📤 Bulk Import
                </button>
                <button class="admin-tab" onclick="switchTab('settings')">
                    ⚙️ Settings
                </button>
            </div>
        

            <!-- Pending Reviews Section -->
            <section id="pending-section" class="admin-section active">
                <div class="section-header">
                    <h2 class="wiley-section-title">Videos Awaiting Review</h2>
                    <p>Review and moderate newly submitted educational videos for quality, cultural authenticity, and curriculum alignment.</p>
                </div>

                <div id="pending-videos" class="pending-videos-grid">
                    <!-- Pending videos will be loaded here -->
                </div>
            </section>

            <!-- Approved Videos Section -->
            <section id="approved-section" class="admin-section">
                <div class="section-header">
                    <h2 class="wiley-section-title">Approved Video Library</h2>
                    <p>Manage approved videos, update metadata, and handle content moderation.</p>
                </div>

                <div class="search-analytics">
                    <div class="analytics-filters">
                        <div class="form-group">
                            <label class="form-label" for="approved-search">Search Videos</label>
                            <input type="text" id="approved-search" class="form-input" placeholder="Search by title, subject, or tags...">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="approved-subject">Subject Filter</label>
                            <select id="approved-subject" class="form-select">
                                <option value="">All Subjects</option>
                                <option value="te-ao-maori">Te Ao Māori</option>
                                <option value="english">English</option>
                                <option value="mathematics">Mathematics</option>
                                <option value="science">Science</option>
                                <option value="social-sciences">Social Sciences</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="approved-status">Quality Filter</label>
                            <select id="approved-status" class="form-select">
                                <option value="">All Videos</option>
                                <option value="high-quality">High Quality (4-5 stars)</option>
                                <option value="culturally-authentic">Culturally Authentic</option>
                                <option value="curriculum-aligned">Curriculum Aligned</option>
                                <option value="assessment-ready">Assessment Ready</option>
                            </select>
                        </div>
                    </div>
                    <button class="action-btn approve-btn" onclick="searchApprovedVideos()">🔍 Search</button>
                </div>

                <div id="approved-videos" class="pending-videos-grid">
                    <!-- Approved videos will be loaded here -->
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics-section" class="admin-section">
                <div class="section-header">
                    <h2 class="wiley-section-title">Library Analytics</h2>
                    <p>Monitor usage patterns, popular content, and library performance metrics.</p>
                </div>

                <div class="stats-dashboard">
                    <div class="stat-card">
                        <div class="stat-number" id="total-videos">0</div>
                        <div class="stat-label">Total Videos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="monthly-views">0</div>
                        <div class="stat-label">Monthly Views</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="user-bookmarks">0</div>
                        <div class="stat-label">User Bookmarks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avg-rating">0.0</div>
                        <div class="stat-label">Average Rating</div>
                    </div>
                </div>

                <div class="search-analytics">
                    <h3>Popular Content</h3>
                    <div id="popular-content-list">
                        <!-- Popular content will be loaded here -->
                    </div>
                </div>

                <div class="search-analytics">
                    <h3>Cultural Content Statistics</h3>
                    <div id="cultural-stats">
                        <!-- Cultural content stats will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Bulk Import Section -->
            <section id="bulk-import-section" class="admin-section">
                <div class="section-header">
                    <h2 class="wiley-section-title">Bulk Video Import</h2>
                    <p>Import multiple videos from CSV or search YouTube directly for educational content.</p>
                </div>

                <div class="search-analytics">
                    <h3>YouTube Search & Import</h3>
                    <div class="analytics-filters">
                        <div class="form-group">
                            <label class="form-label" for="youtube-search">Search YouTube</label>
                            <input type="text" id="youtube-search" class="form-input" placeholder="Enter educational search terms...">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="max-results">Max Results</label>
                            <select id="max-results" class="form-select">
                                <option value="10">10 videos</option>
                                <option value="25">25 videos</option>
                                <option value="50">50 videos</option>
                            </select>
                        </div>
                    </div>
                    <button class="action-btn approve-btn" onclick="searchYouTube()">🔍 Search YouTube</button>
                </div>

                <div id="youtube-search-results" class="pending-videos-grid" style="margin-top: 2rem;">
                    <!-- YouTube search results will be loaded here -->
                </div>

                <div class="search-analytics" style="margin-top: 2rem;">
                    <h3>CSV Import</h3>
                    <p>Upload a CSV file with video data for bulk import. Required columns: title, youtube_url, subjects, year_levels</p>
                    <input type="file" id="csv-upload" accept=".csv" class="form-input">
                    <button class="action-btn edit-btn" onclick="processCsvUpload()" style="margin-top: 1rem;">📊 Process CSV</button>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings-section" class="admin-section">
                <div class="section-header">
                    <h2 class="wiley-section-title">Library Settings</h2>
                    <p>Configure library parameters, moderation settings, and content policies.</p>
                </div>

                <div class="search-analytics">
                    <h3>Content Moderation Settings</h3>
                    <div class="checkbox-group">
                        <input type="checkbox" id="auto-approve-trusted">
                        <label for="auto-approve-trusted">Auto-approve videos from trusted sources</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="require-cultural-review">
                        <label for="require-cultural-review">Require cultural review for Māori content</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="enable-user-reporting">
                        <label for="enable-user-reporting">Enable user reporting of inappropriate content</label>
                    </div>
                </div>

                <div class="search-analytics">
                    <h3>Quality Standards</h3>
                    <div class="form-group">
                        <label class="form-label" for="min-video-quality">Minimum Video Quality Score</label>
                        <select id="min-video-quality" class="form-select">
                            <option value="3">3 Stars - Good</option>
                            <option value="4">4 Stars - Very Good</option>
                            <option value="5">5 Stars - Excellent</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="max-video-duration">Maximum Video Duration (minutes)</label>
                        <input type="number" id="max-video-duration" class="form-input" value="60" min="1" max="180">
                    </div>
                </div>

                <button class="action-btn approve-btn" onclick="saveSettings()">💾 Save Settings</button>
            </section>
        </main>
    </div>

    <!-- Video Review Modal -->
    <div id="review-modal" class="modal">
        <div class="modal-content">
            <h3>Review Video</h3>
            <div id="review-video-details">
                <!-- Video details will be loaded here -->
            </div>
            
            <div class="cultural-validation">
                <h4>🌟 Cultural Content Validation</h4>
                <div class="checkbox-group">
                    <input type="checkbox" id="culturally-authentic">
                    <label for="culturally-authentic">Content is culturally authentic and appropriate</label>
                </div>
                <div class="form-group">
                    <label class="form-label" for="cultural-rating">Cultural Authenticity Rating</label>
                    <select id="cultural-rating" class="form-select">
                        <option value="">Not Applicable</option>
                        <option value="5">5 - Highly Authentic</option>
                        <option value="4">4 - Very Authentic</option>
                        <option value="3">3 - Moderately Authentic</option>
                        <option value="2">2 - Somewhat Authentic</option>
                        <option value="1">1 - Not Authentic</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="educational-value">Educational Value</label>
                <select id="educational-value" class="form-select">
                    <option value="5">5 - Excellent</option>
                    <option value="4">4 - Very Good</option>
                    <option value="3">3 - Good</option>
                    <option value="2">2 - Fair</option>
                    <option value="1">1 - Poor</option>
                </select>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="curriculum-aligned">
                <label for="curriculum-aligned">Aligns with NZ Curriculum</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="assessment-ready">
                <label for="assessment-ready">Has assessment materials available</label>
            </div>

            <div class="form-group">
                <label class="form-label" for="moderation-notes">Moderation Notes</label>
                <textarea id="moderation-notes" class="form-textarea" placeholder="Add any notes about this video's content, quality, or suitability..."></textarea>
            </div>

            <div class="flex">
                <button class="action-btn reject-btn" onclick="moderateVideo('rejected')">❌ Reject</button>
                <button class="action-btn approve-btn" onclick="moderateVideo('approved')">✅ Approve</button>
                <button class="action-btn" onclick="closeModal()" style="background: var(--color-text-muted);">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        let currentVideoId = null;
        let currentTab = 'pending';

        // Initialize admin interface
        document.addEventListener('DOMContentLoaded', () => {
            loadPendingVideos();
            loadAnalytics();
        });

        // Tab switching
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');

            // Update sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`${tabName}-section`).classList.add('active');

            currentTab = tabName;

            // Load content based on tab
            switch(tabName) {
                case 'pending':
                    loadPendingVideos();
                    break;
                case 'approved':
                    loadApprovedVideos();
                    break;
                case 'analytics':
                    loadAnalytics();
                    break;
            }
        }

        // Load pending videos for review
        async function loadPendingVideos() {
            try {
                // Mock data for demonstration
                const mockPendingVideos = [
                    {
                        id: '1',
                        title: 'Traditional Māori Weaving Techniques',
                        description: 'An in-depth look at traditional weaving methods passed down through generations.',
                        thumbnail_url: 'https://img.youtube.com/vi/mock1/maxresdefault.jpg',
                        duration: '18:45',
                        channel_name: 'Cultural Heritage NZ',
                        subjects: ['te-ao-maori', 'the-arts'],
                        year_levels: [8, 9, 10, 11, 12],
                        submitted_by: 'teacher@school.nz',
                        submitted_date: '2025-01-05'
                    },
                    {
                        id: '2',
                        title: 'Climate Change Solutions in New Zealand',
                        description: 'Young environmental scientists discuss innovative solutions to climate challenges in Aotearoa.',
                        thumbnail_url: 'https://img.youtube.com/vi/mock2/maxresdefault.jpg',
                        duration: '22:15',
                        channel_name: 'Youth Climate Action',
                        subjects: ['science', 'environmental-studies'],
                        year_levels: [9, 10, 11, 12, 13],
                        submitted_by: 'science.teacher@high.school.nz',
                        submitted_date: '2025-01-04'
                    }
                ];

                const container = document.getElementById('pending-videos');
                document.getElementById('pending-count').textContent = `(${mockPendingVideos.length})`;

                container.innerHTML = mockPendingVideos.map(video => `
                    <div class="pending-video-card">
                        <div class="pending-video-thumbnail">
                            <img src="${video.thumbnail_url}" loading="lazy" alt="Educational content image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDIwMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTIwIiBmaWxsPSIjZjNmNGY2Ii8+Cjx0ZXh0IHg9IjEwMCIgeT0iNjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZGmsbCk9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIwLjNlbSI+VmlkZW8gVGh1bWJuYWlsPC90ZXh0Pgo8L3N2Zz4K'"  alt="Content image">
                        </div>
                        <div class="pending-video-info">
                            <h4>${video.title}</h4>
                            <p class="pending-video-meta">
                                <strong>Channel:</strong> ${video.channel_name}<br>
                                <strong>Duration:</strong> ${video.duration}<br>
                                <strong>Submitted by:</strong> ${video.submitted_by}<br>
                                <strong>Date:</strong> ${video.submitted_date}
                            </p>
                            <p>${video.description}</p>
                            <div class="video-tags">
                                ${video.subjects.map(subject => `<span class="tag">${subject}</span>`).join('')}
                                <span class="tag">Years ${Math.min(...video.year_levels)}-${Math.max(...video.year_levels)}</span>
                            </div>
                        </div>
                        <div class="moderation-actions">
                            <button class="action-btn approve-btn" onclick="openReviewModal('${video.id}')">
                                📋 Review
                            </button>
                            <button class="action-btn edit-btn" onclick="editVideoMetadata('${video.id}')">
                                ✏️ Edit
                            </button>
                            <button class="action-btn reject-btn" onclick="quickReject('${video.id}')">
                                ❌ Quick Reject
                            </button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading pending videos:', error);
            }
        }

        // Load approved videos
        async function loadApprovedVideos() {
            // Implementation would fetch from API

        }

        // Load analytics data
        async function loadAnalytics() {
            // Mock analytics data
            document.getElementById('total-videos').textContent = '1,247';
            document.getElementById('monthly-views').textContent = '15,683';
            document.getElementById('user-bookmarks').textContent = '2,341';
            document.getElementById('avg-rating').textContent = '4.2';
        }

        // Open video review modal
        function openReviewModal(videoId) {
            currentVideoId = videoId;
            document.getElementById('review-modal').classList.add('active');
            
            // Load video details into modal
            // This would typically fetch from API
            document.getElementById('review-video-details').innerHTML = `
                <div class="text-center">
                    <h4>Review Video: Traditional Māori Weaving Techniques</h4>
                    <p><strong>Duration:</strong> 18:45 | <strong>Channel:</strong> Cultural Heritage NZ</p>
                </div>
            `;
        }

        // Close modal
        function closeModal() {
            document.getElementById('review-modal').classList.remove('active');
            currentVideoId = null;
        }

        // Handle video moderation
        async function moderateVideo(action) {
            if (!currentVideoId) return;

            const moderationData = {
                video_id: currentVideoId,
                action: action,
                culturally_authentic: document.getElementById('culturally-authentic').checked,
                cultural_rating: document.getElementById('cultural-rating').value,
                educational_value: document.getElementById('educational-value').value,
                curriculum_aligned: document.getElementById('curriculum-aligned').checked,
                assessment_ready: document.getElementById('assessment-ready').checked,
                notes: document.getElementById('moderation-notes').value
            };

            try {
                // API call would go here

                
                // Show success message
                // Close modal and refresh list
                closeModal();
                loadPendingVideos();
            } catch (error) {
                console.error('Error moderating video:', error);
                }
        }

        // Quick reject functionality
        function quickReject(videoId) {
            if (confirm('Are you sure you want to reject this video?')) {

                loadPendingVideos();
            }
        }

        // Search YouTube functionality
        async function searchYouTube() {
            const query = document.getElementById('youtube-search').value;
            const maxResults = document.getElementById('max-results').value;
            
            if (!query.trim()) {
                return;
            }


            
            // Mock search results
            const resultsContainer = document.getElementById('youtube-search-results');
            resultsContainer.innerHTML = `
                <div class="text-center">
                    <p>YouTube search results for "${query}" would appear here.</p>
                    <p>This would integrate with the YouTube Data API to find educational content.</p>
                </div>
            `;
        }

        // Save settings
        function saveSettings() {
            const settings = {
                autoApproveTrusted: document.getElementById('auto-approve-trusted').checked,
                requireCulturalReview: document.getElementById('require-cultural-review').checked,
                enableUserReporting: document.getElementById('enable-user-reporting').checked,
                minVideoQuality: document.getElementById('min-video-quality').value,
                maxVideoDuration: document.getElementById('max-video-duration').value
            };


            }

        // Logout functionality
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = 'login.html';
            }
        }

        // Modal click-outside-to-close
        document.getElementById('review-modal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closeModal();
            }
        });
    </script>

    <!-- Load Supabase Client -->
    <script src="/js/supabase-client.js"></script>
    <!-- Load Auth UI -->
    <script>
    // Register service worker for performance
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => console.log('SW registered'))
                .catch(error => console.log('SW registration failed'));
        });
    }
    </script>
    <script src="/js/loading-toast-system.js" defer></script>
</body>
</html>