<!DOCTYPE html>
<html lang="en">
<head>
 <!-- Performance: Optimize rendering -->
 <meta name="format-detection" content="telephone=no">
 <meta name="theme-color" content="#1b4332">
 <meta name="color-scheme" content="light">
 <!-- Performance: DNS prefetch for external domains -->
 <link rel="dns-prefetch" href="//fonts.googleapis.com">
 <link rel="dns-prefetch" href="//fonts.gstatic.com">
 <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
 <!-- Performance: Preload critical resources -->
 <link rel="stylesheet" href="/components/badge-system.html">
 
 <link rel="preload" href="/js/te-kete-professional.js" as="script">
 <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lato:wght@300;400;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap&display=swap" as="style" crossorigin>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta name="description" content="Interactive Patterns and Algebra Vocabulary Wordsearch - Y7 Maths - Te Kete Ako">
 <meta name="keywords" content="algebra, patterns, wordsearch, vocabulary, y7, mathematics, interactive">
 <meta name="author" content="Te Kete Ako">
 <title>Interactive Wordsearch: Patterns & Algebra | Y7 Maths</title>

 <script src="/js/breadcrumbs.js" defer></script>

 <!-- CANONICAL CSS SYSTEM -->
 <link rel="stylesheet" href="/css/te-kete-professional.css">
 <link rel="stylesheet" href="/css/component-library.css" />
 <link rel="stylesheet" href="/css/animations-professional.css" />
 <link rel="stylesheet" href="/css/beautiful-navigation.css" />
 <link rel="stylesheet" href="/css/mobile-optimization.css" />
 <link rel="stylesheet" href="/css/print.css" />
 <!-- END CANONICAL CSS -->
 
 <style>
 /* Enhanced Interactive Wordsearch Styles */
 .wordsearch-grid {
 display: grid;
 grid-template-columns: repeat(12, 1fr);
 gap: 3px;
 max-width: 500px;
 margin: 1rem auto;
 font-family: 'Courier New', monospace;
 -webkit-user-select: none;
 -moz-user-select: none;
 -ms-user-select: none;
 user-select: none;
 }
 
 .wordsearch-cell {
 aspect-ratio: 1;
 display: flex;
 align-items: center;
 justify-content: center;
 border: 2px solid #1a4d2e;
 font-weight: bold;
 font-size: 1rem;
 background: white;
 cursor: pointer;
 transition: all 0.2s ease;
 border-radius: 4px;
 }
 
 .wordsearch-cell:hover {
 background: #e8f5e9;
 transform: scale(1.05);
 }
 
 .wordsearch-cell.selected {
 background: #ffd700;
 border-color: #f59e0b;
 }
 
 .wordsearch-cell.found {
 background: #1a4d2e;
 color: white;
 border-color: #1a4d2e;
 }
 
 .word-list {
 columns: 2;
 column-gap: 2rem;
 margin: 1rem 0;
 }
 
 .word-list-item {
 break-inside: avoid;
 margin-bottom: 0.75rem;
 padding: 0.5rem;
 background: #f8fafc;
 border-radius: 6px;
 border-left: 4px solid #1a4d2e;
 cursor: pointer;
 transition: all 0.2s ease;
 }
 
 .word-list-item:hover {
 background: #e8f5e9;
 transform: translateX(4px);
 }
 
 .word-list-item.found {
 background: #d1fae5;
 border-left-color: #10b981;
 text-decoration: line-through;
 opacity: 0.7;
 }
 
 .word-name {
 font-weight: 600;
 color: #1a4d2e;
 display: block;
 margin-bottom: 0.25rem;
 }
 
 .word-definition {
 font-size: 0.85rem;
 color: #546e7a;
 font-style: italic;
 display: block;
 }
 
 .progress-section {
 background: linear-gradient(135deg, #1a4d2e, #2d6a4f);
 color: white;
 padding: 1.5rem;
 border-radius: 12px;
 margin: 1.5rem 0;
 text-align: center;
 }
 
 .progress-bar {
 background: rgba(255,255,255,0.2);
 height: 12px;
 border-radius: 6px;
 overflow: hidden;
 margin: 1rem 0;
 }
 
 .progress-fill {
 background: #ffd700;
 height: 100%;
 transition: width 0.5s ease;
 }
 
 .stats-grid {
 display: grid;
 grid-template-columns: repeat(3, 1fr);
 gap: 1rem;
 margin-top: 1rem;
 }
 
 .stat-item {
 background: rgba(255,255,255,0.1);
 padding: 0.75rem;
 border-radius: 8px;
 }
 
 .stat-number {
 font-size: 1.5rem;
 font-weight: 700;
 }
 
 .stat-label {
 font-size: 0.85rem;
 opacity: 0.9;
 }
 
 .definition-popup {
 position: fixed;
 top: 50%;
 left: 50%;
 transform: translate(-50%, -50%);
 background: white;
 padding: 2rem;
 border-radius: 12px;
 box-shadow: 0 10px 40px rgba(0,0,0,0.3);
 max-width: 500px;
 width: 90%;
 z-index: 1000;
 display: none;
 }
 
 .definition-popup.active {
 display: block;
 animation: popupFadeIn 0.3s ease;
 }
 
 @keyframes popupFadeIn {
 from {
 opacity: 0;
 transform: translate(-50%, -48%);
 }
 to {
 opacity: 1;
 transform: translate(-50%, -50%);
 }
 }
 
 .popup-overlay {
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 bottom: 0;
 background: rgba(0,0,0,0.5);
 z-index: 999;
 display: none;
 }
 
 .popup-overlay.active {
 display: block;
 }
 
 .celebration {
 position: fixed;
 top: 50%;
 left: 50%;
 transform: translate(-50%, -50%);
 font-size: 4rem;
 pointer-events: none;
 opacity: 0;
 animation: celebrate 1s ease;
 }
 
 @keyframes celebrate {
 0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
 50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
 100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
 }
 
 .control-buttons {
 display: flex;
 gap: 1rem;
 justify-content: center;
 margin: 1.5rem 0;
 flex-wrap: wrap;
 }
 
 .btn {
 padding: 0.75rem 1.5rem;
 font-weight: 600;
 border: none;
 border-radius: 8px;
 cursor: pointer;
 transition: all 0.3s ease;
 }
 
 .btn-primary {
 background: #1a4d2e;
 color: white;
 }
 
 .btn-primary:hover {
 background: #2d6a4f;
 transform: translateY(-2px);
 box-shadow: 0 4px 12px rgba(0,0,0,0.2);
 }
 
 .btn-secondary {
 background: #d4a574;
 color: white;
 }
 
 .btn-secondary:hover {
 background: #c49563;
 transform: translateY(-2px);
 }
 
 /* 2 per A4 print layout */
 @media print {
 @page {
 size: A4;
 margin: 10mm;
 }
 
 body {
 margin: 0;
 padding: 0;
 }
 
 .no-print {
 display: none !important;
 }
 
 .print-page {
 page-break-after: always;
 width: 210mm;
 height: 297mm;
 }
 
 .print-grid {
 display: grid;
 grid-template-rows: 1fr 1fr;
 gap: 5mm;
 height: 100%;
 }
 
 .print-puzzle {
 border: 2px solid #1a4d2e;
 padding: 5mm;
 background: white;
 page-break-inside: avoid;
 }
 
 .print-puzzle h2 {
 font-size: 14pt;
 margin: 0 0 3mm;
 color: #1a4d2e;
 }
 
 .wordsearch-grid {
 max-width: 180mm;
 gap: 1px;
 margin: 3mm auto;
 }
 
 .wordsearch-cell {
 font-size: 9pt;
 border: 1pt solid #1a4d2e;
 background: white !important;
 color: black !important;
 }
 
 .word-list {
 font-size: 8pt;
 columns: 3;
 column-gap: 3mm;
 }
 
 .word-list-item {
 margin-bottom: 1mm;
 padding: 1mm;
 border-left-width: 2pt;
 background: white !important;
 }
 
 .word-definition {
 display: none;
 }
 }
 
 @media (max-width: 768px) {
 .wordsearch-cell {
 font-size: 0.85rem;
 }
 
 .word-list {
 columns: 1;
 }
 
 .stats-grid {
 grid-template-columns: 1fr;
 }
 }
 </style>
</head>
<body>
 <!-- Professional Mega Menu Navigation -->
 <script>
 fetch('/components/navigation-standard.html')
 .then(r => r.text())
 .then(html => {
 const div = document.createElement('div');
 div.innerHTML = html;
 document.body.insertBefore(div.firstElementChild, document.body.firstChild);
 });
 </script>
 <header class="site-header no-print">
 <div class="nav-container">
 <a href="/index.html" class="nav-brand">Te Kete Ako</a>
 <nav class="main-nav">
 <ul>
 <li><a href="/unit-plans.html" class="nav-link"><span class="nav-icon">ğŸ“š</span><span class="nav-text-en">Unit Plans</span><span class="nav-text-mi" lang="mi">NgÄ Waehere</span></a></li>
 <li><a href="/lessons.html" class="nav-link"><span class="nav-icon">ğŸ“</span><span class="nav-text-en">Lessons</span><span class="nav-text-mi" lang="mi">NgÄ Akoranga</span></a></li>
 <li><a href="/handouts.html" class="nav-link"><span class="nav-icon">ğŸ“„</span><span class="nav-text-en">Handouts</span><span class="nav-text-mi" lang="mi">NgÄ Rauemi</span></a></li>
 <li><a href="/teachers/index.html" class="nav-link"><span class="nav-icon">ğŸ§‘â€ğŸ«</span><span class="nav-text-en">Teachers</span><span class="nav-text-mi" lang="mi">NgÄ Kaiako</span></a></li>
 <li class="auth-nav"><a href="/login.html" class="nav-link login-btn"><span class="nav-icon">ğŸ‘¤</span>Login</a></li>
 </ul>
 </nav>
 <nav class="breadcrumbs no-print" aria-label="Breadcrumb"><ol id="breadcrumbs" class="breadcrumbs-list"></ol></nav>
 </div>
 </header>
 <div id="search-container"></div>

 <main role="main" class="container">
 <div class="handout-header no-print">
 <h1 class="wiley-hero-title">ğŸ” Interactive Wordsearch: Patterns & Algebra</h1>
 <p style="font-size: 1.1rem; color: var(--color-text-secondary); margin-top: 1rem;">
 Interactive vocabulary reinforcement for Y7 Algebra Unit - Lesson 1: Pattern Detectives
 </p>
 <p style="margin-top: 0.5rem;">
 <a href="/units/y7-maths-algebra/index.html" style="color: var(--color-primary); text-decoration: none;">â† Back to Y7 Algebra Unit</a> | 
 <a href="/units/y7-maths-algebra/resources/wordsearch-patterns-vocabulary.html" style="color: var(--color-primary); text-decoration: none;">Print Version â†’</a>
 </p>
 </div>

 <section class="learning-objectives no-print" style="background: linear-gradient(135deg, #f0f8f0, #e8f5e9); padding: 2rem; border-radius: 12px; margin: 2rem 0; border-left: 4px solid var(--color-pounamu); box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
 <h2 style="color: var(--color-primary); margin-top: 0; display: flex; align-items: center; gap: 0.5rem;">
 <span>ğŸ“š</span>
 <span>NgÄ WhÄinga Ako | Learning Objectives</span>
 </h2>
 
 <div style="background: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
 <p style="margin: 0; color: var(--color-text-secondary); font-size: 0.95rem;">
 <strong>NZ Curriculum:</strong> Phase 3 (Years 7-8) Mathematics - Algebra | <strong>Supports:</strong> Lesson 1 - Pattern Detectives
 </p>
 </div>
 
 <div class="walt-section" style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
 <h3 style="font-size: 1.1rem; color: var(--color-primary); margin-top: 0;">
 WALT (We Are Learning To):
 </h3>
 <ul style="margin: 0.5rem 0 0;">
 <li>Recognize and use key algebra and pattern vocabulary</li>
 <li>Reinforce mathematical terminology through engaging practice</li>
 <li>Connect mathematical language to cultural concepts (tukutuku, kÅwhaiwhai)</li>
 <li><strong>NEW: Interact with vocabulary in a digital learning environment</strong></li>
 </ul>
 </div>
 
 <div class="sc-section" style="background: white; padding: 1.5rem; border-radius: 8px;">
 <h3 style="font-size: 1.1rem; color: var(--color-primary); margin-top: 0;">
 Success Criteria (I can...):
 </h3>
 <ul style="margin: 0.5rem 0 0;">
 <li>Find all 15 mathematical vocabulary words</li>
 <li>Explain what each word means using the interactive definitions</li>
 <li>Use these words correctly when describing patterns</li>
 <li><strong>Track my progress and learn from instant feedback</strong></li>
 </ul>
 </div>
 </section>

 <section class="cultural-integration no-print" style="background: linear-gradient(135deg, #fff7ed, #ffedd5); padding: 2rem; border-radius: 12px; margin: 2rem 0; border-left: 4px solid var(--color-accent); box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
 <h2 style="color: var(--color-primary); margin-top: 0; display: flex; align-items: center; gap: 0.5rem;">
 <span>ğŸŒ¿</span>
 <span>Cultural Context | Horopaki Ahurea</span>
 </h2>
 
 <div class="whakatauaki-section" style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; text-align: center; border: 2px solid var(--color-accent);">
 <h3 style="font-size: 0.9rem; color: var(--color-text-secondary); margin: 0 0 0.5rem; text-transform: uppercase; letter-spacing: 1px;">WhakataukÄ«</h3>
 <p style="font-size: 1.3rem; font-style: italic; color: var(--color-primary); margin: 0.5rem 0; font-weight: 500;">"He tukutuku whakairo, he mea hanga nÄ te hinengaro"</p>
 <p style="font-size: 1rem; color: var(--color-text-secondary); margin: 0.5rem 0;">"A woven pattern is something created by the mind"</p>
 </div>
 
 <div style="background: white; padding: 1.5rem; border-radius: 8px;">
 <h3 style="font-size: 1rem; color: var(--color-primary); margin-top: 0;">ğŸ¨ Mathematics in MÄori Art</h3>
 <p style="margin: 0.5rem 0; font-size: 0.95rem;">
 This wordsearch includes terms from both Western mathematics and MÄori artistic traditions. Tukutuku panels and kÅwhaiwhai patterns demonstrate how our tÅ«puna (ancestors) used mathematical thinking - sequences, symmetry, and rules - in their creative work long before formal algebra was introduced to Aotearoa.
 </p>
 </div>
 </section>

 <!-- Progress Section -->
 <div class="progress-section no-print">
 <h3 style="margin-top: 0;">ğŸ“Š Your Progress | TÅ Haere Whakamua</h3>
 <div class="stats-grid">
 <div class="stat-item">
 <div class="stat-number" id="words-found">0</div>
 <div class="stat-label">Words Found</div>
 </div>
 <div class="stat-item">
 <div class="stat-number" id="total-words">15</div>
 <div class="stat-label">Total Words</div>
 </div>
 <div class="stat-item">
 <div class="stat-number" id="time-elapsed">0:00</div>
 <div class="stat-label">Time</div>
 </div>
 </div>
 <div class="progress-bar">
 <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
 </div>
 <p id="completion-message" style="margin: 0.5rem 0 0; font-size: 0.9rem;"></p>
 </div>

 <!-- Interactive Wordsearch -->
 <section class="wordsearch-section" style="background: white; padding: 2rem; border-radius: 12px; margin: 2rem 0; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
 <h2 class="wiley-section-title">ğŸ” Find the Words</h2>
 
 <div class="instructions no-print" style="background: #f0f8f0; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
 <h3 style="font-size: 1rem; color: var(--color-primary); margin-top: 0;">How to Play:</h3>
 <p style="margin: 0.5rem 0;">Click and drag to select words in the grid. Words can be horizontal, vertical, or diagonal in any direction.</p>
 <p style="margin: 0.5rem 0; font-weight: 600;">âœ¨ Found words will highlight green and show their definition! | ğŸ’¾ Your progress auto-saves!</p>
 </div>

 <div class="wordsearch-grid" id="wordsearch-grid">
 <!-- Grid will be generated by JavaScript -->
 </div>
 
 <div class="control-buttons no-print">
 <button class="btn btn-primary" onclick="resetPuzzle()">ğŸ”„ Reset Puzzle</button>
 <button class="btn btn-secondary" onclick="showHint()">ğŸ’¡ Show Hint</button>
 <button class="btn btn-primary" onclick="window.print()">ğŸ–¨ï¸ Print Version</button>
 </div>

 <h3 style="font-size: 1rem; color: var(--color-primary); margin-top: 2rem;">ğŸ“ Vocabulary List:</h3>
 <div class="word-list" id="word-list">
 <!-- Word list will be generated by JavaScript -->
 </div>
 </section>

 <!-- Definition Popup -->
 <div class="popup-overlay" id="popup-overlay" onclick="closeDefinition()"></div>
 <div class="definition-popup" id="definition-popup">
 <h3 id="popup-word" style="color: #1a4d2e; margin-top: 0;"></h3>
 <p id="popup-definition" style="font-size: 1.1rem; margin: 1rem 0;"></p>
 <p id="popup-context" style="font-size: 0.95rem; color: #546e7a; font-style: italic;"></p>
 <button class="btn btn-primary" onclick="closeDefinition()" style="margin-top: 1rem;">Got it!</button>
 </div>

 </main>

 <!-- Include Footer Component -->
 <div id="footer-component" class="no-print"></div>

 <!-- JavaScript -->
 <script src="/js/shared-components.js" defer></script>
 <script src="/js/mobile-revolution.js" defer></script>
 <script src="/js/te-kete-professional.js" defer></script>

 <script>
 // Load footer
 fetch('/components/footer.html')
 .then(response => response.text())
 .then(html => {
 document.getElementById('footer-component').innerHTML = html;
 })
 .catch(error => console.error('Error loading footer:', error));
 </script>

 <script>
 /* ===================================================================
 INTERACTIVE WORDSEARCH ENGINE
 Educational vocabulary reinforcement with instant feedback
 =================================================================== */
 
 // Vocabulary data with definitions and context
 const VOCABULARY = {
 'PATTERN': {
 definition: 'A repeated arrangement of numbers, shapes, or other elements',
 context: 'In tukutuku weaving, patterns follow mathematical rules that repeat in predictable ways.'
 },
 'SEQUENCE': {
 definition: 'An ordered list of numbers or objects that follows a rule',
 context: 'The sequence 2, 4, 6, 8 follows the pattern of adding 2 each time.'
 },
 'RULE': {
 definition: 'A mathematical relationship that describes how a pattern works',
 context: 'In kÅwhaiwhai art, rules determine how each element connects and repeats.'
 },
 'ALGEBRA': {
 definition: 'A branch of mathematics using symbols to represent numbers and relationships',
 context: 'Algebra helps us describe patterns we see in nature and MÄori art using mathematical language.'
 },
 'TERM': {
 definition: 'Each individual element in a sequence or pattern',
 context: 'In the sequence 3, 6, 9, 12... each number is called a term.'
 },
 'VARIABLE': {
 definition: 'A symbol (like x or n) that represents an unknown or changing number',
 context: 'We use variables to describe patterns that work for any number.'
 },
 'EQUATION': {
 definition: 'A mathematical statement showing two things are equal',
 context: 'The equation 2x + 3 = 7 helps us find the unknown value of x.'
 },
 'NUMBER': {
 definition: 'A mathematical symbol representing quantity or position',
 context: 'Numbers are the building blocks of all mathematical patterns and sequences.'
 },
 'COEFFICIENT': {
 definition: 'The number multiplied by a variable in an algebraic expression',
 context: 'In 3x + 5, the coefficient is 3 because it multiplies the variable x.'
 },
 'EXPRESSION': {
 definition: 'A mathematical phrase containing numbers, variables, and operations',
 context: '2x + 7 is an expression that shows a relationship between variables and numbers.'
 },
 'SYMBOL': {
 definition: 'A character or mark used to represent mathematical concepts',
 context: 'Just like MÄori symbols in art tell stories, mathematical symbols communicate ideas.'
 },
 'FORMULA': {
 definition: 'A mathematical rule written using symbols',
 context: 'Formulas help us calculate patterns quickly, like finding the nth term in a sequence.'
 },
 'OPERATION': {
 definition: 'A mathematical process like addition, subtraction, multiplication, or division',
 context: 'Operations tell us what to do with numbers in patterns and equations.'
 },
 'SOLUTION': {
 definition: 'The answer to a mathematical problem or equation',
 context: 'Finding the solution means discovering what makes the equation true.'
 },
 'TUKUTUKU': {
 definition: 'Traditional MÄori ornamental lattice-work used in meeting houses',
 context: 'Tukutuku panels demonstrate sophisticated mathematical patterns including symmetry, repetition, and geometric sequences - showing that our tÅ«puna were master mathematicians.'
 }
 };
 
 // Grid data (12x12)
 const GRID = [
 ['P','A','T','T','E','R','N','S','E','Q','U','E'],
 ['R','U','L','E','N','C','E','T','U','K','U','T'],
 ['A','L','G','E','B','R','A','E','K','O','W','U'],
 ['T','E','R','M','I','V','S','R','U','W','H','K'],
 ['V','A','R','I','A','B','L','E','T','H','A','U'],
 ['E','Q','U','A','T','I','O','N','U','A','I','T'],
 ['N','U','M','B','E','R','K','G','T','I','W','I'],
 ['C','O','E','F','F','I','C','I','E','N','T','K'],
 ['E','X','P','R','E','S','S','I','O','N','A','A'],
 ['S','Y','M','B','O','L','F','O','R','M','U','L'],
 ['O','P','E','R','A','T','I','O','N','V','L','U'],
 ['S','O','L','U','T','I','O','N','I','A','R','E']
 ];
 
 // Word positions (for hint system)
 const WORD_POSITIONS = {
 'PATTERN': {row: 0, col: 0, dir: 'horizontal', length: 7},
 'SEQUENCE': {row: 0, col: 7, dir: 'horizontal', length: 8},
 'RULE': {row: 1, col: 1, dir: 'horizontal', length: 4},
 'TUKUTUKU': {row: 1, col: 11, dir: 'horizontal-reverse', length: 8},
 'ALGEBRA': {row: 2, col: 1, dir: 'horizontal', length: 7},
 'TERM': {row: 3, col: 1, dir: 'horizontal', length: 4},
 'VARIABLE': {row: 4, col: 1, dir: 'horizontal', length: 8},
 'EQUATION': {row: 5, col: 1, dir: 'horizontal', length: 8},
 'NUMBER': {row: 6, col: 1, dir: 'horizontal', length: 6},
 'COEFFICIENT': {row: 7, col: 1, dir: 'horizontal', length: 11},
 'EXPRESSION': {row: 8, col: 1, dir: 'horizontal', length: 10},
 'SYMBOL': {row: 9, col: 1, dir: 'horizontal', length: 6},
 'FORMULA': {row: 9, col: 6, dir: 'horizontal', length: 7},
 'OPERATION': {row: 10, col: 1, dir: 'horizontal', length: 9},
 'SOLUTION': {row: 11, col: 1, dir: 'horizontal', length: 8}
 };
 
 // Game state
 let foundWords = new Set();
 let selectedCells = [];
 let isSelecting = false;
 let startTime = Date.now();
 let timerInterval = null;
 
 // Initialize game
 document.addEventListener('DOMContentLoaded', () => {
 generateGrid();
 generateWordList();
 loadProgress();
 startTimer();
 updateProgress();
 });
 
 function generateGrid() {
 const grid = document.getElementById('wordsearch-grid');
 grid.innerHTML = '';
 
 GRID.forEach((row, rowIndex) => {
 row.forEach((letter, colIndex) => {
 const cell = document.createElement('div');
 cell.className = 'wordsearch-cell';
 cell.textContent = letter;
 cell.dataset.row = rowIndex;
 cell.dataset.col = colIndex;
 
 // Mouse events for desktop
 cell.addEventListener('mousedown', () => startSelection(cell));
 cell.addEventListener('mouseenter', () => continueSelection(cell));
 cell.addEventListener('mouseup', endSelection);
 
 // Touch events for mobile
 cell.addEventListener('touchstart', (e) => {
 e.preventDefault();
 startSelection(cell);
 });
 cell.addEventListener('touchmove', (e) => {
 e.preventDefault();
 const touch = e.touches[0];
 const element = document.elementFromPoint(touch.clientX, touch.clientY);
 if (element && element.classList.contains('wordsearch-cell')) {
 continueSelection(element);
 }
 });
 cell.addEventListener('touchend', endSelection);
 
 grid.appendChild(cell);
 });
 });
 
 document.addEventListener('mouseup', endSelection);
 }
 
 function generateWordList() {
 const list = document.getElementById('word-list');
 list.innerHTML = '';
 
 Object.keys(VOCABULARY).forEach(word => {
 const item = document.createElement('div');
 item.className = 'word-list-item';
 if (foundWords.has(word)) {
 item.classList.add('found');
 }
 
 item.innerHTML = `
 <span class="word-name">${word}</span>
 <span class="word-definition">${VOCABULARY[word].definition}</span>
 `;
 
 item.onclick = () => showDefinition(word);
 
 list.appendChild(item);
 });
 }
 
 function startSelection(cell) {
 isSelecting = true;
 selectedCells = [cell];
 cell.classList.add('selected');
 }
 
 function continueSelection(cell) {
 if (!isSelecting) return;
 if (selectedCells.includes(cell)) return;
 if (selectedCells[selectedCells.length - 1] === cell) return;
 
 selectedCells.push(cell);
 cell.classList.add('selected');
 }
 
 function endSelection() {
 if (!isSelecting) return;
 isSelecting = false;
 
 const selectedWord = selectedCells.map(cell => cell.textContent).join('');
 const selectedWordReverse = selectedWord.split('').reverse().join('');
 
 let foundWord = null;
 if (VOCABULARY[selectedWord] && !foundWords.has(selectedWord)) {
 foundWord = selectedWord;
 } else if (VOCABULARY[selectedWordReverse] && !foundWords.has(selectedWordReverse)) {
 foundWord = selectedWordReverse;
 }
 
 if (foundWord) {
 // Mark word as found
 foundWords.add(foundWord);
 selectedCells.forEach(cell => {
 cell.classList.remove('selected');
 cell.classList.add('found');
 });
 
 // Celebration
 showCelebration();
 
 // Show definition
 setTimeout(() => showDefinition(foundWord), 500);
 
 // Update UI
 generateWordList();
 updateProgress();
 saveProgress();
 
 // Check completion
 if (foundWords.size === Object.keys(VOCABULARY).length) {
 setTimeout(showCompletion, 1000);
 }
 } else {
 // Clear selection
 selectedCells.forEach(cell => cell.classList.remove('selected'));
 }
 
 selectedCells = [];
 }
 
 function showDefinition(word) {
 const popup = document.getElementById('definition-popup');
 const overlay = document.getElementById('popup-overlay');
 const vocab = VOCABULARY[word];
 
 document.getElementById('popup-word').textContent = word;
 document.getElementById('popup-definition').textContent = vocab.definition;
 document.getElementById('popup-context').textContent = 'ğŸ’¡ ' + vocab.context;
 
 popup.classList.add('active');
 overlay.classList.add('active');
 }
 
 function closeDefinition() {
 document.getElementById('definition-popup').classList.remove('active');
 document.getElementById('popup-overlay').classList.remove('active');
 }
 
 function showCelebration() {
 const celebration = document.createElement('div');
 celebration.className = 'celebration';
 celebration.textContent = 'ğŸ‰';
 document.body.appendChild(celebration);
 setTimeout(() => celebration.remove(), 1000);
 }
 
 function showCompletion() {
 const message = document.getElementById('completion-message');
 const elapsed = document.getElementById('time-elapsed').textContent;
 message.innerHTML = `ğŸŠ <strong>Kei te pai!</strong> You found all words in ${elapsed}! Click word names to review definitions.`;
 
 // Larger celebration
 for (let i = 0; i < 5; i++) {
 setTimeout(() => showCelebration(), i * 200);
 }
 }
 
 function updateProgress() {
 const found = foundWords.size;
 const total = Object.keys(VOCABULARY).length;
 const percentage = (found / total * 100);
 
 document.getElementById('words-found').textContent = found;
 document.getElementById('progress-fill').style.width = percentage + '%';
 
 if (found > 0 && found < total) {
 document.getElementById('completion-message').textContent = 
 `Great progress! ${total - found} words remaining.`;
 }
 }
 
 function startTimer() {
 timerInterval = setInterval(() => {
 const elapsed = Math.floor((Date.now() - startTime) / 1000);
 const minutes = Math.floor(elapsed / 60);
 const seconds = elapsed % 60;
 document.getElementById('time-elapsed').textContent = 
 `${minutes}:${seconds.toString().padStart(2, '0')}`;
 }, 1000);
 }
 
 function resetPuzzle() {
 if (confirm('Reset puzzle and start over? Your progress will be lost.')) {
 foundWords.clear();
 selectedCells = [];
 startTime = Date.now();
 document.querySelectorAll('.wordsearch-cell').forEach(cell => {
 cell.classList.remove('found', 'selected');
 });
 generateWordList();
 updateProgress();
 document.getElementById('completion-message').textContent = '';
 localStorage.removeItem('wordsearch-progress');
 }
 }
 
 function showHint() {
 const unfound = Object.keys(VOCABULARY).filter(word => !foundWords.has(word));
 if (unfound.length === 0) {
 alert('You found all words! ğŸ‰');
 return;
 }
 
 const hint = unfound[Math.floor(Math.random() * unfound.length)];
 alert(`ğŸ’¡ Hint: Look for "${hint}"\n\n${VOCABULARY[hint].definition}`);
 }
 
 function saveProgress() {
 const progress = {
 foundWords: Array.from(foundWords),
 startTime: startTime,
 date: new Date().toISOString()
 };
 localStorage.setItem('wordsearch-progress-y7-algebra', JSON.stringify(progress));
 }
 
 function loadProgress() {
 const saved = localStorage.getItem('wordsearch-progress-y7-algebra');
 if (!saved) return;
 
 try {
 const progress = JSON.parse(saved);
 const savedDate = new Date(progress.date);
 const now = new Date();
 
 // Only load if saved today
 if (savedDate.toDateString() === now.toDateString()) {
 foundWords = new Set(progress.foundWords);
 startTime = progress.startTime;
 
 // Mark found words in grid
 foundWords.forEach(word => {
 const pos = WORD_POSITIONS[word];
 if (pos) {
 markWordAsFound(pos);
 }
 });
 
 generateWordList();
 updateProgress();
 }
 } catch (e) {
 console.error('Error loading progress:', e);
 }
 }
 
 function markWordAsFound(pos) {
 for (let i = 0; i < pos.length; i++) {
 let row = pos.row;
 let col = pos.col;
 
 if (pos.dir === 'horizontal') {
 col += i;
 } else if (pos.dir === 'horizontal-reverse') {
 col -= i;
 } else if (pos.dir === 'vertical') {
 row += i;
 }
 
 const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
 if (cell) cell.classList.add('found');
 }
 }
 </script>
</body>
</html>

