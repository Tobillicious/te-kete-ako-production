<!DOCTYPE html>
<html lang="en">
<head>
    <title>Predator Free NZ Simulation (Y9 Ecology)</title>

<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>



<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>


    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- â­ PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link rel="stylesheet" href="/css/professionalization-system.css">

<!-- â­ THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link rel="stylesheet" href="/css/te-kete-professional.css"/>
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"/>

<!-- â­ COMPONENT STYLES -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/navigation-standard.css">
    <link rel="stylesheet" href="/css/mobile-revolution.css">
    <link rel="stylesheet" href="/css/mobile-first-classroom-tablets.css"/>

<!-- â­ PRINT STYLES (media="print" = only for printing) -->
    <link rel="stylesheet" href="/css/print.css" media="print"/>
<link rel="stylesheet" href="/css/print-professional.css" media="print"/>

<!-- â­ TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link rel="stylesheet" href="/css/tailwind.css">

<!-- â­ CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link rel="stylesheet" href="/css/cascade-fix.css">
<body>
  <div class="sim">
    <header class="header">
      <h1 style="margin:0 0 .5rem">ğŸª¤ Predator Free 2050: The Challenge</h1>
      <p class="m-0" >Can you eliminate introduced predators before native species go extinct?</p>
    </header>

    <div class="grid">
      <aside class="panel">
        <h3 style="margin-top:0">Island Stats</h3>
        <div class="stat"><span>ğŸ¦œ Native Birds</span><span id="birds">50</span></div>
        <div class="stat"><span>ğŸ€ Rats</span><span id="rats">100</span></div>
        <div class="stat"><span>ğŸ¦¡ Stoats</span><span id="stoats">20</span></div>
        <div class="stat"><span>ğŸ’° Budget</span><span id="budget">$100K</span></div>
        <div class="stat"><span>ğŸ“… Year</span><span id="year">2025</span></div>
        <hr style="margin:1rem 0">
        <h4>Actions (per year)</h4>
        <button class="btn" onclick="sim.trapRats()">ğŸª¤ Trap Rats ($10K)</button>
        <button class="btn" onclick="sim.trapStoats()">ğŸª¤ Trap Stoats ($15K)</button>
        <button class="btn" onclick="sim.fence()">ğŸš§ Build Fence ($50K)</button>
        <button class="btn" onclick="sim.reintroduce()">ğŸ¦œ Reintroduce Birds ($20K)</button>
        <button class="btn" onclick="sim.nextYear()" style="background:#16a34a">â–¶ï¸ Next Year</button>
      </aside>

      <main class="panel">
        <h3 style="margin-top:0">Population Dynamics</h3>
        <div id="ecosystem" class="rounded-lg p-4" ></div>
        <div id="log" style="margin-top:1rem;font-size:.85rem;color:#6b7280;max-height:150px;overflow-y:auto"></div>
      </main>
    </div>

    <div id="result" class="panel text-center" >
      <h2 id="result-title"></h2>
      <p id="result-msg"></p>
      <button class="btn" onclick="sim.restart()">Try Again</button>
    </div>
  </div>

  <script>
    const sim={
      birds:50,rats:100,stoats:20,budget:100000,year:2025,hasFence:false,
      
      render(){
        document.getElementById('birds').textContent=this.birds;
        document.getElementById('rats').textContent=this.rats;
        document.getElementById('stoats').textContent=this.stoats;
        document.getElementById('budget').textContent='$'+(this.budget/1000)+'K';
        document.getElementById('year').textContent=this.year;
        
        const eco=document.getElementById('ecosystem');
        eco.innerHTML='<div class="flex" >'+
          Array(Math.min(this.birds,50)).fill(0).map(()=>'<span class="pop native">ğŸ¦œ</span>').join('')+
          Array(Math.min(this.rats,50)).fill(0).map(()=>'<span class="pop predator">ğŸ€</span>').join('')+
          Array(Math.min(this.stoats,20)).fill(0).map(()=>'<span class="pop predator">ğŸ¦¡</span>').join('')+
          '</div>';
        
        if(this.birds<=0)this.lose();
        if(this.rats<=0&&this.stoats<=0&&this.birds>=30)this.win();
      },
      
      log(msg){
        const log=document.getElementById('log');
        log.innerHTML=`<div>${this.year}: ${msg}</div>`+log.innerHTML;
      },
      
      trapRats(){
        if(this.budget<10000)return this.log('âŒ Not enough budget!');
        this.budget-=10000;
        const removed=Math.min(20,this.rats);
        this.rats-=removed;
        this.log(`ğŸª¤ Trapped ${removed} rats`);
        this.render();
      },
      
      trapStoats(){
        if(this.budget<15000)return this.log('âŒ Not enough budget!');
        this.budget-=15000;
        const removed=Math.min(5,this.stoats);
        this.stoats-=removed;
        this.log(`ğŸª¤ Trapped ${removed} stoats`);
        this.render();
      },
      
      fence(){
        if(this.hasFence)return this.log('âŒ Fence already built!');
        if(this.budget<50000)return this.log('âŒ Not enough budget!');
        this.budget-=50000;
        this.hasFence=true;
        this.log('ğŸš§ Predator-proof fence complete!');
        this.render();
      },
      
      reintroduce(){
        if(this.budget<20000)return this.log('âŒ Not enough budget!');
        if(this.rats>10||this.stoats>2)return this.log('âŒ Too many predatorsâ€”birds won\'t survive!');
        this.budget-=20000;
        this.birds+=10;
        this.log('ğŸ¦œ Reintroduced 10 birds');
        this.render();
      },
      
      nextYear(){
        this.year++;
        this.budget+=30000; // annual grant
        
        // Predators breed if not fenced
        if(!this.hasFence){
          this.rats=Math.min(200,Math.floor(this.rats*1.5));
          this.stoats=Math.min(50,Math.floor(this.stoats*1.3));
        }
        
        // Predators eat birds
        const eaten=Math.floor(this.rats*0.1+this.stoats*0.8);
        this.birds=Math.max(0,this.birds-eaten);
        if(eaten>0)this.log(`ğŸ’€ Predators killed ${eaten} birds`);
        
        // Birds breed if safe
        if(this.rats<20&&this.stoats<5){
          const chicks=Math.floor(this.birds*0.2);
          this.birds+=chicks;
          if(chicks>0)this.log(`ğŸ£ ${chicks} chicks hatched!`);
        }
        
        this.log(`ğŸ’µ +$30K annual funding`);
        if(this.year>=2050)this.timeout();
        this.render();
      },
      
      win(){
        document.getElementById('result-title').textContent='ğŸ‰ Victory!';
        document.getElementById('result-msg').textContent=`Predator Free achieved in ${this.year}! Bird population thriving at ${this.birds}. Kaitiakitanga successful!`;
        document.getElementById('result').style.display='block';
      },
      
      lose(){
        document.getElementById('result-title').textContent='ğŸ’” Extinction';
        document.getElementById('result-msg').textContent=`Native birds went extinct in ${this.year}. Predators won. Consider: earlier intervention, better funding, community engagement.`;
        document.getElementById('result').style.display='block';
      },
      
      timeout(){
        document.getElementById('result-title').textContent='â° Time Up';
        document.getElementById('result-msg').textContent=`2050 reached. Birds: ${this.birds} | Rats: ${this.rats} | Stoats: ${this.stoats}. Did you achieve Predator Free 2050?`;
        document.getElementById('result').style.display='block';
      },
      
      restart(){
        this.birds=50;this.rats=100;this.stoats=20;this.budget=100000;this.year=2025;this.hasFence=false;
        document.getElementById('log').innerHTML='';
        document.getElementById('result').style.display='none';
        this.render();
      }
    };
    
    window.addEventListener('DOMContentLoaded',()=>sim.render());
  </script>

  <script src="../../../vendor/supabase.min.js" defer></script>
  <script src="../../../js/env-config.js" defer></script>
  <script src="../../../js/supabase-client.js" defer></script>
  <script src="../../../js/auth-ui.js" defer></script>
</body>
</html>
