<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tukutuku Escape Room | Te Kete Ako</title>
    <link rel="preload" href="/css/te-kete-professional.css" as="style">
    <link rel="preload" href="/js/header-dropdowns.js" as="script">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lato:wght@300;400;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap&display=swap" as="style" crossorigin>
    <link rel="stylesheet" href="/css/te-kete-professional.css" media="all"/>
    <link rel="stylesheet" href="/css/print.css" media="print"/>
    
    <style>
    .escape-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: var(--space-6);
    }
    
    .escape-header {
        background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
        color: white;
        padding: var(--space-8);
        border-radius: 16px;
        text-align: center;
        margin-bottom: var(--space-6);
        position: relative;
        overflow: hidden;
    }
    
    .escape-header::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 200px;
        height: 200px;
        background: var(--pattern-pitau);
        opacity: 0.1;
    }
    
    .escape-title {
        font-family: var(--font-family-maori);
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: var(--space-3);
        position: relative;
        z-index: 1;
    }
    
    .timer-display {
        background: rgba(255, 255, 255, 0.2);
        padding: var(--space-3) var(--space-6);
        border-radius: var(--radius-full);
        font-size: 1.5rem;
        font-weight: 600;
        display: inline-block;
        margin-top: var(--space-3);
    }
    
    .puzzle-room {
        background: white;
        border-radius: 16px;
        box-shadow: var(--shadow-lg);
        padding: var(--space-6);
        margin-bottom: var(--space-6);
        border-left: 6px solid var(--color-accent);
        position: relative;
    }
    
    .room-header {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        margin-bottom: var(--space-4);
        padding-bottom: var(--space-4);
        border-bottom: 2px solid var(--color-gray-200);
    }
    
    .room-number {
        background: var(--gradient-accent);
        color: white;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: var(--text-xl);
    }
    
    .room-title {
        font-family: var(--font-family-maori);
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--color-primary);
    }
    
    .lock-status {
        display: inline-flex;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-2) var(--space-4);
        border-radius: var(--radius-full);
        font-weight: 600;
        margin-left: auto;
    }
    
    .lock-locked {
        background: var(--color-danger-light);
        color: var(--color-danger);
    }
    
    .lock-unlocked {
        background: var(--color-success-light);
        color: var(--color-success);
    }
    
    .puzzle-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-6);
        margin-bottom: var(--space-4);
    }
    
    .puzzle-challenge {
        background: var(--color-bg-secondary);
        padding: var(--space-4);
        border-radius: var(--radius-md);
        border-left: 4px solid var(--color-accent);
    }
    
    .puzzle-workspace {
        background: var(--color-bg-accent);
        padding: var(--space-4);
        border-radius: var(--radius-md);
        border: 2px dashed var(--color-primary);
        min-height: 200px;
    }
    
    .code-input {
        background: white;
        border: 2px solid var(--color-secondary);
        padding: var(--space-3);
        border-radius: var(--radius-md);
        font-size: 1.2rem;
        font-weight: 600;
        text-align: center;
        letter-spacing: 0.2em;
        margin-top: var(--space-3);
        text-transform: uppercase;
    }
    
    .hint-card {
        background: var(--color-cultural-light);
        padding: var(--space-4);
        border-radius: var(--radius-md);
        margin-top: var(--space-4);
        border-left: 4px solid var(--color-cultural);
        position: relative;
    }
    
    .hint-reveal {
        background: var(--color-warning-light);
        color: var(--color-warning);
        padding: var(--space-2) var(--space-4);
        border-radius: var(--radius-md);
        font-weight: 600;
        cursor: pointer;
        display: inline-block;
        margin-top: var(--space-3);
        transition: all 0.3s ease;
    }
    
    .hint-reveal:hover {
        background: var(--color-warning);
        color: white;
        transform: translateY(-2px);
    }
    
    .hint-content {
        display: none;
        margin-top: var(--space-3);
        padding: var(--space-3);
        background: white;
        border-radius: var(--radius-md);
        border-left: 3px solid var(--color-warning);
    }
    
    .progress-tracker {
        background: var(--color-bg-primary);
        padding: var(--space-4);
        border-radius: var(--radius-md);
        margin-bottom: var(--space-6);
        text-align: center;
    }
    
    .progress-bar {
        background: var(--color-gray-200);
        height: 20px;
        border-radius: var(--radius-full);
        overflow: hidden;
        margin: var(--space-3) 0;
    }
    
    .progress-fill {
        background: var(--gradient-primary);
        height: 100%;
        width: 0%;
        transition: width 0.5s ease;
    }
    
    .final-challenge {
        background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-cultural) 100%);
        color: white;
        padding: var(--space-6);
        border-radius: 16px;
        text-align: center;
        margin-top: var(--space-6);
        display: none;
    }
    
    .certificate {
        background: white;
        color: var(--color-primary);
        padding: var(--space-6);
        border-radius: 16px;
        border: 4px solid var(--color-accent);
        margin-top: var(--space-4);
        display: none;
    }
    
    @media print {
        .escape-header {
            background: var(--color-primary);
            color: white;
        }
        
        .hint-reveal {
            display: none;
        }
        
        .hint-content {
            display: block;
            background: transparent;
            border: 1px solid #ccc;
        }
    }
    </style>
</head>
<body data-auto-init="true" data-current-page="handout-tukutuku-escape-room">
                        <header class="site-header no-print">
        <div class="nav-container">
            <a href="/index.html" class="nav-brand">Te Kete Ako</a>
            <nav class="main-nav">
                <ul>
                    <li><a href="/unit-plans.html" class="nav-link"><span class="nav-icon">üìö</span><span class="nav-text-en">Unit Plans</span><span class="nav-text-mi" lang="mi">NgƒÅ Waehere</span></a></li>
                    <li><a href="/lessons.html" class="nav-link"><span class="nav-icon">üéì</span><span class="nav-text-en">Lessons</span><span class="nav-text-mi" lang="mi">NgƒÅ Akoranga</span></a></li>
                    <li><a href="/handouts.html" class="nav-link"><span class="nav-icon">üìÑ</span><span class="nav-text-en">Handouts</span><span class="nav-text-mi" lang="mi">NgƒÅ Rauemi</span></a></li>
                    <li><a href="/teachers/index.html" class="nav-link"><span class="nav-icon">üßë‚Äçüè´</span><span class="nav-text-en">Teachers</span><span class="nav-text-mi" lang="mi">NgƒÅ Kaiako</span></a></li>
                    <li class="auth-nav"><a href="/login.html" class="nav-link login-btn"><span class="nav-icon">üë§</span>Login</a></li>
                </ul>
            </nav>
            <nav class="breadcrumbs no-print" aria-label="Breadcrumb"><ol id="breadcrumbs" class="breadcrumbs-list"></ol></nav>
        </div>
    </header>


    <!-- Include Header Component -->
    <div id="header-component"></div>

    <div class="handout-container">
        <header class="handout-header">
            <h1 class="handout-title">Tukutuku Escape Room</h1>
            <p class="handout-subtitle">An immersive puzzle challenge where students use mathematical thinking to unlock the secrets of traditional MƒÅori weaving</p>
            <div class="handout-meta">
                <span class="handout-subject">Mathematics & Problem-Solving</span>
                <span class="handout-level">Year 9</span>
                <span class="handout-duration">2-3 lessons</span>
            </div>
        </header>

        <div class="escape-container">
            <!-- Escape Room Introduction -->
            <div class="escape-header">
                <h1 class="escape-title">üîê The Tukutuku Escape Challenge</h1>
                <p class="handout-subtitle">You've discovered an ancient wharenui filled with mysterious tukutuku panels. Each panel holds a mathematical puzzle that, when solved, reveals part of a sacred pattern. Solve all puzzles to unlock the final secret!</p>
                <div class="timer-display">‚è±Ô∏è Time Remaining: <span id="timer">45:00</span></div>
            </div>

            <!-- Progress Tracker -->
            <div class="progress-tracker">
                <h3>üîì Progress Tracker</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
                <p>Puzzles Solved: <span id="puzzlesSolved">0</span> / 5</p>
            </div>

            <!-- Puzzle Room 1: Pattern Sequence -->
            <div class="puzzle-room" data-room="1">
                <div class="room-header">
                    <div class="room-number">1</div>
                    <h2 class="room-title">The Pattern Sequence Chamber</h2>
                    <div class="lock-status lock-locked" id="lock1">
                        üîí LOCKED
                    </div>
                </div>
                
                <div class="puzzle-content">
                    <div class="puzzle-challenge">
                        <h3>The Weaving Code</h3>
                        <p>The first tukutuku panel shows a sequence of patterns. Each pattern follows a mathematical rule that builds on the previous one. Your task is to identify the rule and determine the 6th pattern in the sequence.</p>
                        
                        <div class="pattern-sequence">
                            <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin: 20px 0;">
                                <div style="height: 60px; background: #1b4332; border-radius: 4px;"></div>
                                <div style="height: 60px; background: linear-gradient(45deg, #1b4332 50%, white 50%); border-radius: 4px;"></div>
                                <div style="height: 60px; background: linear-gradient(45deg, #1b4332 33%, white 33%, white 66%, #1b4332 66%); border-radius: 4px;"></div>
                                <div style="height: 60px; background: linear-gradient(45deg, #1b4332 25%, white 25%, white 50%, #1b4332 50%, #1b4332 75%, white 75%); border-radius: 4px;"></div>
                                <div style="height: 60px; background: repeating-linear-gradient(45deg, #1b4332, #1b4332 5px, white 5px, white 10px); border-radius: 4px;"></div>
                            </div>
                        </div>
                        
                        <p><strong>Question:</strong> What fraction of the 6th pattern should be dark? Enter your answer as a simplified fraction.</p>
                    </div>
                    
                    <div class="puzzle-workspace">
                        <h3>Your Solution</h3>
                        <p>Analyze the pattern progression:</p>
                        <div class="code-input" contenteditable="true" id="code1"></div>
                        <button class="btn-primary" style="margin-top: 10px; width: 100%;" onclick="checkAnswer(1, '3/8')">Submit Answer</button>
                    </div>
                </div>
                
                <div class="hint-card">
                    <h4>üí° Need a hint?</h4>
                    <div class="hint-reveal" onclick="revealHint(1)">Reveal Hint</div>
                    <div class="hint-content" id="hint1">
                        Look at the fraction of dark area in each pattern: 1, 1/2, 2/3, 3/4, 4/5... What pattern do you see in the numerators and denominators?
                    </div>
                </div>
            </div>

            <!-- Puzzle Room 2: Symmetry Challenge -->
            <div class="puzzle-room" data-room="2">
                <div class="room-header">
                    <div class="room-number">2</div>
                    <h2 class="room-title">The Symmetry Sanctuary</h2>
                    <div class="lock-status lock-locked" id="lock2">
                        üîí LOCKED
                    </div>
                </div>
                
                <div class="puzzle-content">
                    <div class="puzzle-challenge">
                        <h3>The Mirror Puzzle</h3>
                        <p>This tukutuku panel has been damaged in an earthquake. Only half of the pattern remains. Your task is to reconstruct the missing half using your knowledge of symmetry.</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; background: #ddd; padding: 2px; border-radius: 4px; margin: 20px 0;">
                            <!-- Half pattern shown -->
                            <div style="background: #1b4332; aspect-ratio: 1;"></div>
                            <div style="background: #1b4332; aspect-ratio: 1;"></div>
                            <div style="background: white; aspect-ratio: 1;"></div>
                            <div style="background: white; aspect-ratio: 1;"></div>
                            <div style="background: #1b4332; aspect-ratio: 1;"></div>
                            <div style="background: white; aspect-ratio: 1;"></div>
                            <div style="background: white; aspect-ratio: 1;"></div>
                            <div style="background: #1b4332; aspect-ratio: 1;"></div>
                            <!-- Missing half -->
                            <div style="background: #f0f0f0; border: 2px dashed #ccc; aspect-ratio: 1; display: flex; align-items: center; justify-content: center;">?</div>
                            <div style="background: #f0f0f0; border: 2px dashed #ccc; aspect-ratio: 1; display: flex; align-items: center; justify-content: center;">?</div>
                            <div style="background: #f0f0f0; border: 2px dashed #ccc; aspect-ratio: 1; display: flex; align-items: center; justify-content: center;">?</div>
                            <div style="background: #f0f0f0; border: 2px dashed #ccc; aspect-ratio: 1; display: flex; align-items: center; justify-content: center;">?</div>
                            <div style="background: #f0f0f0; border: 2px dashed #ccc; aspect-ratio: 1; display: flex; align-items: center; justify-content: center;">?</div>
                            <div style="background: #f0f0f0; border: 2px dashed #ccc; aspect-ratio: 1; display: flex; align-items: center; justify-content: center;">?</div>
                            <div style="background: #f0f0f0; border: 2px dashed #ccc; aspect-ratio: 1; display: flex; align-items: center; justify-content: center;">?</div>
                            <div style="background: #f0f0f0; border: 2px dashed #ccc; aspect-ratio: 1; display: flex; align-items: center; justify-content: center;">?</div>
                        </div>
                        
                        <p><strong>Question:</strong> How many lines of symmetry does the completed pattern have? Enter the number.</p>
                    </div>
                    
                    <div class="puzzle-workspace">
                        <h3>Your Solution</h3>
                        <p>Count the lines of symmetry:</p>
                        <div class="code-input" contenteditable="true" id="code2"></div>
                        <button class="btn-primary" style="margin-top: 10px; width: 100%;" onclick="checkAnswer(2, '2')">Submit Answer</button>
                    </div>
                </div>
                
                <div class="hint-card">
                    <h4>üí° Need a hint?</h4>
                    <div class="hint-reveal" onclick="revealHint(2)">Reveal Hint</div>
                    <div class="hint-content" id="hint2">
                        The pattern has both horizontal and vertical symmetry. Think about how many different ways you could fold the pattern and have it match perfectly.
                    </div>
                </div>
            </div>

            <!-- Puzzle Room 3: Algebra Challenge -->
            <div class="puzzle-room" data-room="3">
                <div class="room-header">
                    <div class="room-number">3</div>
                    <h2 class="room-title">The Algebra Antechamber</h2>
                    <div class="lock-status lock-locked" id="lock3">
                        üîí LOCKED
                    </div>
                </div>
                
                <div class="puzzle-content">
                    <div class="puzzle-challenge">
                        <h3>The Weaver's Equation</h3>
                        <p>A master weaver creates patterns using algebraic rules. This panel shows the relationship between pattern number (n) and the number of weaving elements (E).</p>
                        
                        <div style="background: white; padding: 20px; border-radius: 8px; border: 2px solid var(--color-primary); margin: 20px 0;">
                            <h4>Pattern Data:</h4>
                            <ul>
                                <li>Pattern 1: 5 elements</li>
                                <li>Pattern 2: 8 elements</li>
                                <li>Pattern 3: 11 elements</li>
                                <li>Pattern 4: 14 elements</li>
                            </ul>
                        </div>
                        
                        <p><strong>Question:</strong> What is the algebraic rule connecting pattern number to elements? Enter in the form "E = an + b"</p>
                    </div>
                    
                    <div class="puzzle-workspace">
                        <h3>Your Solution</h3>
                        <p>Find the algebraic rule:</p>
                        <div class="code-input" contenteditable="true" id="code3"></div>
                        <button class="btn-primary" style="margin-top: 10px; width: 100%;" onclick="checkAnswer(3, 'E = 3n + 2')">Submit Answer</button>
                    </div>
                </div>
                
                <div class="hint-card">
                    <h4>üí° Need a hint?</h4>
                    <div class="hint-reveal" onclick="revealHint(3)">Reveal Hint</div>
                    <div class="hint-content" id="hint3">
                        Look at how many elements are added each time. This is the coefficient (a). Then find what you need to add or subtract to make the first pattern work.
                    </div>
                </div>
            </div>

            <!-- Puzzle Room 4: Coordinate Challenge -->
            <div class="puzzle-room" data-room="4">
                <div class="room-header">
                    <div class="room-number">4</div>
                    <h2 class="room-title">The Coordinate Chamber</h2>
                    <div class="lock-status lock-locked" id="lock4">
                        üîí LOCKED
                    </div>
                </div>
                
                <div class="puzzle-content">
                    <div class="puzzle-challenge">
                        <h3>The Hidden Message</h3>
                        <p>This tukutuku panel contains a hidden message encoded in coordinate points. Each point represents a letter when plotted on a grid.</p>
                        
                        <div style="background: white; padding: 20px; border-radius: 8px; border: 2px solid var(--color-primary); margin: 20px 0;">
                            <h4>Coordinate Points:</h4>
                            <p>(2, 8) (1, 5) (1, 1) (8, 9) (1, 5)</p>
                            <p><strong>Hint:</strong> A=1, B=2, C=3, etc. The first number is the letter, the second confirms it.</p>
                        </div>
                        
                        <p><strong>Question:</strong> What is the hidden word? Enter your answer.</p>
                    </div>
                    
                    <div class="puzzle-workspace">
                        <h3>Your Solution</h3>
                        <p>Decode the message:</p>
                        <div class="code-input" contenteditable="true" id="code4"></div>
                        <button class="btn-primary" style="margin-top: 10px; width: 100%;" onclick="checkAnswer(4, 'KAITIAKI')">Submit Answer</button>
                    </div>
                </div>
                
                <div class="hint-card">
                    <h4>üí° Need a hint?</h4>
                    <div class="hint-reveal" onclick="revealHint(4)">Reveal Hint</div>
                    <div class="hint-content" id="hint4">
                        Use the first number of each coordinate to find the letter: 2=B, 1=A, 1=A, 8=H, 1=A. What does BAAHA mean? Try the MƒÅori spelling!
                    </div>
                </div>
            </div>

            <!-- Puzzle Room 5: Final Challenge -->
            <div class="puzzle-room" data-room="5">
                <div class="room-header">
                    <div class="room-number">5</div>
                    <h2 class="room-title">The Final Chamber</h2>
                    <div class="lock-status lock-locked" id="lock5">
                        üîí LOCKED
                    </div>
                </div>
                
                <div class="puzzle-content">
                    <div class="puzzle-challenge">
                        <h3>The Master Pattern</h3>
                        <p>The final chamber contains the master tukutuku pattern. To unlock it, you must combine all the knowledge you've gained.</p>
                        
                        <div style="background: white; padding: 20px; border-radius: 8px; border: 2px solid var(--color-primary); margin: 20px 0;">
                            <h4>Combined Clues:</h4>
                            <ul>
                                <li>From Room 1: The fraction 3/8</li>
                                <li>From Room 2: The number 2</li>
                                <li>From Room 3: The rule E = 3n + 2</li>
                                <li>From Room 4: The word KAITIAKI</li>
                            </ul>
                        </div>
                        
                        <p><strong>Question:</strong> What is the final code? Use the first letter of each answer in order.</p>
                    </div>
                    
                    <div class="puzzle-workspace">
                        <h3>Your Solution</h3>
                        <p>Combine all clues:</p>
                        <div class="code-input" contenteditable="true" id="code5"></div>
                        <button class="btn-primary" style="margin-top: 10px; width: 100%;" onclick="checkAnswer(5, 'T3EK')">Submit Answer</button>
                    </div>
                </div>
                
                <div class="hint-card">
                    <h4>üí° Need a hint?</h4>
                    <div class="hint-reveal" onclick="revealHint(5)">Reveal Hint</div>
                    <div class="hint-content" id="hint5">
                        First letters: T (from Three/8), 3 (from Two), E (from E=3n+2), K (from Kaitiaki). Combine them: T3EK
                    </div>
                </div>
            </div>

            <!-- Final Challenge -->
            <div class="final-challenge" id="finalChallenge">
                <h2>üéâ Congratulations! You've Escaped!</h2>
                <p>You've successfully unlocked all the tukutuku puzzles and discovered the ancient wisdom of the weavers.</p>
                <button class="btn-accent" style="margin-top: 20px;" onclick="showCertificate()">View Your Certificate</button>
            </div>

            <!-- Certificate -->
            <div class="certificate" id="certificate">
                <h2>üèÜ Tukutuku Escape Room Master</h2>
                <p>This certifies that</p>
                <div style="font-size: 1.5rem; font-weight: 700; margin: 20px 0; border-bottom: 2px solid var(--color-accent); padding-bottom: 10px;">
                    _________________________
                </div>
                <p>has successfully solved all the tukutuku puzzles and demonstrated mastery of:</p>
                <ul style="text-align: left; max-width: 400px; margin: 20px auto;">
                    <li>Pattern recognition and analysis</li>
                    <li>Symmetry and geometric reasoning</li>
                    <li>Algebraic thinking</li>
                    <li>Coordinate geometry</li>
                    <li>Problem-solving and critical thinking</li>
                </ul>
                <p style="margin-top: 30px;">Completed on: _________________</p>
            </div>
        </div>

        <!-- Teacher Notes -->
        <section class="assessment-section">
            <h2>üë©‚Äçüè´ Teacher Implementation Notes</h2>
            <div class="assessment-grid">
                <div class="assessment-item">
                    <h4>Setup Instructions</h4>
                    <ul>
                        <li>Print one handout per student or group</li>
                        <li>Set a 45-minute timer for the challenge</li>
                        <li>Optional: Play atmospheric music to enhance immersion</li>
                        <li>Prepare small prizes for successful completion</li>
                    </ul>
                </div>
                <div class="assessment-item">
                    <h4>Differentiation Strategies</h4>
                    <ul>
                        <li>For support: Provide hints earlier or work in pairs</li>
                        <li>For extension: Add time pressure or require written explanations</li>
                        <li>For ELL students: Provide visual vocabulary supports</li>
                        <li>For accessibility: Allow oral responses instead of written</li>
                    </ul>
                </div>
                <div class="assessment-item">
                    <h4>Assessment Opportunities</h4>
                    <ul>
                        <li>Observe problem-solving strategies</li>
                        <li>Note mathematical vocabulary usage</li>
                        <li>Assess collaboration skills (if working in groups)</li>
                        <li>Evaluate persistence and resilience</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <!-- Include Footer Component -->
    <div id="footer-component"></div>

    <!-- JavaScript -->
    <script src="/js/header-dropdowns.js"></script>
    <script>
        let puzzlesSolved = 0;
        let timeRemaining = 45 * 60; // 45 minutes in seconds
        
        // Timer functionality
        function updateTimer() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeRemaining > 0) {
                timeRemaining--;
                setTimeout(updateTimer, 1000);
            } else {
                alert('Time\'s up! The tukutuku secrets remain hidden...');
            }
        }
        
        // Check answer function
        function checkAnswer(roomNumber, correctAnswer) {
            const userAnswer = document.getElementById(`code${roomNumber}`).textContent.trim().toUpperCase();
            const lockElement = document.getElementById(`lock${roomNumber}`);
            
            if (userAnswer === correctAnswer.toUpperCase()) {
                // Correct answer
                lockElement.className = 'lock-status lock-unlocked';
                lockElement.innerHTML = 'üîì UNLOCKED';
                puzzlesSolved++;
                updateProgress();
                
                // Show success message
                const roomElement = document.querySelector(`[data-room="${roomNumber}"]`);
                roomElement.style.background = 'linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%)';
                
                // Check if all puzzles are solved
                if (puzzlesSolved === 5) {
                    setTimeout(showFinalChallenge, 1000);
                }
            } else {
                // Incorrect answer
                lockElement.style.background = '#ffcccc';
                setTimeout(() => {
                    lockElement.style.background = '';
                }, 1000);
            }
        }
        
        // Update progress bar
        function updateProgress() {
            const progressPercent = (puzzlesSolved / 5) * 100;
            document.getElementById('progressBar').style.width = `${progressPercent}%`;
            document.getElementById('puzzlesSolved').textContent = puzzlesSolved;
        }
        
        // Reveal hint function
        function revealHint(roomNumber) {
            const hintContent = document.getElementById(`hint${roomNumber}`);
            hintContent.style.display = hintContent.style.display === 'block' ? 'none' : 'block';
        }
        
        // Show final challenge
        function showFinalChallenge() {
            document.getElementById('finalChallenge').style.display = 'block';
            window.scrollTo({
                top: document.getElementById('finalChallenge').offsetTop,
                behavior: 'smooth'
            });
        }
        
        // Show certificate
        function showCertificate() {
            document.getElementById('certificate').style.display = 'block';
            window.print();
        }
        
        // Initialize timer when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateTimer();
        });
        
        // Load header and footer components
        fetch('/components/header.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('header-component').innerHTML = html;
            })
            .catch(error => console.error('Error loading header:', error));

        fetch('/components/footer.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('footer-component').innerHTML = html;
            })
            .catch(error => console.error('Error loading footer:', error));
    </script>
</body>
</html>
