<!DOCTYPE html>
<html lang="en">
<head>
    <title>Complete Teaching Variants Browser | Te Kete Ako</title>

<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>



<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Browse all 7,072+ teaching resources with intelligent variant selection - active, legacy CSS, backups, and archives">

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ‚≠ê PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link rel="stylesheet" href="/css/professionalization-system.css">

<!-- ‚≠ê THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link rel="stylesheet" href="/css/te-kete-professional.css"/>
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"/>

<!-- ‚≠ê COMPONENT STYLES -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/navigation-standard.css">
    <link rel="stylesheet" href="/css/mobile-revolution.css">
    <link rel="stylesheet" href="/css/mobile-first-classroom-tablets.css"/>

<!-- ‚≠ê PRINT STYLES (media="print" = only for printing) -->
    <link rel="stylesheet" href="/css/print.css" media="print"/>
<link rel="stylesheet" href="/css/print-professional.css" media="print"/>

<!-- ‚≠ê TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link rel="stylesheet" href="/css/tailwind.css">

<!-- ‚≠ê CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link rel="stylesheet" href="/css/cascade-fix.css">
<body class="pattern-koru-subtle">

    <div id="nav-container"></div>
    <script>
        fetch('/components/navigation-standard.html')
            .then(r => r.text())
            .then(html => document.getElementById('nav-container').innerHTML = html);
    </script>

    <main style="margin: 2rem auto; padding: 0 2rem;">
        
        <!-- Hero Section -->
        <header style="color: white; padding: 4rem 3rem; border-radius: 20px; margin-bottom: 3rem; ">
            <div class="p-2" style="background: rgba(255,255,255,0.2); padding: 0.5rem 1.5rem; border-radius: 24px; "
                <span style="font-size: 0.95rem;">üß† GraphRAG-Powered Intelligence</span>
            </div>
            <h1 style="font-size: 4rem; margin-bottom: 1.5rem; font-weight: 900;">
                üéØ Complete Teaching Variants Browser
            </h1>
            <p style="font-size: 1.6rem; opacity: 0.95; margin-left: auto; margin-right: auto;">
                Access <strong id="total-count" style="color: #fbbf24;">7,072+</strong> teaching resources across active, legacy, and backup variants
            </p>
            <p style="opacity: 0.85;">
                üåø <span id="cultural-count">1,702</span> unique topics ‚Ä¢ 
                ‚≠ê Quality filtered ‚Ä¢ 
                üîç Smart search
            </p>
        </header>

        <!-- Advanced Filters -->
        <section style="padding: 2.5rem; ">
            <h2 style="font-size: 2rem; ">
                üîç Intelligent Filtering
            </h2>
            
            <div style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; ">
                <!-- Variant Location -->
                <div>
                    <label for="filter-location" style="color: #374151; ">
                        üìÇ Variant Location
                    </label>
                    <select id="filter-location" aria-label="Filter by variant location" >
                        <option value="">All Locations</option>
                        <option value="active">üü¢ Active Site (/public/)</option>
                        <option value="css_backup">üé® CSS Migration Backup (Q92 avg)</option>
                        <option value="general_backup">üì¶ General Backup</option>
                        <option value="dist">üìä Dist Folder</option>
                        <option value="archive">üìö Archive</option>
                        <option value="alpha">‚≠ê Alpha Collection (Q90+)</option>
                    </select>
                </div>

                <!-- Subject -->
                <div>
                    <label for="filter-subject" style="color: #374151; ">
                        üìö Subject
                    </label>
                    <select id="filter-subject" aria-label="Filter by subject" >
                        <option value="">All Subjects</option>
                        <option value="Mathematics">Mathematics</option>
                        <option value="Science">Science</option>
                        <option value="English">English</option>
                        <option value="Social Studies">Social Studies</option>
                        <option value="Digital Technologies">Digital Technologies</option>
                        <option value="Te Ao MƒÅori">Te Ao MƒÅori</option>
                        <option value="Arts">Arts</option>
                        <option value="Health & PE">Health & PE</option>
                        <option value="Cross-Curricular">Cross-Curricular</option>
                    </select>
                </div>

                <!-- Resource Type -->
                <div>
                    <label for="filter-type" style="color: #374151; ">
                        üìÑ Type
                    </label>
                    <select id="filter-type" aria-label="Filter by resource type" >
                        <option value="">All Types</option>
                        <option value="Lesson">üìö Lessons</option>
                        <option value="Handout">üìÑ Handouts</option>
                        <option value="Unit">üìñ Units</option>
                        <option value="Interactive">üéÆ Interactives</option>
                    </select>
                </div>

                <!-- Quality -->
                <div>
                    <label for="filter-quality" style="color: #374151; ">
                        ‚≠ê Minimum Quality
                    </label>
                    <select id="filter-quality" aria-label="Filter by minimum quality score" >
                        <option value="75">75+ (All Teaching Variants)</option>
                        <option value="85">85+ (High Quality)</option>
                        <option value="90">90+ (Excellence)</option>
                        <option value="95">95+ (Gold Standard)</option>
                    </select>
                </div>

                <!-- Cultural Integration -->
                <div>
                    <label for="filter-cultural" style="color: #374151; ">
                        üåø Cultural Integration
                    </label>
                    <select id="filter-cultural" aria-label="Filter by cultural integration level" >
                        <option value="">All Levels</option>
                        <option value="dual">üåøüåø Dual (Te Reo + Whakataukƒ´) - +12.2 Quality!</option>
                        <option value="te_reo">üó£Ô∏è Te Reo MƒÅori</option>
                        <option value="whakatauki">üåø Whakataukƒ´</option>
                        <option value="none">Basic (No Cultural Elements)</option>
                    </select>
                </div>

                <!-- Year Level -->
                <div>
                    <label for="filter-year" style="color: #374151; ">
                        üéì Year Level
                    </label>
                    <select id="filter-year" aria-label="Filter by year level" >
                        <option value="">All Years</option>
                        <option value="Year 7">Year 7</option>
                        <option value="Year 8">Year 8</option>
                        <option value="Year 9">Year 9</option>
                        <option value="Year 10">Year 10</option>
                        <option value="Year 11-13">Years 11-13</option>
                        <option value="All Years">All Years</option>
                    </select>
                </div>
            </div>

            <!-- Search Bar -->
            <div style="margin: 2rem 0;">
                <label style="color: #374151; ">
                    üîç Search Lessons
                </label>
                <input 
                    type="text" 
                    id="search-box" 
                    placeholder="e.g., algebra, ecosystem, digital kaitiakitanga, whakataukƒ´..." />
            </div>

            <!-- Action Buttons -->
            <div style="gap: 1rem; justify-content: center; margin-top: 2rem;">
                <button id="apply-filters" onclick="findTeachingOptions()" style="color: white; padding: 1.25rem 3rem; border: none; cursor: pointer; ">
                    üéØ Find Teaching Options
                </button>
                <button id="clear-filters" onclick="clearFilters()" style="background: #6b7280; color: white; padding: 1.25rem 2rem; border: none; cursor: pointer;">
                    Clear All
                </button>
            </div>

            <!-- GraphRAG Intelligence Notice -->
            <div style="margin-top: 1.5rem; ">
                <p style="color: #92400e; font-size: 0.95rem;">
                    üß† <strong>GraphRAG Intelligence:</strong> Cultural integration boosts quality by +12.2 points for Mathematics, +7.9 for Cross-Curricular!
                    Teaching variants with choice = +7.6 quality boost on average.
                </p>
            </div>
        </section>

        <!-- Results Section -->
        <section id="results-section" style="margin: 3rem 0;">
            <div style="justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="font-size: 1.75rem;">
                        üìã Results
                        <span id="results-count" style="color: #6b7280; font-weight: normal;"></span>
                    </h2>
                </div>
                <div>
                    <label for="sort-by" style="color: #374151; ">
                        üìä Sort By
                    </label>
                    <select id="sort-by" aria-label="Sort results by" onchange="sortResults()" class="p-3" style="padding: 0.75rem 1rem; "
                        <option value="quality">Sort by Quality</option>
                        <option value="title">Sort by Title</option>
                        <option value="subject">Sort by Subject</option>
                        <option value="year">Sort by Year</option>
                    </select>
                </div>
                <div>
                    <span id="loading-indicator" style="display: none; color: #6b7280;">
                        <span style="animation: spin 1s linear infinite; ">‚è≥</span> Loading...
                    </span>
                </div>
            </div>

            <div id="results-container" style="gap: 1.5rem;">
                <div style="padding: 6rem 2rem; color: #6b7280;">
                    <div style="font-size: 4rem; ">üéØ</div>
                    <h3 style="font-size: 1.8rem; color: #374151; ">Ready to Find Perfect Teaching Resources</h3>
                    <p class="m-0 mx-auto" Use the filters above to narrow down from <strong>7,072+ teaching variants</strong>.
                        Each resource has been enriched differently for maximum pedagogical choice!
                    </p>
                </div>
            </div>
        </section>

        <!-- Teaching Variants Philosophy -->
        <section style="margin: 4rem 0; padding: 3rem; ">
            <h2 style="font-size: 2.5rem; ">
                üß† The Intelligence of Teaching Variants
            </h2>
            <div style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <div >
                    <h3 style="color: #92400e; font-size: 1.5rem; ">üìä +7.6 Quality Boost</h3>
                    <p style="color: #78350f; line-">
                        Resources with teaching variants score <strong>92.3 vs 84.7</strong> for single versions.
                        Teacher choice = higher quality!
                    </p>
                </div>
                <div >
                    <h3 style="color: #166534; font-size: 1.5rem; ">üåø +12.2 Cultural Impact</h3>
                    <p style="color: #14532d; line-">
                        Mathematics with dual cultural integration (te reo + whakataukƒ´) scores 
                        <strong>88.1 vs 76.0</strong> without!
                    </p>
                </div>
                <div >
                    <h3 style="color: #1e40af; font-size: 1.5rem; ">üéØ Smart Synthesis</h3>
                    <p style="color: #1e3a8a; line-">
                        Max 3 variants per topic, quality-filtered (75+ minimum).
                        70% duplication reduction while preserving choice!
                    </p>
                </div>
            </div>
        </section>

    </main>

    <div id="footer-container"></div>
    <script>
        fetch('/components/footer.html').then(r=>r.text()).then(html=>{
            document.getElementById('footer-container').innerHTML=html;
        });
    </script>

    <script>
        // Initialize Supabase
        const SUPABASE_URL = 'https://nlgldaqtubrlcqddppbq.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwODkzMzksImV4cCI6MjA2ODY2NTMzOX0.IFaWqep1MBSofARiCUuzvAReC44hwGnmKOMNSd55nIM';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        let currentResults = [];

        // Load totals on page load
        async function loadTotals() {
            try {
                const { count } = await supabase
                    .from('graphrag_resources')
                    .select('*', { count: 'exact', head: true })
                    .in('resource_type', ['Lesson', 'Handout', 'Unit-Plan', 'Unit Plan', 'Interactive', 'Page'])
                    .gte('quality_score', 75);
                
                document.getElementById('total-count').textContent = (count || 7072).toLocaleString() + '+';
            } catch (e) {
                // Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('error', {
        message: '$2',
        details: $3,
        url: window.location.pathname
    });
        }
        // Show user-friendly message instead of error
        }
        }

        // Main search and filter function
        async function findTeachingOptions() {
            const location = document.getElementById('filter-location').value;
            const subject = document.getElementById('filter-subject').value;
            const type = document.getElementById('filter-type').value;
            const quality = parseInt(document.getElementById('filter-quality').value) || 75;
            const cultural = document.getElementById('filter-cultural').value;
            const yearLevel = document.getElementById('filter-year').value;
            const searchText = document.getElementById('search-box').value;

            document.getElementById('loading-indicator').style.display = 'inline-block';

            try {
                let query = supabase
                    .from('graphrag_resources')
                    .select('file_path, title, resource_type, canonical_subject, quality_score, year_level, has_te_reo, has_whakataukƒ´, metadata')
                    .in('resource_type', ['Lesson', 'Handout', 'Unit-Plan', 'Unit Plan', 'Interactive', 'Page'])
                    .gte('quality_score', quality);

                // Location filter
                if (location === 'active') {
                    query = query.like('file_path', '/public/%').not('file_path', 'like', '%backup%').not('file_path', 'like', '%archive%');
                } else if (location === 'css_backup') {
                    query = query.like('file_path', '%backup_before_css_migration%');
                } else if (location === 'general_backup') {
                    query = query.like('file_path', '%backup%').not('file_path', 'like', '%backup_before_css_migration%');
                } else if (location === 'dist') {
                    query = query.like('file_path', '%/dist/%');
                } else if (location === 'archive') {
                    query = query.like('file_path', '%archive%');
                } else if (location === 'alpha') {
                    query = query.like('file_path', '%generated-resources-alpha%');
                }

                // Subject filter
                if (subject) {
                    query = query.eq('canonical_subject', subject);
                }

                // Type filter
                if (type) {
                    if (type === 'Unit') {
                        query = query.in('resource_type', ['Unit-Plan', 'Unit Plan']);
                    } else {
                        query = query.eq('resource_type', type);
                    }
                }

                // Cultural filter
                if (cultural === 'dual') {
                    query = query.eq('has_te_reo', true).eq('has_whakataukƒ´', true);
                } else if (cultural === 'te_reo') {
                    query = query.eq('has_te_reo', true);
                } else if (cultural === 'whakatauki') {
                    query = query.eq('has_whakataukƒ´', true);
                } else if (cultural === 'none') {
                    query = query.eq('has_te_reo', false).eq('has_whakataukƒ´', false);
                }

                // Year level filter
                if (yearLevel) {
                    query = query.ilike('year_level', `%${yearLevel}%`);
                }

                // Search filter
                if (searchText) {
                    query = query.ilike('title', `%${searchText}%`);
                }

                // Order and limit
                query = query.order('quality_score', { ascending: false }).limit(200);

                const { data, error } = await query;

                document.getElementById('loading-indicator').style.display = 'none';

                if (error) {
                    // Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('error', {
        message: '$2',
        details: $3,
        url: window.location.pathname
    });
        }
        // Show user-friendly message instead of error
        showError('Failed to load resources. Check console for details.');
                    return;
                }

                currentResults = data || [];
                displayResults(currentResults);

            } catch (e) {
                document.getElementById('loading-indicator').style.display = 'none';
                // Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('error', {
        message: '$2',
        details: $3,
        url: window.location.pathname
    });
        }
        // Show user-friendly message instead of error
        showError('Search failed. Please try again.');
            }
        }

        // Display results with rich variant information
        function displayResults(resources) {
            const container = document.getElementById('results-container');
            const countSpan = document.getElementById('results-count');

            if (!resources || resources.length === 0) {
                container.innerHTML = `
                    <div style="padding: 4rem 2rem; ">
                        <div style="font-size: 4rem; ">üîç</div>
                        <h3 style="font-size: 1.5rem; color: #374151; ">No variants found</h3>
                        <p style="color: #6b7280;">Try adjusting your filters or broadening your search</p>
                    </div>
                `;
                countSpan.textContent = '(0 results)';
                return;
            }

            countSpan.textContent = `(${resources.length} results)`;

            container.innerHTML = resources.map(r => {
                const isActive = r.file_path.includes('/public/') && !r.file_path.includes('backup') && !r.file_path.includes('archive');
                const isBackup = r.file_path.includes('backup');
                const isArchive = r.file_path.includes('archive');
                const isAlpha = r.file_path.includes('generated-resources-alpha');
                const isDist = r.file_path.includes('/dist/');

                let locationBadge = '';
                let locationColor = '#6b7280';
                let locationBg = '#f3f4f6';

                if (isActive && !isAlpha && !isDist) {
                    locationBadge = 'üü¢ Active Site';
                    locationColor = '#10b981';
                    locationBg = '#d1fae5';
                } else if (isAlpha) {
                    locationBadge = '‚≠ê Alpha Collection';
                    locationColor = '#f59e0b';
                    locationBg = '#fef3c7';
                } else if (r.file_path.includes('backup_before_css_migration')) {
                    locationBadge = 'üé® CSS Backup (Q92)';
                    locationColor = '#a855f7';
                    locationBg = '#faf5ff';
                } else if (isBackup) {
                    locationBadge = 'üì¶ Backup Variant';
                    locationColor = '#3b82f6';
                    locationBg = '#dbeafe';
                } else if (isDist) {
                    locationBadge = 'üìä Dist Folder';
                    locationColor = '#6366f1';
                    locationBg = '#eef2ff';
                } else if (isArchive) {
                    locationBadge = 'üìö Archive';
                    locationColor = '#8b5cf6';
                    locationBg = '#f3e8ff';
                }

                const hasDualCultural = r.has_te_reo && r.has_whakataukƒ´;
                const culturalBadge = hasDualCultural 
                    ? '<span style="background: #059669; color: white; padding: 0.3rem 0.8rem; font-size: 0.75rem; ">üåøüåø Dual Cultural (+12pt boost!)</span>'
                    : (r.has_te_reo 
                        ? '<span style="background: #10b981; color: white; padding: 0.3rem 0.8rem; font-size: 0.75rem; ">üó£Ô∏è Te Reo</span>'
                        : (r.has_whakataukƒ´
                            ? '<span style="background: #14b8a6; color: white; padding: 0.3rem 0.8rem; font-size: 0.75rem; ">üåø Whakataukƒ´</span>'
                            : '<span style="background: #e5e7eb; color: #6b7280; padding: 0.3rem 0.8rem; font-size: 0.75rem;">Basic</span>'
                        )
                    );

                const qualityColor = r.quality_score >= 95 ? '#dc2626' : (r.quality_score >= 90 ? '#f59e0b' : (r.quality_score >= 85 ? '#10b981' : '#6b7280'));

                return `
                    <div style="border-left: 6px solid ${locationColor}; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.12)';" onmouseout="this.style.transform=''; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.08)';">
                        
                        <!-- Header -->
                        <div style="justify-content: space-between; align-items: start; margin-bottom: 1.5rem;">
                            <div style="flex: 1;">
                                <h3 class="m-0" style="margin: 0 0 0.75rem 0; line-"
                                    ${r.title || 'Untitled Resource'}
                                </h3>
                                <div style="gap: 0.75rem; flex-wrap: wrap; align-items: center;">
                                    <span style="background: ${locationBg}; color: ${locationColor}; padding: 0.3rem 0.8rem; font-size: 0.75rem; ">
                                        ${locationBadge}
                                    </span>
                                    ${culturalBadge}
                                    <span style="background: #f3f4f6; color: #374151; padding: 0.3rem 0.8rem; font-size: 0.75rem; ">
                                        ${r.resource_type || 'Resource'}
                                    </span>
                                    <span style="background: ${qualityColor}; color: white; padding: 0.3rem 0.8rem; font-size: 0.75rem; ">
                                        ‚≠ê Q${r.quality_score || '?'}
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Details Grid -->
                        <div style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin: 1.5rem 0; padding: 1.25rem; background: #f9fafb; border-radius: 10px;">
                            <div>
                                <div style="font-size: 0.75rem; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.25rem;">Subject</div>
                                <div style="font-size: 0.95rem;">${r.canonical_subject || 'General'}</div>
                            </div>
                            <div>
                                <div style="font-size: 0.75rem; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.25rem;">Year Level</div>
                                <div style="font-size: 0.95rem;">${r.year_level || 'All Years'}</div>
                            </div>
                            <div>
                                <div style="font-size: 0.75rem; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.25rem;">Cultural</div>
                                <div style="font-size: 0.95rem;">
                                    ${hasDualCultural ? 'üåøüåø Dual' : (r.has_te_reo ? 'üó£Ô∏è Te Reo' : (r.has_whakataukƒ´ ? 'üåø Whakataukƒ´' : '‚Äî'))}
                                </div>
                            </div>
                        </div>

                        <!-- Path -->
                        <div style="background: #f8fafc; ">
                            <div style="font-size: 0.7rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.25rem;">File Path</div>
                            <code style="color: #475569; word-break: break-all;">${r.file_path}</code>
                        </div>

                        <!-- Actions -->
                        <div style="grid-template-columns: 2fr 1fr 1fr; gap: 1rem; margin-top: 1.5rem;">
                            <a href="${r.file_path.replace('./public', '').replace('/public', '')}" 
                               target="_blank"
                               style="color: white; border-radius: 10px; text-decoration: none; transition: all 0.3s;"
                               onmouseover="this.style.opacity='0.9';"
                               onmouseout="this.style.opacity='1';">
                                üìñ Open Resource
                            </a>
                            <button onclick="findSimilarVariants('${(r.title || '').split('(')[0].trim().replace(/'/g, "\\'")}')" 
                                    style="background: #f59e0b; color: white; border: none; border-radius: 10px; cursor: pointer; ">
                                üîç Similar
                            </button>
                            <button onclick="showVariantInfo('${r.file_path.replace(/'/g, "\\'")}')" 
                                    style="background: #6366f1; color: white; border: none; border-radius: 10px; cursor: pointer; ">
                                ‚ÑπÔ∏è Info
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('results-count').textContent = `(${resources.length} results shown)`;

        } catch (e) {
            document.getElementById('loading-indicator').style.display = 'none';
            // Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('error', {
        message: '$2',
        details: $3,
        url: window.location.pathname
    });
        }
        // Show user-friendly message instead of error
        showError('Failed to display results');
        }
    }

    // Find similar variants of the same base lesson
    async function findSimilarVariants(baseTitle) {
        if (!baseTitle) return;
        
        try {
            const { data } = await supabase
                .from('graphrag_resources')
                .select('*')
                .ilike('title', `%${baseTitle}%`)
                .gte('quality_score', 75)
                .limit(50);

            if (data && data.length > 1) {
                currentResults = data;
                displayResults(data);
                document.getElementById('results-count').textContent = `(${data.length} variants of "${baseTitle}")`;
                window.scrollTo({ top: document.getElementById('results-section').offsetTop - 100, behavior: 'smooth' });
            }
        } catch (e) {
            // Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('error', {
        message: '$2',
        details: $3,
        url: window.location.pathname
    });
        }
        // Show user-friendly message instead of error
        }
    }

    // Show detailed variant information
    function showVariantInfo(filePath) {
        alert(`Variant Location:\n${filePath}\n\nThis resource is one of multiple teaching variants. Different versions offer:\n‚Ä¢ Different CSS styling systems\n‚Ä¢ Different cultural integration levels\n‚Ä¢ Different time allocations\n‚Ä¢ Different pedagogical approaches\n\nChoose the variant that best fits your teaching context!`);
    }

    // Clear all filters
    function clearFilters() {
        document.getElementById('filter-location').value = '';
        document.getElementById('filter-subject').value = '';
        document.getElementById('filter-type').value = '';
        document.getElementById('filter-quality').value = '75';
        document.getElementById('filter-cultural').value = '';
        document.getElementById('filter-year').value = '';
        document.getElementById('search-box').value = '';
        
        document.getElementById('results-container').innerHTML = `
            <div style="padding: 6rem 2rem; color: #6b7280;">
                <div style="font-size: 4rem; ">‚ú®</div>
                <h3 style="font-size: 1.5rem; color: #374151;">Filters Cleared!</h3>
                <p >Click "Find Teaching Options" to browse all 7,072+ variants</p>
            </div>
        `;
        document.getElementById('results-count').textContent = '';
    }

    // Sort results
    function sortResults() {
        const sortBy = document.getElementById('sort-by').value;
        
        if (sortBy === 'quality') {
            currentResults.sort((a, b) => (b.quality_score || 0) - (a.quality_score || 0));
        } else if (sortBy === 'title') {
            currentResults.sort((a, b) => (a.title || '').localeCompare(b.title || ''));
        } else if (sortBy === 'subject') {
            currentResults.sort((a, b) => (a.canonical_subject || '').localeCompare(b.canonical_subject || ''));
        } else if (sortBy === 'year') {
            currentResults.sort((a, b) => (a.year_level || '').localeCompare(b.year_level || ''));
        }
        
        displayResults(currentResults);
    }

    // Show error message
    function showError(message) {
        document.getElementById('results-container').innerHTML = `
            <div style="padding: 4rem 2rem; background: #fef2f2; ">
                <div style="font-size: 3rem; ">‚ö†Ô∏è</div>
                <h3 style="font-size: 1.5rem; color: #dc2626; ">Error</h3>
                <p style="color: #991b1b;">${message}</p>
            </div>
        `;
    }

    // Load totals on page load
    loadTotals();

    // Search on Enter key
    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('search-box').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                findTeachingOptions();
            }
        });
    });
</script>

<style>
    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
</style>

<script src="/js/posthog-analytics.js" defer></script>

</body>
</html>

