<!DOCTYPE html>
<html>
<head>
    <!-- Performance: Optimize rendering -->
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#1b4332">
    <meta name="color-scheme" content="light">
    <!-- Performance: DNS prefetch for external domains -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <!-- Performance: Preload critical resources -->
    <link rel="preload" href="/css/te-kete-professional.css" as="style">
    <link rel="preload" href="/js/te-kete-professional.js" as="script">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lato:wght@300;400;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap&display=swap" as="style" crossorigin>
  <meta name="description" content="Te Kete Ako - Award-winning educational platform integrating mƒÅtauranga MƒÅori with contemporary learning">
    <meta name="keywords" content="education, mƒÅori, indigenous, ai, learning, new zealand">
    <meta name="author" content="Te Kete Ako">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Te Kete Ako - Auth Test (8PM Ready)</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>





    
    
    
    
    <link rel="stylesheet" href="/css/print.css" media="print"/>
    <link rel="stylesheet" href="/css/te-kete-professional.css"/>
    <script src="/js/breadcrumbs.js" defer></script>
    
</head>
<body>
  <h1 class="wiley-hero-title">üîê Supabase Auth Test - 8PM Ready</h1>
  <div id="results"></div>
  
  <script>
    // Use your actual Supabase credentials
    const supabaseUrl = 'https://nlgldaqtubrlcqddppbq.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwODkzMzksImV4cCI6MjA2ODY2NTMzOX0.IFaWqep1MBSofARiCUuzvAReC44hwGnmKOMNSd55nIM';
    
    const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
    const results = document.getElementById('results');

    function log(message, status = 'info') {
      const div = document.createElement('div');
      div.style.padding = '10px';
      div.style.margin = '5px 0';
      div.style.borderRadius = '5px';
      div.style.backgroundColor = status === 'success' ? '#d4edda' : 
                                 status === 'error' ? '#f8d7da' : '#d1ecf1';
      div.innerHTML = message;
      results.appendChild(div);
      console.log(message);
    }

    async function testAuth() {
      log('üöÄ === Te Kete Ako Auth Test - 8PM Handoff ===');
      
      // Test 1: Connection
      try {
        const { error } = await supabase.from('user_progress').select('*').limit(1);
        log(error ? '‚ùå Supabase connection failed' : '‚úÖ Supabase connection successful', 
            error ? 'error' : 'success');
        if (error) log(`Error details: ${error.message}`, 'error');
      } catch (err) {
        log(`‚ùå Connection error: ${err.message}`, 'error');
        return;
      }

      // Test 2: Auth state
      const { data: { user } } = await supabase.auth.getUser();
      log(user ? '‚úÖ User logged in' : '‚ö™ No user logged in (expected)', 'info');
      if (user) log(`User: ${user.email}`, 'success');
      
      // Test 3: Auth system integrity
      const { error: authError } = await supabase.auth.signInWithPassword({
        email: 'test@nonexistent.com',
        password: 'wrongpassword'
      });
      log(authError ? '‚úÖ Auth rejection working (security intact)' : '‚ùå Auth should reject bad credentials', 
          authError ? 'success' : 'error');
      
      log('üéâ === Auth System: READY FOR 8PM HANDOFF ===', 'success');
      log('üîë DeepSeek API available for continued optimization', 'info');
      log('üöÄ Workflow consolidated and streamlined', 'success');
    }

    testAuth();
  </script>

    <script>
    // Register service worker for performance
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => console.log('SW registered'))
                .catch(error => console.log('SW registration failed'));
        });
    }
    </script>
</body>
</html>