<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Orphaned Excellence | Hidden Gems | Te Kete Ako</title>    <!-- 🎨 ULTIMATE BEAUTY SYSTEM - Te Kete Ako Design Excellence --> <link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"> <script src="https://cdn.tailwindcss.com"></script> <script src="/tailwind.config.ultimate.js"></script> <!-- END ULTIMATE BEAUTY SYSTEM --><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>    <style>        .gem-card {            background: linear-gradient(135deg, #fef3c7, #fde68a);            border-radius: 16px;            padding: 2rem;            margin: 1.5rem 0;            box-shadow: 0 8px 20px rgba(251, 191, 36, 0.3);            border-top: 6px solid #f59e0b;            position: relative;            overflow: hidden;        }        .gem-card::before {            content: '💎';            position: absolute;            top: -20px;            right: -20px;            font-size: 8rem;            opacity: 0.15;        }        .quality-badge {            display: inline-block;            background: linear-gradient(135deg, #10b981, #059669);            color: white;            padding: 0.5rem 1.25rem;            border-radius: 20px;            font-weight: 800;            font-size: 1.1rem;        }        .connection-warning {            background: #fee2e2;            border-left: 4px solid #ef4444;            padding: 1rem 1.5rem;            border-radius: 8px;            margin: 1rem 0;        }    </style><!-- Professional Design System --></head><body class="pattern-koru-subtle">    <!-- Navigation -->    <div id="nav-container"></div>    <script>        fetch('/components/navigation-standard.html')            .then(r => r.text())            .then(html => document.getElementById('nav-container').innerHTML = html);    </script>    <!-- Hero -->    <section style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 4rem 2rem; text-align: center;">        <div style="max-width: 1000px; margin: 0 auto;">            <div style="display: inline-block; background: rgba(255,255,255,0.2); padding: 0.5rem 1.5rem; border-radius: 24px; margin-bottom: 1rem;">                <span style="font-weight: 700; font-size: 0.9rem;">💎 GRAPHRAG DISCOVERY ENGINE</span>            </div>            <h1 style="font-size: 4rem; margin-bottom: 1rem; font-weight: 800;">                Hidden Excellence Collection            </h1>            <p style="font-size: 1.5rem; opacity: 0.95; max-width: 700px; margin: 0 auto 2rem;">                High-quality resources waiting to be discovered            </p>            <div style="background: rgba(255,255,255,0.15); padding: 1.5rem; border-radius: 12px; max-width: 600px; margin: 0 auto;">                <div style="font-size: 2.5rem; font-weight: 800; margin-bottom: 0.5rem;" id="orphan-count">...</div>                <div style="font-size: 1.1rem; opacity: 0.9;">Exceptional resources with fewer than 4 connections</div>            </div>        </div>    </section>    <main style="max-width: 1200px; margin: 3rem auto; padding: 0 2rem;">        <!-- What Makes These Special -->        <section style="background: linear-gradient(135deg, #fef3c7, #fde68a); padding: 3rem 2rem; border-radius: 16px; margin: 3rem 0; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">            <h2 style="font-size: 2.5rem; color: #92400e; text-align: center; margin-bottom: 2rem;">                ✨ What Makes These Resources Special?            </h2>            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; max-width: 900px; margin: 0 auto;">                <div style="text-align: center;">                    <div style="font-size: 3rem; margin-bottom: 1rem;">⭐</div>                    <h3 style="color: #92400e; font-weight: 700; margin-bottom: 0.5rem;">Quality 93-96</h3>                    <p style="color: #78350f;">Top tier content</p>                </div>                <div style="text-align: center;">                    <div style="font-size: 3rem; margin-bottom: 1rem;">🌿</div>                    <h3 style="color: #92400e; font-weight: 700; margin-bottom: 0.5rem;">Cultural Integration</h3>                    <p style="color: #78350f;">Whakataukī & Te Reo</p>                </div>                <div style="text-align: center;">                    <div style="font-size: 3rem; margin-bottom: 1rem;">🎮</div>                    <h3 style="color: #92400e; font-weight: 700; margin-bottom: 0.5rem;">Interactive</h3>                    <p style="color: #78350f;">Games & activities</p>                </div>            </div>        </section>        <!-- Orphaned Gems -->        <section>            <h2 style="font-size: 2.5rem; color: #1a4d2e; text-align: center; margin-bottom: 2rem;">                💎 Discover Hidden Gems            </h2>            <div id="orphaned-gems-container">                <div style="text-align: center; padding: 3rem; color: #64748b;">                    <div style="border: 3px solid #f59e0b; border-top: 3px solid transparent; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>                    <p>Scanning GraphRAG for hidden excellence...</p>                </div>            </div>        </section>        <!-- Why They're Orphaned -->        <section style="background: white; padding: 3rem 2rem; border-radius: 16px; margin: 4rem 0; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">            <h2 style="font-size: 2rem; color: #1a4d2e; margin-bottom: 1.5rem; text-align: center;">                🤔 Why Are These Resources "Orphaned"?            </h2>            <div style="max-width: 800px; margin: 0 auto; line-height: 1.8; color: #64748b;">                <p style="margin-bottom: 1rem;">                    These exceptional resources have <strong>fewer than 4 connections</strong> in our knowledge graph, meaning:                </p>                <ul style="margin-left: 2rem; margin-bottom: 1.5rem;">                    <li>They're not linked from many other resources</li>                    <li>They don't appear in hub pages or navigation</li>                    <li>Students might never discover them through normal browsing</li>                    <li>Their high quality remains hidden from teachers</li>                </ul>                <p style="background: #dbeafe; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #0891b2; color: #0c4a6e; font-weight: 600;">                    💡 This page uses GraphRAG AI to surface these hidden treasures and make them discoverable!                </p>            </div>        </section>    </main>    <!-- Footer -->    <div id="footer-container"></div>    <script>        fetch('/components/footer.html').then(r=>r.text()).then(html=>{            document.getElementById('footer-container').innerHTML=html;        });    </script>    <style>        @keyframes spin {            0% { transform: rotate(0deg); }            100% { transform: rotate(360deg); }        }    </style>    <!-- GraphRAG Orphan Finder -->    <script>        const SUPABASE_URL = 'https://nlgldaqtubrlcqddppbq.supabase.co';        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY5ODgxMTksImV4cCI6MjA1MjU2NDExOX0.gN5RGe7kGmxj4-yI1xnDuCuKUPFDh4f-8CQqQdqrGq0';        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);        async function loadOrphanedGems() {            const container = document.getElementById('orphaned-gems-container');            try {                console.log('🔍 Searching for orphaned excellence...');                // Get high-quality resources                const { data: resources, error } = await supabase                    .from('graphrag_resources')                    .select('*')                    .gte('quality_score', 93)                    .like('file_path', '/public/%')                    .not('file_path', 'like', '%/css/%')                    .not('file_path', 'like', '%/js/%')                    .order('quality_score', { ascending: false })                    .limit(50);                if (error) throw error;                // Get connection counts for each                const orphanPromises = resources.map(async (resource) => {                    const { count } = await supabase                        .from('graphrag_relationships')                        .select('*', { count: 'exact', head: true })                        .eq('source_path', resource.file_path);                    return { ...resource, connections: count || 0 };                });                const resultsWithConnections = await Promise.all(orphanPromises);                const orphans = resultsWithConnections.filter(r => r.connections <= 3);                // Update count                document.getElementById('orphan-count').textContent = orphans.length;                if (orphans.length === 0) {                    container.innerHTML = `                        <div style="text-align: center; padding: 3rem; background: white; border-radius: 16px;">                            <p style="font-size: 1.2rem; color: #10b981;">✅ No orphaned resources found! All high-quality content is well connected.</p>                        </div>                    `;                    return;                }                // Render orphaned gems                container.innerHTML = orphans.map(gem => {                    const culturalBadges = [];                    if (gem.has_whakataukī) culturalBadges.push('🌿 Whakataukī');                    if (gem.has_te_reo) culturalBadges.push('🗣️ Te Reo Māori');                    if (gem.cultural_context && culturalBadges.length === 0) culturalBadges.push('🌍 Cultural Context');                    const resourceIcon =                        gem.resource_type === 'lesson' ? '📚' :                        gem.resource_type === 'handout' ? '📄' :                        gem.resource_type === 'Game' ? '🎮' :                        gem.resource_type === 'interactive_game' ? '🎮' :                        gem.resource_type === 'interactive_handout' ? '📝' : '✨';                    return `                        <div class="gem-card">                            <div style="position: relative; z-index: 2;">                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">                                    <span class="quality-badge">                                        ⭐ ${gem.quality_score}/100                                    </span>                                    ${gem.connections === 0 ?                                        '<span style="background: #fee2e2; color: #991b1b; padding: 0.5rem 1rem; border-radius: 12px; font-weight: 700; font-size: 0.9rem;">🚨 0 Connections!</span>' :                                        `<span style="background: #fff7ed; color: #9a3412; padding: 0.5rem 1rem; border-radius: 12px; font-weight: 700; font-size: 0.9rem;">${gem.connections} connection${gem.connections === 1 ? '' : 's'}</span>`                                    }                                </div>                                <h3 style="color: #92400e; font-size: 1.75rem; margin-bottom: 1rem; font-weight: 800;">                                    ${resourceIcon} ${gem.title}                                </h3>                                <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem;">                                    <span style="background: #fed7aa; color: #9a3412; padding: 0.5rem 1rem; border-radius: 8px; font-size: 0.9rem; font-weight: 600;">                                        ${gem.resource_type || 'Resource'}                                    </span>                                    ${gem.subject ? `                                        <span style="background: #fed7aa; color: #9a3412; padding: 0.5rem 1rem; border-radius: 8px; font-size: 0.9rem; font-weight: 600;">                                            ${gem.subject}                                        </span>                                    ` : ''}                                    ${gem.year_level ? `                                        <span style="background: #fed7aa; color: #9a3412; padding: 0.5rem 1rem; border-radius: 8px; font-size: 0.9rem; font-weight: 600;">                                            ${gem.year_level}                                        </span>                                    ` : ''}                                </div>                                ${culturalBadges.length > 0 ? `                                    <div style="background: linear-gradient(135deg, #d1fae5, #a7f3d0); padding: 1rem 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;">                                        <div style="color: #065f46; font-weight: 700; font-size: 0.95rem;">                                            ${culturalBadges.join(' • ')}                                        </div>                                    </div>                                ` : ''}                                ${gem.connections === 0 ? `                                    <div class="connection-warning">                                        <div style="color: #991b1b; font-weight: 700; margin-bottom: 0.5rem;">⚠️ Completely Isolated</div>                                        <div style="color: #7f1d1d; font-size: 0.9rem;">                                            This excellent resource has NO connections in the knowledge graph. It's invisible to students!                                        </div>                                    </div>                                ` : ''}                                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">                                    <a href="${gem.file_path}" style="flex: 1; background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 1rem 1.5rem; border-radius: 12px; text-align: center; text-decoration: none; font-weight: 700; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);">                                        Explore This Gem →                                    </a>                                    <button onclick="shareGem('${gem.title}', '${gem.file_path}')" style="background: white; border: 2px solid #92400e; color: #92400e; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 700; cursor: pointer;">                                        Share 📤                                    </button>                                </div>                            </div>                        </div>                    `;                }).join('');                console.log(`✅ Found ${orphans.length} orphaned gems!`);                console.log('📊 Breakdown:', {                    total: orphans.length,                    zeroConnections: orphans.filter(r => r.connections === 0).length,                    withWhakataukī: orphans.filter(r => r.has_whakataukī).length,                    games: orphans.filter(r => r.resource_type?.toLowerCase().includes('game')).length                });            } catch (error) {                console.error('❌ Error loading orphaned gems:', error);                container.innerHTML = `                    <div style="text-align: center; padding: 3rem; background: white; border-radius: 16px;">                        <p style="color: #ef4444;">Error loading resources. Please try again.</p>                    </div>                `;            }        }        function shareGem(title, path) {            const url = window.location.origin + path;            if (navigator.share) {                navigator.share({                    title: `Hidden Gem: ${title}`,                    text: `Check out this excellent resource from Te Kete Ako!`,                    url: url                });            } else {                navigator.clipboard.writeText(url);                alert('Link copied to clipboard!');            }        }        document.addEventListener('DOMContentLoaded', loadOrphanedGems);    </script><!-- 📊 ULTIMATE BEAUTY: PostHog Analytics (Privacy-First) --><script src="/js/posthog-analytics.js" defer></script></body></html>