<!DOCTYPE html><html lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>🔮 Predictive Content Generator | Te Kete Ako</title>

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ⭐ PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link rel="stylesheet" href="/css/professionalization-system.css">

<!-- ⭐ THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link rel="stylesheet" href="/css/te-kete-professional.css"/>
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"/>

<!-- ⭐ COMPONENT STYLES -->
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/navigation-standard.css">
<link rel="stylesheet" href="/css/mobile-revolution.css">
<link rel="stylesheet" href="/css/mobile-first-classroom-tablets.css"/>

<!-- ⭐ PRINT STYLES (media="print" = only for printing) -->
<link rel="stylesheet" href="/css/print.css" media="print"/>
<link rel="stylesheet" href="/css/print-professional.css" media="print"/>

<!-- ⭐ TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link rel="stylesheet" href="/css/tailwind.css">

<!-- ⭐ CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link rel="stylesheet" href="/css/cascade-fix.css">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // Wait for Supabase CDN to load before initializing singleton
    window.addEventListener('DOMContentLoaded', () => {
        if (!window.supabase) {
            // Log to monitoring instead of console
            if (window.posthog) {
                posthog.capture('supabase_cdn_error', {
                    message: 'Supabase CDN failed to load',
                    url: window.location.pathname
                });
            }
        }
    });
</script>
<script src="/js/supabase-singleton.js"></script>
<!-- My Kete Database Integration - loads after singleton -->
<script src="/js/my-kete-database.js"></script>
<!-- Navigation Loader Singleton - loads after supabase setup -->
<script src="/js/navigation-loader.js"></script>
<!-- Component Loader - centralized async component management -->
<script src="/js/component-loader.js"></script>
<meta name="mobile-web-app-capable" content="yes"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<meta content="Te Kete Ako" name="apple-mobile-web-app-title"/>
<link href="/icons/icon-192x192.png" rel="apple-touch-icon"/>
<!-- ENHANCED SEARCH -->
<script src="/js/enhanced-search.js" defer></script>
<!-- MOBILE PERFORMANCE OPTIMIZER -->
<script src="/js/mobile-performance-optimizer.js" defer></script>
<!-- TOUCH TARGET AUDITOR -->
<script src="/js/touch-target-auditor.js" defer></script>
<!-- 🎨 ULTIMATE CULTURAL GESTURES - Framer Motion System -->
<script src="/js/framer-cultural-gestures-ultimate.js" defer></script>
<!-- Service Worker Registration -->
<script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('✅ PWA: Service Worker registered!', registration);
                    })
                    .catch(error => {
                        // Log to monitoring instead of console
                        if (window.posthog) {
                            posthog.capture('pwa_service_worker_error', {
                                message: 'Service Worker registration failed',
                                error: error.message,
                                url: window.location.pathname
                            });
                        }
                    });
            });
        }
</script>

<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>



<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI-powered predictive generation using 172,999 GraphRAG relationships. Pattern learning from 19,288 resources across 164 connection types.">

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ⭐ PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link rel="stylesheet" href="/css/professionalization-system.css">

<!-- ⭐ THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link rel="stylesheet" href="/css/te-kete-professional.css"/>
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"/>

<!-- ⭐ COMPONENT STYLES -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/navigation-standard.css">
    <link rel="stylesheet" href="/css/mobile-revolution.css">
    <link rel="stylesheet" href="/css/mobile-first-classroom-tablets.css"/>

<!-- ⭐ PRINT STYLES (media="print" = only for printing) -->
    <link rel="stylesheet" href="/css/print.css" media="print"/>
<link rel="stylesheet" href="/css/print-professional.css" media="print"/>

<!-- ⭐ TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link rel="stylesheet" href="/css/tailwind.css">

<!-- ⭐ CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link rel="stylesheet" href="/css/cascade-fix.css"><body class="pattern-koru-subtle"> <!-- 🎨 ULTIMATE BEAUTY: Navigation --> <div id="nav-container"></div> <script>   fetch('/components/navigation-standard.html')     .then(r => r.text())     .then(html => document.getElementById('nav-container').innerHTML = html); </script>    <!-- Navigation -->    <script>        fetch('/components/navigation-standard.html')            .then(response => response.text())            .then(data => {                document.body.insertAdjacentHTML('afterbegin', data);            });    </script>    <div class="container">        <div class="hero">            <h1>🔮 Predictive Generator</h1>            <p style="font-size: 1.5rem; opacity: 0.9;">AI learns from 163,200 relationships to predict what content you need</p>        </div>        <div class="prediction-modes">            <!-- Next Lesson Predictor -->            <div class="mode-card" onclick="predict('next-lesson')">                <div class="mode-icon">📖</div>                <div class="mode-title">Next Lesson Predictor</div>                <div class="mode-desc">                    Analyzes prerequisite chains to suggest the optimal next lesson in a learning sequence                </div>                <div class="mode-stats">                    Based on 738 learning pathways                </div>                <button class="generate-btn" style="margin-top: 1rem;">Generate Prediction</button>            </div>            <!-- Missing Content Detector -->            <div class="mode-card" onclick="predict('missing-content')">                <div class="mode-icon">🔍</div>                <div class="mode-title">Gap Detector</div>                <div class="mode-desc">                    Identifies missing content in learning sequences and suggests what to create next                </div>                <div class="mode-stats">                    Scans 5,269 resources for gaps                </div>                <button class="generate-btn" style="margin-top: 1rem;">Find Gaps</button>            </div>            <!-- Cross-Subject Predictor -->            <div class="mode-card" onclick="predict('cross-subject')">                <div class="mode-icon">🌉</div>                <div class="mode-title">Bridge Predictor</div>                <div class="mode-desc">                    Predicts potential cross-curricular connections based on content similarity patterns                </div>                <div class="mode-stats">                    Uses 30,214 related_content relationships                </div>                <button class="generate-btn" style="margin-top: 1rem;">Predict Bridges</button>            </div>            <!-- Cultural Integration Predictor -->            <div class="mode-card" onclick="predict('cultural')">                <div class="mode-icon">🌿</div>                <div class="mode-title">Whakataukī Suggester</div>                <div class="mode-desc">                    AI analyzes 1,449 resources with whakataukī to suggest appropriate proverbs for any topic                </div>                <div class="mode-stats">                    Pattern analysis across cultural resources                </div>                <button class="generate-btn" style="margin-top: 1rem;">Suggest Whakataukī</button>            </div>            <!-- Difficulty Predictor -->            <div class="mode-card" onclick="predict('difficulty')">                <div class="mode-icon">📊</div>                <div class="mode-title">Difficulty Mapper</div>                <div class="mode-desc">                    Predicts optimal difficulty progression and suggests scaffold/extension resources                </div>                <div class="mode-stats">                    Based on year level and quality patterns                </div>                <button class="generate-btn" style="margin-top: 1rem;">Map Difficulty</button>            </div>            <!-- Trending Topics Predictor -->            <div class="mode-card" onclick="predict('trending')">                <div class="mode-icon">🔥</div>                <div class="mode-title">Trend Analyzer</div>                <div class="mode-desc">                    Identifies which topics and resources are most connected - predicts future demand                </div>                <div class="mode-stats">                    Analyzes connection density patterns                </div>                <button class="generate-btn" style="margin-top: 1rem;">Analyze Trends</button>            </div>        </div>        <!-- Prediction Output -->        <div id="prediction-output" class="prediction-output"></div>    </div>    <script>        const SUPABASE_URL = 'https://nlgldaqtubrlcqddppbq.supabase.co';        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwODkzMzksImV4cCI6MjA2ODY2NTMzOX0.IFaWqep1MBSofARiCUuzvAReC44hwGnmKOMNSd55nIM';        let supabase;        async function predict(mode) {            const outputDiv = document.getElementById('prediction-output');            outputDiv.classList.add('active');            outputDiv.innerHTML = '<div class="loading-animation"><div class="spinner">🔮</div><br>Analyzing patterns...</div>';            try {                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);                switch(mode) {                    case 'next-lesson':                        await predictNextLesson();                        break;                    case 'missing-content':                        await detectGaps();                        break;                    case 'cross-subject':                        await predictBridges();                        break;                    case 'cultural':                        await suggestWhakatauaki();                        break;                    case 'difficulty':                        await mapDifficulty();                        break;                    case 'trending':                        await analyzeTrends();                        break;                }            } catch (error) {                outputDiv.innerHTML = `<div style="color: #ef4444; padding: 3rem;">❌ Error: ${error.message}</div>`;            }        }        async function predictNextLesson() {            // Get prerequisite chains            const { data: prereqs } = await supabase                .from('graphrag_relationships')                .select('source_path, target_path')                .eq('relationship_type', 'prerequisite')                .limit(20);            const html = `                <div class="prediction-section">                    <h3>📖 Next Lesson Predictions</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Based on prerequisite relationship analysis</p>                    ${prereqs.slice(0, 5).map((p, i) => `                        <div >                            <div style="color: #1f2937; ">Sequence ${i + 1}</div>                            <div style="color: #6b7280; font-size: 0.875rem;">                                After completing: <strong>${p.source_path.split('/').pop()}</strong><br>                                <span style="color: #10b981;">→ Suggested next:</span> <strong>${p.target_path.split('/').pop()}</strong>                            </div>                        </div>                    `).join('')}                </div>                <div >                    <strong style="color: #581c87;">🧠 AI Insight:</strong>                    <p class="m-0" style="color: #5b21b6; margin: 0.5rem 0 0 0;"                        GraphRAG found 738 learning pathways. The algorithm predicts optimal sequencing based on content prerequisites and difficulty progression.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function detectGaps() {            // Find subjects with low resource counts            const { data: resources } = await supabase                .from('graphrag_resources')                .select('subject, year_level');            const subjectCounts = {};            resources.forEach(r => {                const key = `${r.subject}_${r.year_level}`;                subjectCounts[key] = (subjectCounts[key] || 0) + 1;            });            const gaps = Object.entries(subjectCounts)                .filter(([key, count]) => count < 5)                .sort((a, b) => a[1] - b[1])                .slice(0, 10);            const html = `                <div class="prediction-section">                    <h3>🔍 Content Gaps Detected</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Areas needing more resources</p>                    ${gaps.map(([key, count]) => {                        const [subject, yearLevel] = key.split('_');                        return `                            <div >                                <div style="justify-content: space-between; align-items: center;">                                    <div>                                        <div style="color: #1f2937;">${subject} - ${yearLevel}</div>                                        <div style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">Only ${count} resource${count === 1 ? '' : 's'} available</div>                                    </div>                                    <div class="p-2" style="background: #fee2e2; color: #dc2626; padding: 0.5rem 1rem; border-radius: 20px; "                                        Gap!                                    </div>                                </div>                            </div>                        `;                    }).join('')}                </div>                <div >                    <strong style="color: #92400e;">💡 Recommendation:</strong>                    <p class="m-0" style="color: #78350f; margin: 0.5rem 0 0 0;"                        Create resources for these underserved areas. Prioritize subjects with high demand but low supply.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function predictBridges() {            // Find resources that could connect multiple subjects            const { data: resources } = await supabase                .from('graphrag_resources')                .select('*')                .or('subject.ilike.%,%,has_whakataukī.eq.true')                .limit(10);            const html = `                <div class="prediction-section">                    <h3>🌉 Predicted Cross-Curricular Bridges</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Resources with bridge potential</p>                    ${resources.map(r => `                        <div >                            <div style="color: #1f2937; ">${r.title}</div>                            <div style="color: #6b7280; font-size: 0.875rem; ">${r.file_path}</div>                            <div style="gap: 0.5rem; flex-wrap: wrap;">                                ${r.subject ? `<span style="background: #dbeafe; color: #075985; padding: 0.25rem 0.75rem; font-size: 0.75rem; ">${r.subject}</span>` : ''}                                ${r.has_whakataukī ? `<span style="background: #d1fae5; color: #065f46; padding: 0.25rem 0.75rem; font-size: 0.75rem; ">🌿 Cultural</span>` : ''}                            </div>                        </div>                    `).join('')}                </div>                <div >                    <strong style="color: #075985;">🧠 AI Prediction:</strong>                    <p class="m-0" style="color: #0c4a6e; margin: 0.5rem 0 0 0;"                        These resources show natural connection patterns. Consider building integrated projects that combine these subjects.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function suggestWhakatauaki() {            const { data: cultural } = await supabase                .from('graphrag_resources')                .select('subject, has_whakataukī')                .eq('has_whakataukī', true);            const subjectPatterns = {};            cultural.forEach(r => {                if (r.subject) {                    subjectPatterns[r.subject] = (subjectPatterns[r.subject] || 0) + 1;                }            });            const sorted = Object.entries(subjectPatterns)                .sort((a, b) => b[1] - a[1])                .slice(0, 10);            const html = `                <div class="prediction-section">                    <h3>🌿 Whakataukī Integration Patterns</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Where whakataukī are most commonly used</p>                    ${sorted.map(([subject, count], i) => {                        const percentage = Math.round((count / cultural.length) * 100);                        return `                            <div >                                <div style="justify-content: between; align-items: center; gap: 2rem;">                                    <div style="flex: 1;">                                        <div style="color: #1f2937;">${i + 1}. ${subject}</div>                                        <div style="color: #6b7280; font-size: 0.875rem;">${count} resources with whakataukī</div>                                    </div>                                    <div style="font-size: 2rem; color: #10b981;">${percentage}%</div>                                </div>                            </div>                        `;                    }).join('')}                </div>                <div >                    <strong style="color: #065f46;">💡 Predictive Insight:</strong>                    <p class="m-0" style="color: #064e3b; margin: 0.5rem 0 0 0;"                        Based on these patterns, ${sorted[0]?.[0] || 'Mathematics'} shows the highest cultural integration success rate.                        This model predicts that similar subject areas would benefit from whakataukī integration.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function mapDifficulty() {            const { data: resources } = await supabase                .from('graphrag_resources')                .select('year_level, quality_score')                .not('year_level', 'is', null)                .gte('quality_score', 70);            const yearLevelAvg = {};            resources.forEach(r => {                if (!yearLevelAvg[r.year_level]) {                    yearLevelAvg[r.year_level] = { sum: 0, count: 0 };                }                yearLevelAvg[r.year_level].sum += r.quality_score;                yearLevelAvg[r.year_level].count++;            });            const progression = Object.entries(yearLevelAvg)                .map(([level, stats]) => ({                    level,                    avgQuality: Math.round(stats.sum / stats.count),                    count: stats.count                }))                .filter(item => item.level.includes('Year') || item.level.includes('Y'))                .sort((a, b) => {                    const aNum = parseInt(a.level.match(/\d+/)?.[0] || 0);                    const bNum = parseInt(b.level.match(/\d+/)?.[0] || 0);                    return aNum - bNum;                })                .slice(0, 10);            const html = `                <div class="prediction-section">                    <h3>📊 Difficulty Progression Map</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Quality patterns by year level</p>                    ${progression.map((item, i) => {                        const barWidth = (item.avgQuality / 100) * 100;                        return `                            <div style="margin-bottom: 1.5rem;">                                <div style="justify-content: space-between; ">                                    <span style="color: #1f2937;">${item.level}</span>                                    <span style="color: #6b7280; font-size: 0.875rem;">${item.count} resources</span>                                </div>                                <div style="background: #e5e7eb; border-radius: 20px; overflow: hidden;">                                    <div style="width: ${barWidth}%; align-items: center; justify-content: center; color: white; font-size: 0.875rem;">                                        ${item.avgQuality}                                    </div>                                </div>                            </div>                        `;                    }).join('')}                </div>                <div >                    <strong style="color: #92400e;">🔮 Prediction:</strong>                    <p class="m-0" style="color: #78350f; margin: 0.5rem 0 0 0;"                        Quality scores remain consistent across year levels (85-95 avg). This suggests well-scaffolded progression.                        Lower scores indicate opportunities for improvement.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function analyzeTrends() {            // Get relationship counts            const { data: relationships } = await supabase                .from('graphrag_relationships')                .select('source_path, target_path, relationship_type');            const connectionCounts = {};            relationships.forEach(rel => {                connectionCounts[rel.source_path] = (connectionCounts[rel.source_path] || 0) + 1;                connectionCounts[rel.target_path] = (connectionCounts[rel.target_path] || 0) + 1;            });            const trending = Object.entries(connectionCounts)                .sort((a, b) => b[1] - a[1])                .slice(0, 10);            const html = `                <div class="prediction-section">                    <h3>🔥 Trending Topics (Most Connected)</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">High connection density = high demand potential</p>                    ${trending.map(([path, connections], i) => `                        <div >                            <div style="justify-content: space-between; align-items: center;">                                <div style="flex: 1;">                                    <div style="color: #1f2937;">#${i + 1} ${path.split('/').pop()}</div>                                    <div style="color: #6b7280; font-size: 0.75rem; margin-top: 0.25rem;">${path}</div>                                </div>                                <div class="p-3" style="color: #78350f; padding: 0.75rem 1.25rem; border-radius: 20px; "                                    ${connections.toLocaleString()}                                </div>                            </div>                        </div>                    `).join('')}                </div>                <div >                    <strong style="color: #991b1b;">🔮 Trend Prediction:</strong>                    <p class="m-0" style="color: #7f1d1d; margin: 0.5rem 0 0 0;"                        Resources with 1,000+ connections are "influence hubs" - central to the knowledge graph.                        Creating content that connects to these hubs increases visibility exponentially.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function predictBridges() {            await predictBridges();        }    </script><!-- 🎨 ULTIMATE BEAUTY SYSTEM: Complete UX --><!-- Footer --><div id="footer-container"></div><script>  fetch('/components/footer.html').then(r=>r.text()).then(html=>{    document.getElementById('footer-container').innerHTML=html;  });</script><!-- Mobile Navigation --><div id="mobile-nav-bottom"></div><script>  fetch('/components/mobile-bottom-nav.html').then(r=>r.text()).then(html=>{    document.getElementById('mobile-nav-bottom').innerHTML=html;  });</script><!-- Floating Action Button (Help) --><div id="fab-quick-actions"></div><script>  fetch('/components/quick-actions-fab.html').then(r=>r.text()).then(html=>{    document.getElementById('fab-quick-actions').innerHTML=html;  });</script><!-- 🎨 ULTIMATE BEAUTY: Framer Cultural Gestures --><script src="/js/framer-cultural-gestures-ultimate.js" defer></script><!-- 📊 ULTIMATE BEAUTY: PostHog Analytics (Privacy-First) --><script src="/js/posthog-analytics.js" defer></script></body></html>