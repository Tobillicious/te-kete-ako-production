<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>üîÆ Predictive Content Generator | Te Kete Ako</title>    <meta name="description" content="AI-powered predictive generation using 172,999 GraphRAG relationships. Pattern learning from 19,288 resources across 164 connection types."><!-- Professional Design System -->    <!-- üé® ULTIMATE BEAUTY SYSTEM - Te Kete Ako Design Excellence --> <link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"> <script src="https://cdn.tailwindcss.com"></script> <script src="/tailwind.config.ultimate.js"></script> <!-- END ULTIMATE BEAUTY SYSTEM --><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>    <style>        body {            background: linear-gradient(135deg, #581c87, #7c3aed);            min-height: 100vh;            padding: 2rem;            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;            color: white;        }        .container {            max-width: 1400px;            margin: 0 auto;        }        .hero {            background: rgba(255, 255, 255, 0.1);            backdrop-filter: blur(10px);            border-radius: 24px;            padding: 4rem 3rem;            text-align: center;            margin-bottom: 3rem;            border: 2px solid rgba(255, 255, 255, 0.2);        }        .hero h1 {            font-size: 4rem;            margin-bottom: 1rem;            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);        }        .prediction-modes {            display: grid;            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));            gap: 2rem;            margin-bottom: 3rem;        }        .mode-card {            background: white;            border-radius: 20px;            padding: 2.5rem;            box-shadow: 0 10px 40px rgba(0,0,0,0.3);            cursor: pointer;            transition: all 0.3s ease;            border: 3px solid transparent;            color: #1f2937;        }        .mode-card:hover {            transform: translateY(-8px);            border-color: #a855f7;            box-shadow: 0 20px 60px rgba(168, 85, 247, 0.4);        }        .mode-icon {            font-size: 4rem;            margin-bottom: 1rem;        }        .mode-title {            font-size: 1.75rem;            font-weight: 800;            color: #581c87;            margin-bottom: 1rem;        }        .mode-desc {            color: #6b7280;            line-height: 1.6;            margin-bottom: 1.5rem;        }        .mode-stats {            background: #f9fafb;            padding: 1rem;            border-radius: 12px;            font-size: 0.875rem;            color: #4b5563;        }        .prediction-output {            background: white;            border-radius: 20px;            padding: 3rem;            box-shadow: 0 10px 40px rgba(0,0,0,0.3);            display: none;            color: #1f2937;        }        .prediction-output.active {            display: block;            animation: slideIn 0.5s ease-out;        }        @keyframes slideIn {            from {                opacity: 0;                transform: translateY(20px);            }            to {                opacity: 1;                transform: translateY(0);            }        }        .generate-btn {            background: linear-gradient(135deg, #a855f7, #7c3aed);            color: white;            border: none;            padding: 1rem 2rem;            border-radius: 12px;            font-size: 1.125rem;            font-weight: 700;            cursor: pointer;            width: 100%;            transition: all 0.3s ease;        }        .generate-btn:hover {            transform: scale(1.02);            box-shadow: 0 8px 24px rgba(168, 85, 247, 0.6);        }        .prediction-section {            margin-bottom: 2rem;            padding: 2rem;            background: #f9fafb;            border-radius: 16px;            border-left: 4px solid #a855f7;        }        .prediction-section h3 {            color: #1f2937;            margin-top: 0;        }        .loading-animation {            text-align: center;            padding: 3rem;            color: #6b7280;        }        .spinner {            display: inline-block;            animation: spin 1s linear infinite;            font-size: 3rem;        }        @keyframes spin {            from { transform: rotate(0deg); }            to { transform: rotate(360deg); }        }    </style></head><body class="pattern-koru-subtle"> <!-- üé® ULTIMATE BEAUTY: Navigation --> <div id="nav-container"></div> <script>   fetch('/components/navigation-standard.html')     .then(r => r.text())     .then(html => document.getElementById('nav-container').innerHTML = html); </script>    <!-- Navigation -->    <script>        fetch('/components/navigation-standard.html')            .then(response => response.text())            .then(data => {                document.body.insertAdjacentHTML('afterbegin', data);            });    </script>    <div class="container">        <div class="hero">            <h1>üîÆ Predictive Generator</h1>            <p style="font-size: 1.5rem; opacity: 0.9;">AI learns from 163,200 relationships to predict what content you need</p>        </div>        <div class="prediction-modes">            <!-- Next Lesson Predictor -->            <div class="mode-card" onclick="predict('next-lesson')">                <div class="mode-icon">üìñ</div>                <div class="mode-title">Next Lesson Predictor</div>                <div class="mode-desc">                    Analyzes prerequisite chains to suggest the optimal next lesson in a learning sequence                </div>                <div class="mode-stats">                    Based on 738 learning pathways                </div>                <button class="generate-btn" style="margin-top: 1rem;">Generate Prediction</button>            </div>            <!-- Missing Content Detector -->            <div class="mode-card" onclick="predict('missing-content')">                <div class="mode-icon">üîç</div>                <div class="mode-title">Gap Detector</div>                <div class="mode-desc">                    Identifies missing content in learning sequences and suggests what to create next                </div>                <div class="mode-stats">                    Scans 5,269 resources for gaps                </div>                <button class="generate-btn" style="margin-top: 1rem;">Find Gaps</button>            </div>            <!-- Cross-Subject Predictor -->            <div class="mode-card" onclick="predict('cross-subject')">                <div class="mode-icon">üåâ</div>                <div class="mode-title">Bridge Predictor</div>                <div class="mode-desc">                    Predicts potential cross-curricular connections based on content similarity patterns                </div>                <div class="mode-stats">                    Uses 30,214 related_content relationships                </div>                <button class="generate-btn" style="margin-top: 1rem;">Predict Bridges</button>            </div>            <!-- Cultural Integration Predictor -->            <div class="mode-card" onclick="predict('cultural')">                <div class="mode-icon">üåø</div>                <div class="mode-title">Whakataukƒ´ Suggester</div>                <div class="mode-desc">                    AI analyzes 1,449 resources with whakataukƒ´ to suggest appropriate proverbs for any topic                </div>                <div class="mode-stats">                    Pattern analysis across cultural resources                </div>                <button class="generate-btn" style="margin-top: 1rem;">Suggest Whakataukƒ´</button>            </div>            <!-- Difficulty Predictor -->            <div class="mode-card" onclick="predict('difficulty')">                <div class="mode-icon">üìä</div>                <div class="mode-title">Difficulty Mapper</div>                <div class="mode-desc">                    Predicts optimal difficulty progression and suggests scaffold/extension resources                </div>                <div class="mode-stats">                    Based on year level and quality patterns                </div>                <button class="generate-btn" style="margin-top: 1rem;">Map Difficulty</button>            </div>            <!-- Trending Topics Predictor -->            <div class="mode-card" onclick="predict('trending')">                <div class="mode-icon">üî•</div>                <div class="mode-title">Trend Analyzer</div>                <div class="mode-desc">                    Identifies which topics and resources are most connected - predicts future demand                </div>                <div class="mode-stats">                    Analyzes connection density patterns                </div>                <button class="generate-btn" style="margin-top: 1rem;">Analyze Trends</button>            </div>        </div>        <!-- Prediction Output -->        <div id="prediction-output" class="prediction-output"></div>    </div>    <script>        const SUPABASE_URL = 'https://nlgldaqtubrlcqddppbq.supabase.co';        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwODkzMzksImV4cCI6MjA2ODY2NTMzOX0.IFaWqep1MBSofARiCUuzvAReC44hwGnmKOMNSd55nIM';        let supabase;        async function predict(mode) {            const outputDiv = document.getElementById('prediction-output');            outputDiv.classList.add('active');            outputDiv.innerHTML = '<div class="loading-animation"><div class="spinner">üîÆ</div><br>Analyzing patterns...</div>';            try {                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);                switch(mode) {                    case 'next-lesson':                        await predictNextLesson();                        break;                    case 'missing-content':                        await detectGaps();                        break;                    case 'cross-subject':                        await predictBridges();                        break;                    case 'cultural':                        await suggestWhakatauaki();                        break;                    case 'difficulty':                        await mapDifficulty();                        break;                    case 'trending':                        await analyzeTrends();                        break;                }            } catch (error) {                outputDiv.innerHTML = `<div style="color: #ef4444; text-align: center; padding: 3rem;">‚ùå Error: ${error.message}</div>`;            }        }        async function predictNextLesson() {            // Get prerequisite chains            const { data: prereqs } = await supabase                .from('graphrag_relationships')                .select('source_path, target_path')                .eq('relationship_type', 'prerequisite')                .limit(20);            const html = `                <div class="prediction-section">                    <h3>üìñ Next Lesson Predictions</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Based on prerequisite relationship analysis</p>                    ${prereqs.slice(0, 5).map((p, i) => `                        <div style="background: white; padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; border-left: 4px solid #10b981;">                            <div style="font-weight: 700; color: #1f2937; margin-bottom: 0.5rem;">Sequence ${i + 1}</div>                            <div style="color: #6b7280; font-size: 0.875rem;">                                After completing: <strong>${p.source_path.split('/').pop()}</strong><br>                                <span style="color: #10b981;">‚Üí Suggested next:</span> <strong>${p.target_path.split('/').pop()}</strong>                            </div>                        </div>                    `).join('')}                </div>                <div style="background: linear-gradient(135deg, #ede9fe, #ddd6fe); padding: 2rem; border-radius: 16px; border-left: 4px solid #a855f7;">                    <strong style="color: #581c87;">üß† AI Insight:</strong>                    <p style="color: #5b21b6; margin: 0.5rem 0 0 0;">                        GraphRAG found 738 learning pathways. The algorithm predicts optimal sequencing based on content prerequisites and difficulty progression.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function detectGaps() {            // Find subjects with low resource counts            const { data: resources } = await supabase                .from('graphrag_resources')                .select('subject, year_level');            const subjectCounts = {};            resources.forEach(r => {                const key = `${r.subject}_${r.year_level}`;                subjectCounts[key] = (subjectCounts[key] || 0) + 1;            });            const gaps = Object.entries(subjectCounts)                .filter(([key, count]) => count < 5)                .sort((a, b) => a[1] - b[1])                .slice(0, 10);            const html = `                <div class="prediction-section">                    <h3>üîç Content Gaps Detected</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Areas needing more resources</p>                    ${gaps.map(([key, count]) => {                        const [subject, yearLevel] = key.split('_');                        return `                            <div style="background: white; padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; border-left: 4px solid #ef4444;">                                <div style="display: flex; justify-content: space-between; align-items: center;">                                    <div>                                        <div style="font-weight: 700; color: #1f2937;">${subject} - ${yearLevel}</div>                                        <div style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">Only ${count} resource${count === 1 ? '' : 's'} available</div>                                    </div>                                    <div style="background: #fee2e2; color: #dc2626; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 700;">                                        Gap!                                    </div>                                </div>                            </div>                        `;                    }).join('')}                </div>                <div style="background: linear-gradient(135deg, #fef3c7, #fde68a); padding: 2rem; border-radius: 16px; border-left: 4px solid #f59e0b;">                    <strong style="color: #92400e;">üí° Recommendation:</strong>                    <p style="color: #78350f; margin: 0.5rem 0 0 0;">                        Create resources for these underserved areas. Prioritize subjects with high demand but low supply.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function predictBridges() {            // Find resources that could connect multiple subjects            const { data: resources } = await supabase                .from('graphrag_resources')                .select('*')                .or('subject.ilike.%,%,has_whakataukƒ´.eq.true')                .limit(10);            const html = `                <div class="prediction-section">                    <h3>üåâ Predicted Cross-Curricular Bridges</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Resources with bridge potential</p>                    ${resources.map(r => `                        <div style="background: white; padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; border-left: 4px solid #06b6d4;">                            <div style="font-weight: 700; color: #1f2937; margin-bottom: 0.5rem;">${r.title}</div>                            <div style="color: #6b7280; font-size: 0.875rem; margin-bottom: 0.5rem;">${r.file_path}</div>                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">                                ${r.subject ? `<span style="background: #dbeafe; color: #075985; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">${r.subject}</span>` : ''}                                ${r.has_whakataukƒ´ ? `<span style="background: #d1fae5; color: #065f46; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">üåø Cultural</span>` : ''}                            </div>                        </div>                    `).join('')}                </div>                <div style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); padding: 2rem; border-radius: 16px; border-left: 4px solid #0284c7;">                    <strong style="color: #075985;">üß† AI Prediction:</strong>                    <p style="color: #0c4a6e; margin: 0.5rem 0 0 0;">                        These resources show natural connection patterns. Consider building integrated projects that combine these subjects.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function suggestWhakatauaki() {            const { data: cultural } = await supabase                .from('graphrag_resources')                .select('subject, has_whakataukƒ´')                .eq('has_whakataukƒ´', true);            const subjectPatterns = {};            cultural.forEach(r => {                if (r.subject) {                    subjectPatterns[r.subject] = (subjectPatterns[r.subject] || 0) + 1;                }            });            const sorted = Object.entries(subjectPatterns)                .sort((a, b) => b[1] - a[1])                .slice(0, 10);            const html = `                <div class="prediction-section">                    <h3>üåø Whakataukƒ´ Integration Patterns</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Where whakataukƒ´ are most commonly used</p>                    ${sorted.map(([subject, count], i) => {                        const percentage = Math.round((count / cultural.length) * 100);                        return `                            <div style="background: white; padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; border-left: 4px solid #10b981;">                                <div style="display: flex; justify-content: between; align-items: center; gap: 2rem;">                                    <div style="flex: 1;">                                        <div style="font-weight: 700; color: #1f2937;">${i + 1}. ${subject}</div>                                        <div style="color: #6b7280; font-size: 0.875rem;">${count} resources with whakataukƒ´</div>                                    </div>                                    <div style="font-size: 2rem; font-weight: 800; color: #10b981;">${percentage}%</div>                                </div>                            </div>                        `;                    }).join('')}                </div>                <div style="background: linear-gradient(135deg, #d1fae5, #a7f3d0); padding: 2rem; border-radius: 16px; border-left: 4px solid #059669;">                    <strong style="color: #065f46;">üí° Predictive Insight:</strong>                    <p style="color: #064e3b; margin: 0.5rem 0 0 0;">                        Based on these patterns, ${sorted[0]?.[0] || 'Mathematics'} shows the highest cultural integration success rate.                        This model predicts that similar subject areas would benefit from whakataukƒ´ integration.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function mapDifficulty() {            const { data: resources } = await supabase                .from('graphrag_resources')                .select('year_level, quality_score')                .not('year_level', 'is', null)                .gte('quality_score', 70);            const yearLevelAvg = {};            resources.forEach(r => {                if (!yearLevelAvg[r.year_level]) {                    yearLevelAvg[r.year_level] = { sum: 0, count: 0 };                }                yearLevelAvg[r.year_level].sum += r.quality_score;                yearLevelAvg[r.year_level].count++;            });            const progression = Object.entries(yearLevelAvg)                .map(([level, stats]) => ({                    level,                    avgQuality: Math.round(stats.sum / stats.count),                    count: stats.count                }))                .filter(item => item.level.includes('Year') || item.level.includes('Y'))                .sort((a, b) => {                    const aNum = parseInt(a.level.match(/\d+/)?.[0] || 0);                    const bNum = parseInt(b.level.match(/\d+/)?.[0] || 0);                    return aNum - bNum;                })                .slice(0, 10);            const html = `                <div class="prediction-section">                    <h3>üìä Difficulty Progression Map</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Quality patterns by year level</p>                    ${progression.map((item, i) => {                        const barWidth = (item.avgQuality / 100) * 100;                        return `                            <div style="margin-bottom: 1.5rem;">                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">                                    <span style="font-weight: 600; color: #1f2937;">${item.level}</span>                                    <span style="color: #6b7280; font-size: 0.875rem;">${item.count} resources</span>                                </div>                                <div style="background: #e5e7eb; border-radius: 20px; height: 30px; overflow: hidden;">                                    <div style="background: linear-gradient(90deg, #10b981, #059669); width: ${barWidth}%; height: 100%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 0.875rem;">                                        ${item.avgQuality}                                    </div>                                </div>                            </div>                        `;                    }).join('')}                </div>                <div style="background: linear-gradient(135deg, #fef3c7, #fde68a); padding: 2rem; border-radius: 16px; border-left: 4px solid #f59e0b;">                    <strong style="color: #92400e;">üîÆ Prediction:</strong>                    <p style="color: #78350f; margin: 0.5rem 0 0 0;">                        Quality scores remain consistent across year levels (85-95 avg). This suggests well-scaffolded progression.                        Lower scores indicate opportunities for improvement.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function analyzeTrends() {            // Get relationship counts            const { data: relationships } = await supabase                .from('graphrag_relationships')                .select('source_path, target_path, relationship_type');            const connectionCounts = {};            relationships.forEach(rel => {                connectionCounts[rel.source_path] = (connectionCounts[rel.source_path] || 0) + 1;                connectionCounts[rel.target_path] = (connectionCounts[rel.target_path] || 0) + 1;            });            const trending = Object.entries(connectionCounts)                .sort((a, b) => b[1] - a[1])                .slice(0, 10);            const html = `                <div class="prediction-section">                    <h3>üî• Trending Topics (Most Connected)</h3>                    <p style="color: #6b7280; margin-bottom: 1.5rem;">High connection density = high demand potential</p>                    ${trending.map(([path, connections], i) => `                        <div style="background: white; padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; border-left: 4px solid #f59e0b;">                            <div style="display: flex; justify-content: space-between; align-items: center;">                                <div style="flex: 1;">                                    <div style="font-weight: 700; color: #1f2937;">#${i + 1} ${path.split('/').pop()}</div>                                    <div style="color: #6b7280; font-size: 0.75rem; margin-top: 0.25rem;">${path}</div>                                </div>                                <div style="background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #78350f; padding: 0.75rem 1.25rem; border-radius: 20px; font-weight: 800;">                                    ${connections.toLocaleString()}                                </div>                            </div>                        </div>                    `).join('')}                </div>                <div style="background: linear-gradient(135deg, #fee2e2, #fecaca); padding: 2rem; border-radius: 16px; border-left: 4px solid #dc2626;">                    <strong style="color: #991b1b;">üîÆ Trend Prediction:</strong>                    <p style="color: #7f1d1d; margin: 0.5rem 0 0 0;">                        Resources with 1,000+ connections are "influence hubs" - central to the knowledge graph.                        Creating content that connects to these hubs increases visibility exponentially.                    </p>                </div>            `;            document.getElementById('prediction-output').innerHTML = html;        }        async function predictBridges() {            await predictBridges();        }    </script><!-- üé® ULTIMATE BEAUTY SYSTEM: Complete UX --><!-- Footer --><div id="footer-container"></div><script>  fetch('/components/footer.html').then(r=>r.text()).then(html=>{    document.getElementById('footer-container').innerHTML=html;  });</script><!-- Mobile Navigation --><div id="mobile-nav-bottom"></div><script>  fetch('/components/mobile-bottom-nav.html').then(r=>r.text()).then(html=>{    document.getElementById('mobile-nav-bottom').innerHTML=html;  });</script><!-- Floating Action Button (Help) --><div id="fab-quick-actions"></div><script>  fetch('/components/quick-actions-fab.html').then(r=>r.text()).then(html=>{    document.getElementById('fab-quick-actions').innerHTML=html;  });</script><!-- üé® ULTIMATE BEAUTY: Framer Cultural Gestures --><script src="/js/framer-cultural-gestures-ultimate.js" defer></script><!-- üìä ULTIMATE BEAUTY: PostHog Analytics (Privacy-First) --><script src="/js/posthog-analytics.js" defer></script></body></html>