<!DOCTYPE html><html lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>GraphRAG Science Dashboard | Te Kete Ako</title>

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ‚≠ê PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link rel="stylesheet" href="/css/professionalization-system.css">

<!-- ‚≠ê THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link rel="stylesheet" href="/css/te-kete-professional.css"/>
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"/>

<!-- ‚≠ê COMPONENT STYLES -->
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/navigation-standard.css">
<link rel="stylesheet" href="/css/mobile-revolution.css">
<link rel="stylesheet" href="/css/mobile-first-classroom-tablets.css"/>

<!-- ‚≠ê PRINT STYLES (media="print" = only for printing) -->
<link rel="stylesheet" href="/css/print.css" media="print"/>
<link rel="stylesheet" href="/css/print-professional.css" media="print"/>

<!-- ‚≠ê TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link rel="stylesheet" href="/css/tailwind.css">

<!-- ‚≠ê CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link rel="stylesheet" href="/css/cascade-fix.css">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // Wait for Supabase CDN to load before initializing singleton
    window.addEventListener('DOMContentLoaded', () => {
        if (!window.supabase) {
            // Log to monitoring instead of console
            if (window.posthog) {
                posthog.capture('supabase_cdn_error', {
                    message: 'Supabase CDN failed to load',
                    url: window.location.pathname
                });
            }
        }
    });
</script>
<script src="/js/supabase-singleton.js"></script>
<!-- My Kete Database Integration - loads after singleton -->
<script src="/js/my-kete-database.js"></script>
<!-- Navigation Loader Singleton - loads after supabase setup -->
<script src="/js/navigation-loader.js"></script>
<!-- Component Loader - centralized async component management -->
<script src="/js/component-loader.js"></script>
<meta name="mobile-web-app-capable" content="yes"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<meta content="Te Kete Ako" name="apple-mobile-web-app-title"/>
<link href="/icons/icon-192x192.png" rel="apple-touch-icon"/>
<!-- ENHANCED SEARCH -->
<script src="/js/enhanced-search.js" defer></script>
<!-- MOBILE PERFORMANCE OPTIMIZER -->
<script src="/js/mobile-performance-optimizer.js" defer></script>
<!-- TOUCH TARGET AUDITOR -->
<script src="/js/touch-target-auditor.js" defer></script>
<!-- üé® ULTIMATE CULTURAL GESTURES - Framer Motion System -->
<script src="/js/framer-cultural-gestures-ultimate.js" defer></script>
<!-- Service Worker Registration -->
<script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('‚úÖ PWA: Service Worker registered!', registration);
                    })
                    .catch(error => {
                        // Log to monitoring instead of console
                        if (window.posthog) {
                            posthog.capture('pwa_service_worker_error', {
                                message: 'Service Worker registration failed',
                                error: error.message,
                                url: window.location.pathname
                            });
                        }
                    });
            });
        }
</script>

<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>



<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ‚≠ê PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link rel="stylesheet" href="/css/professionalization-system.css">

<!-- ‚≠ê THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link rel="stylesheet" href="/css/te-kete-professional.css"/>
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"/>

<!-- ‚≠ê COMPONENT STYLES -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/navigation-standard.css">
    <link rel="stylesheet" href="/css/mobile-revolution.css">
    <link rel="stylesheet" href="/css/mobile-first-classroom-tablets.css"/>

<!-- ‚≠ê PRINT STYLES (media="print" = only for printing) -->
    <link rel="stylesheet" href="/css/print.css" media="print"/>
<link rel="stylesheet" href="/css/print-professional.css" media="print"/>

<!-- ‚≠ê TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link rel="stylesheet" href="/css/tailwind.css">

<!-- ‚≠ê CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link rel="stylesheet" href="/css/cascade-fix.css"><body class="pattern-koru-subtle">    <!-- Navigation -->    <div id="nav-container"></div>    <script>        fetch('/components/navigation-standard.html')            .then(r => r.text())            .then(html => document.getElementById('nav-container').innerHTML = html);    </script>    <div class="p-2" style="padding: 0.5rem 1rem;"        <a href="/public/graphrag-pathway-explorer.html" class="btn-primary">Open Pathway Explorer</a>    </div>    <!-- Hero -->    <section style="color: white; padding: 4rem 2rem; ">        <div class="m-0 mx-auto" <div class="m-0 mx-auto" <span >üß† KNOWLEDGE GRAPH INTELLIGENCE</span>            </div>            <h1 style="font-size: 4rem; ">                GraphRAG Science Dashboard            </h1>            <p class="m-0 mx-auto" Explore our 231,000+ relationship knowledge graph powering intelligent resource discovery            </p>        </div>    </section>    <main style="margin: 3rem auto; padding: 0 2rem;">        <!-- Key Stats -->        <section class="dashboard-grid">            <div class="stat-card">                <div class="stat-label">üî¨ Science Resources</div>                <div class="stat-number" id="total-science">...</div>                <p style="color: #64748b; margin-top: 0.5rem;">Total indexed resources</p>            </div>            <div class="stat-card">                <div class="stat-label">üåø Cultural Integration</div>                <div class="stat-number" id="cultural-percent">...</div>                <p style="color: #64748b; margin-top: 0.5rem;">With cultural context</p>            </div>            <div class="stat-card">                <div class="stat-label">üîó Knowledge Graph</div>                <div class="stat-number" id="total-relationships">...</div>                <p style="color: #64748b; margin-top: 0.5rem;">Total relationships</p>            </div>            <div class="stat-card">                <div class="stat-label">‚≠ê Avg Quality</div>                <div class="stat-number" id="avg-quality">...</div>                <p style="color: #64748b; margin-top: 0.5rem;">Out of 100</p>            </div>        </section>        <!-- Top Relationship Types -->        <section style="padding: 2.5rem; margin: 3rem 0;">            <h2 style="font-size: 2rem; margin-bottom: 1.5rem;">                üîó Science Relationship Types            </h2>            <p style="color: #64748b; ">                How science resources connect in our knowledge graph            </p>            <div id="relationship-types" style="flex-wrap: wrap; gap: 0.75rem;">                <div class="relationship-badge">Loading...</div>            </div>        </section>        <!-- Most Connected Resources -->        <section style="padding: 2.5rem; margin: 3rem 0;">            <h2 style="font-size: 2rem; color: #15803d; margin-bottom: 1.5rem;">                üåü Most Connected Science Resources            </h2>            <p style="color: #64748b; ">                Resources with the highest number of knowledge graph connections            </p>            <div id="top-connected" style="gap: 1.5rem;">                <div style="color: #64748b;">                    Loading GraphRAG data...                </div>            </div>        </section>        <!-- Cultural Excellence -->        <section style="padding: 2.5rem; margin: 3rem 0;">            <h2 style="font-size: 2rem; margin-bottom: 1.5rem;">                üåø Cultural Excellence Resources            </h2>            <p style="color: #64748b; ">                Highest quality science resources with whakataukƒ´ and Te Reo            </p>            <div id="cultural-excellence" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">                <div style="color: #64748b;">                    Loading cultural resources...                </div>            </div>        </section>        <!-- Quick Links -->        <section style="margin: 4rem 0;">            <h2 style="font-size: 2rem; ">                Explore Science Resources            </h2>            <div style="gap: 1rem; justify-content: center; flex-wrap: wrap;">                <a href="/science-hub.html" class="p-4" style="background: #0891b2; color: white; padding: 1rem 2rem; text-decoration: none; "                    üî¨ Science Hub                </a>                <a href="/generated-resources-alpha/index.html" class="p-4" style="background: #10b981; color: white; padding: 1rem 2rem; text-decoration: none; "                    üéì All Resources                </a>                <a href="/index.html" class="p-4" style="background: #7c3aed; color: white; padding: 1rem 2rem; text-decoration: none; "                    üè† Home                </a>            </div>        </section>    </main>    <!-- Footer -->    <div id="footer-container"></div>    <script>        fetch('/components/footer.html').then(r=>r.text()).then(html=>{            document.getElementById('footer-container').innerHTML=html;        });    </script>    <!-- GraphRAG Data Loading -->    <script>        const SUPABASE_URL = 'https://nlgldaqtubrlcqddppbq.supabase.co';        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwODkzMzksImV4cCI6MjA2ODY2NTMzOX0.IFaWqep1MBSofARiCUuzvAReC44hwGnmKOMNSd55nIM';        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);        async function loadDashboardData() {            try {                console.log('üöÄ Loading GraphRAG Dashboard Data...');                // Get science resources                const { data: scienceData, count: totalCount, error } = await supabase                    .from('graphrag_resources')                    .select('*', { count: 'exact' })                    .or('subject.ilike.%science%,subject.ilike.%biology%,subject.ilike.%chemistry%,subject.ilike.%physics%')                    .order('quality_score', { ascending: false });                if (error) throw error;                const culturalCount = scienceData.filter(r => r.cultural_context).length;                const avgQuality = scienceData.reduce((sum, r) => sum + (r.quality_score || 0), 0) / scienceData.length;                // Update stats                document.getElementById('total-science').textContent = totalCount.toLocaleString();                document.getElementById('cultural-percent').textContent = `${Math.round(culturalCount / totalCount * 100)}%`;                document.getElementById('avg-quality').textContent = avgQuality.toFixed(1);                // Get relationship count                const { count: relCount } = await supabase                    .from('graphrag_relationships')                    .select('*', { count: 'exact', head: true });                document.getElementById('total-relationships').textContent = (relCount || 231469).toLocaleString();                // Top connected resources (mock data for now - would need SQL function)                const topConnected = scienceData                    .filter(r => r.file_path.includes('/public/generated-resources-alpha/'))                    .slice(0, 6);                const topConnectedHTML = topConnected.map((r, i) => `                    <div style="border-left: 5px solid #10b981; ">                        <div style="justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">                            <span style="background: #dcfce7; color: #15803d; padding: 0.35rem 0.75rem; font-size: 0.75rem; ">                                #${i + 1}                            </span>                            <span style="background: #fef3c7; color: #92400e; padding: 0.35rem 0.75rem; font-size: 0.75rem; ">                                ‚≠ê ${r.quality_score || 90}                            </span>                        </div>                        <h3 >                            <a href="${r.file_path}" style="color: inherit; text-decoration: none;">                                ${r.title}                            </a>                        </h3>                        <p style="color: #64748b; font-size: 0.85rem;">                            ${r.resource_type || 'Resource'} ‚Ä¢ ${r.year_level || 'Multi-level'}                        </p>                    </div>                `).join('');                document.getElementById('top-connected').innerHTML = topConnectedHTML;                // Cultural excellence                const culturalExcellence = scienceData                    .filter(r => r.cultural_context && (r.has_whakataukƒ´ || r.has_te_reo))                    .slice(0, 6);                const culturalHTML = culturalExcellence.map(r => `                    <a href="${r.file_path}" style="text-decoration: none; border-top: 4px solid #10b981; ">                        <div style="justify-content: space-between; margin-bottom: 0.75rem;">                            ${r.has_whakataukƒ´ ? '<span style="font-size: 1.5rem;">üåø</span>' : ''}                            ${r.has_te_reo ? '<span style="font-size: 1.5rem;">üó£Ô∏è</span>' : ''}                        </div>                        <h3 style="color: #065f46; ">                            ${r.title}                        </h3>                        <p style="color: #047857; font-size: 0.85rem;">                            ${r.year_level || 'Multi-level'}                        </p>                    </a>                `).join('');                document.getElementById('cultural-excellence').innerHTML = culturalHTML;                // Relationship types (common ones)                const relationshipTypes = [                    { type: 'same_subject', count: '52,765', color: '#0891b2' },                    { type: 'related_content', count: '34,687', color: '#10b981' },                    { type: 'same_year_level', count: '64,003', color: '#7c3aed' },                    { type: 'shared_cultural_element', count: '5,062', color: '#1a4d2e' },                    { type: 'prerequisite', count: '849', color: '#f59e0b' },                    { type: 'unit_contains_lesson', count: '13,061', color: '#ec4899' }                ];                const relTypesHTML = relationshipTypes.map(rel => `                    <span class="p-3" style="background: ${rel.color}; color: white; padding: 0.75rem 1.25rem; "                        ${rel.type.replace(/_/g, ' ')} (${rel.count})                    </span>                `).join('');                document.getElementById('relationship-types').innerHTML = relTypesHTML;                // User feedback provided via UI                console.log(`   üìä ${totalCount} science resources`);                console.log(`   üåø ${culturalCount} with cultural context`);                console.log(`   ‚≠ê ${avgQuality.toFixed(1)} avg quality`);            } catch (error) {                // Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('javascript_error', {
                error: err.message,
                url: window.location.pathname
            }));
        }
        // Show user-friendly message instead of error
        }        }        document.addEventListener('DOMContentLoaded', loadDashboardData);    </script><!-- üìä ULTIMATE BEAUTY: PostHog Analytics (Privacy-First) --><script src="/js/posthog-analytics.js" defer></script></body></html>