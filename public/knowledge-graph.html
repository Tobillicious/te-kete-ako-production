<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Graph Explorer | Te Kete Ako</title>
    <meta name="description" content="Explore 5,324 relationships across our educational knowledge graph. Discover learning pathways, resource connections, and influence hubs.">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/te-kete-unified-design-system.css">
    <link rel="stylesheet" href="/css/component-library.css">
    
    <!-- D3.js for graph visualization -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <style>
        .graph-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4rem 2rem;
            text-align: center;
        }
        
        .graph-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 3rem auto;
            padding: 0 2rem;
        }
        
        .stat-card {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }
        
        .stat-number {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 1.1rem;
            color: #546e7a;
            font-weight: 600;
        }
        
        #graph-container {
            width: 100%;
            height: 700px;
            background: #fafafa;
            border-radius: 16px;
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .node {
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .node:hover {
            stroke-width: 3px;
        }
        
        .link {
            stroke: #999;
            stroke-opacity: 0.3;
            transition: all 0.3s;
        }
        
        .link:hover {
            stroke-opacity: 0.8;
            stroke-width: 3px;
        }
        
        .tooltip {
            position: absolute;
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            max-width: 300px;
            z-index: 1000;
        }
        
        .filter-panel {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            margin: 2rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .filter-group {
            margin-bottom: 1.5rem;
        }
        
        .filter-group label {
            display: block;
            font-weight: 700;
            color: #1a4d2e;
            margin-bottom: 0.5rem;
        }
        
        .filter-group select,
        .filter-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .hub-list {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            margin: 2rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .hub-item {
            padding: 1.5rem;
            border-left: 4px solid #667eea;
            background: #f0f4ff;
            margin-bottom: 1rem;
            border-radius: 8px;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .hub-item:hover {
            transform: translateX(8px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }
        
        .hub-title {
            font-weight: 700;
            color: #667eea;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .hub-connections {
            color: #546e7a;
            font-size: 0.9rem;
        }
        
        .legend {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <div id="nav-container"></div>
    <script>
        fetch('/components/navigation-standard.html')
            .then(r => r.text())
            .then(html => {
                document.getElementById('nav-container').innerHTML = html;
            });
    </script>

    <!-- Hero -->
    <section class="graph-hero">
        <h1 style="font-size: 3.5rem; margin-bottom: 1rem; font-weight: 800;">
            🧠 Knowledge Graph Explorer
        </h1>
        <p style="font-size: 1.3rem; opacity: 0.95; max-width: 800px; margin: 0 auto;">
            Discover the hidden connections between 25,861 educational resources. 
            Navigate learning pathways, find related content, and explore influence hubs.
        </p>
    </section>
    
    <!-- GraphRAG Statistics -->
    <div class="graph-stats">
        <div class="stat-card">
            <div class="stat-number">5,324</div>
            <div class="stat-label">Relationships</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">25,861</div>
            <div class="stat-label">Resources</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">272</div>
            <div class="stat-label">Learning Pathways</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">601</div>
            <div class="stat-label">Max Connections</div>
        </div>
    </div>
    
    <!-- Main Content -->
    <main style="max-width: 1400px; margin: 0 auto; padding: 2rem;">
        
        <!-- Relationship Type Legend -->
        <section style="background: white; padding: 2rem; border-radius: 16px; margin-bottom: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
            <h2 style="text-align: center; color: #1a4d2e; margin-bottom: 2rem;">Relationship Types</h2>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #10b981;"></div>
                    <span><strong>Same Subject</strong> (1,752)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3b82f6;"></div>
                    <span><strong>Same Year Level</strong> (1,000)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #f59e0b;"></div>
                    <span><strong>Has Handout</strong> (600)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ef4444;"></div>
                    <span><strong>Prerequisite</strong> (272)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #8b5cf6;"></div>
                    <span><strong>Unit Contains</strong> (500)</span>
                </div>
            </div>
        </section>
        
        <!-- Top Influence Hubs -->
        <section class="hub-list">
            <h2 style="color: #1a4d2e; margin-bottom: 1.5rem; font-size: 2rem;">
                🌟 Top Influence Hubs
            </h2>
            <p style="color: #666; margin-bottom: 2rem;">
                Resources with the most connections in our knowledge graph. These are central nodes that link to many other resources.
            </p>
            
            <div class="hub-item" onclick="highlightNode('y8-systems/lessons/lesson-3-1.html')">
                <div class="hub-title">🥇 Y8 Systems L3-1: Economic Systems</div>
                <div class="hub-connections">
                    <strong>601 total connections</strong> • 597 outgoing • 4 incoming
                </div>
                <div style="margin-top: 0.5rem; color: #546e7a; font-size: 0.85rem;">
                    The most connected resource in the entire platform! Links to economic concepts, real-world applications, and cross-curricular content.
                </div>
            </div>
            
            <div class="hub-item" onclick="highlightNode('/platforms.html')">
                <div class="hub-title">🥈 Platforms Page</div>
                <div class="hub-connections">
                    <strong>528 total connections</strong> • 526 outgoing • 2 incoming
                </div>
                <div style="margin-top: 0.5rem; color: #546e7a; font-size: 0.85rem;">
                    Central navigation hub connecting to resources across all subjects and year levels.
                </div>
            </div>
            
            <div class="hub-item" onclick="highlightNode('/virtual-marae.html')">
                <div class="hub-title">🥉 Virtual Marae</div>
                <div class="hub-connections">
                    <strong>480 total connections</strong> • 477 outgoing • 3 incoming
                </div>
                <div style="margin-top: 0.5rem; color: #546e7a; font-size: 0.85rem;">
                    Cultural integration hub linking to mātauranga Māori content across the platform.
                </div>
            </div>
            
            <div class="hub-item" onclick="highlightNode('y8-systems/lessons/lesson-5-1.html')">
                <div class="hub-title">Y8 Systems L5-1: Future Systems</div>
                <div class="hub-connections">
                    <strong>318 total connections</strong> • 309 outgoing • 9 incoming
                </div>
            </div>
            
            <div class="hub-item" onclick="highlightNode('y8-systems-unit.html')">
                <div class="hub-title">Y8 Systems Unit Overview</div>
                <div class="hub-connections">
                    <strong>291 total connections</strong> • 285 outgoing • 6 incoming
                </div>
            </div>
        </section>
        
        <!-- Interactive Graph (Coming Soon) -->
        <section style="background: white; padding: 3rem 2rem; border-radius: 16px; margin-bottom: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); text-align: center;">
            <h2 style="color: #1a4d2e; margin-bottom: 1rem;">🚧 Interactive Graph Visualization</h2>
            <p style="color: #666; margin-bottom: 2rem; max-width: 600px; margin-left: auto; margin-right: auto;">
                Visual network graph coming soon! Will show force-directed layout of all 5,324 relationships 
                with interactive zoom, pan, and node selection.
            </p>
            <div id="graph-container" style="display: flex; align-items: center; justify-content: center; color: #999;">
                <div>
                    <div style="font-size: 4rem; margin-bottom: 1rem;">📊</div>
                    <div style="font-size: 1.2rem;">Graph visualization loading...</div>
                    <div style="font-size: 0.9rem; margin-top: 0.5rem;">Rendering 5,324 connections</div>
                </div>
            </div>
        </section>
        
        <!-- Explore by Relationship Type -->
        <section style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 3rem 2rem; border-radius: 16px; margin-bottom: 2rem;">
            <h2 style="color: #0284c7; margin-bottom: 2rem; text-align: center;">
                🔍 Explore by Relationship Type
            </h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                <a href="/prerequisite-pathways.html" style="background: white; padding: 1.5rem; border-radius: 12px; text-decoration: none; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">
                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">📚</div>
                    <h3 style="color: #ef4444; font-weight: 700; margin-bottom: 0.5rem;">Learning Pathways</h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 0.75rem;">272 prerequisite relationships</p>
                    <p style="color: #546e7a; font-size: 0.85rem;">Discover logical learning sequences →</p>
                </a>
                
                <a href="/lesson-handout-pairs.html" style="background: white; padding: 1.5rem; border-radius: 12px; text-decoration: none; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">
                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">📄</div>
                    <h3 style="color: #f59e0b; font-weight: 700; margin-bottom: 0.5rem;">Lesson-Handout Pairs</h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 0.75rem;">1,100+ paired resources</p>
                    <p style="color: #546e7a; font-size: 0.85rem;">Find matching materials →</p>
                </a>
                
                <a href="/unit-structure-explorer.html" style="background: white; padding: 1.5rem; border-radius: 12px; text-decoration: none; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">
                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">🗂️</div>
                    <h3 style="color: #8b5cf6; font-weight: 700; margin-bottom: 0.5rem;">Unit Structures</h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 0.75rem;">500 unit-lesson relationships</p>
                    <p style="color: #546e7a; font-size: 0.85rem;">Browse complete units →</p>
                </a>
                
                <a href="/similar-resources-finder.html" style="background: white; padding: 1.5rem; border-radius: 12px; text-decoration: none; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">
                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">🔗</div>
                    <h3 style="color: #10b981; font-weight: 700; margin-bottom: 0.5rem;">Similar Resources</h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 0.75rem;">2,752 subject/year connections</p>
                    <p style="color: #546e7a; font-size: 0.85rem;">Find related content →</p>
                </a>
            </div>
        </section>
        
        <!-- GraphRAG API Access -->
        <section style="background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
            <h2 style="color: #1a4d2e; margin-bottom: 1rem;">🔌 Developer API</h2>
            <p style="color: #666; margin-bottom: 1.5rem;">
                Access the knowledge graph programmatically through our Supabase GraphRAG API.
            </p>
            <div style="background: #f5f5f5; padding: 1.5rem; border-radius: 8px; font-family: monospace; font-size: 0.9rem; overflow-x: auto;">
                <div style="color: #059669; margin-bottom: 0.5rem;">// Get all relationships for a resource</div>
                <div style="color: #1a4d2e;">const { data } = await supabase</div>
                <div style="color: #1a4d2e; margin-left: 2rem;">.from('graphrag_relationships')</div>
                <div style="color: #1a4d2e; margin-left: 2rem;">.select('*')</div>
                <div style="color: #1a4d2e; margin-left: 2rem;">.eq('source_path', 'y8-systems/lessons/lesson-3-1.html');</div>
            </div>
        </section>
        
    </main>
    
    <!-- Footer note -->
    <div style="text-align: center; padding: 3rem 2rem; color: #666;">
        <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">
            🌟 Knowledge Graph powered by GraphRAG intelligence
        </p>
        <p style="font-size: 0.9rem;">
            5,324 relationships • 25,861 resources • Always growing
        </p>
    </div>
    
    <script>
        function highlightNode(path) {
            alert(`Highlighting: ${path}\n\nThis resource will be centered in the interactive graph visualization (coming soon!)`);
        }
        
        // TODO: Add D3.js force-directed graph visualization
        // Will render all 5,324 relationships as an interactive network
    </script>
</body>
</html>
