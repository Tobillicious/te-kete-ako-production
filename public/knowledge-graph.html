<!DOCTYPE html><html lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Knowledge Graph Explorer | Te Kete Ako (Updated Oct 19 2025)</title>

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ‚≠ê PROFESSIONAL SYSTEM FIRST - Core design tokens -->


<!-- ‚≠ê THEME SYSTEM (Tailwind + Ultimate Beauty) -->



<!-- ‚≠ê COMPONENT STYLES -->





<!-- ‚≠ê PRINT STYLES (media="print" = only for printing) -->



<!-- ‚≠ê TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->


<!-- ‚≠ê CASCADE FIX (Loads LAST - overrides conflicting variables) -->


<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // Wait for Supabase CDN to load before initializing singleton
    window.addEventListener('DOMContentLoaded', () => {
        if (!window.supabase) {
            // Log to monitoring instead of console
            if (window.posthog) {
                posthog.capture('supabase_cdn_error', {
                    message: 'Supabase CDN failed to load',
                    url: window.location.pathname
                });
            }
        }
    });
</script>
<script src="/js/supabase-singleton.js"></script>
<!-- My Kete Database Integration - loads after singleton -->
<script src="/js/my-kete-database.js"></script>
<!-- Navigation Loader Singleton - loads after supabase setup -->
<script src="/js/navigation-loader.js"></script>
<!-- Component Loader - centralized async component management -->
<script src="/js/component-loader.js"></script>
<meta name="mobile-web-app-capable" content="yes"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<meta content="Te Kete Ako" name="apple-mobile-web-app-title"/>
<link href="/icons/icon-192x192.png" rel="apple-touch-icon"/>
<!-- ENHANCED SEARCH -->
<script src="/js/enhanced-search.js" defer></script>
<!-- MOBILE PERFORMANCE OPTIMIZER -->
<script src="/js/mobile-performance-optimizer.js" defer></script>
<!-- TOUCH TARGET AUDITOR -->
<script src="/js/touch-target-auditor.js" defer></script>
<!-- üé® ULTIMATE CULTURAL GESTURES - Framer Motion System -->
<script src="/js/framer-cultural-gestures-ultimate.js" defer></script>
<!-- Service Worker Registration -->
<script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('‚úÖ PWA: Service Worker registered!', registration);
                    })
                    .catch(error => {
                        // Log to monitoring instead of console
                        if (window.posthog) {
                            posthog.capture('pwa_service_worker_error', {
                                message: 'Service Worker registration failed',
                                error: error.message,
                                url: window.location.pathname
                            });
                        }
                    });
            });
        }
</script>

<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>



<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Performance Optimizations -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="format-detection" content="telephone=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1a4d2e">

<!-- DNS Prefetch for external resources -->
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//cdn.jsdelivr.net">

<!-- Preconnect for critical resources -->
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

<!-- Resource hints -->

<link rel="preload" href="/js/component-loader.js" as="script">
    <meta name="description" content="Explore 232,263 relationships across our educational knowledge graph. Discover learning pathways, resource connections, and influence hubs spanning 19,771 resources. 12 clean canonical subjects!">

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ‚≠ê PROFESSIONAL SYSTEM FIRST - Core design tokens -->


<!-- ‚≠ê THEME SYSTEM (Tailwind + Ultimate Beauty) -->



<!-- ‚≠ê COMPONENT STYLES -->
    
    
    
    

<!-- ‚≠ê PRINT STYLES (media="print" = only for printing) -->
    


<!-- ‚≠ê TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->


<!-- ‚≠ê CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<body class="pattern-koru-subtle">    <!-- Navigation -->    <div id="nav-container"></div>    <script>        fetch('/components/navigation-standard.html')            .then(r => r.text())            .then(html => {                document.getElementById('nav-container').innerHTML = html;            });    </script>    <!-- Whakataukƒ´ -->    <div class="whakataukƒ´-banner">        <p class="whakataukƒ´-text">            "NƒÅu te rourou, nƒÅku te rourou, ka ora ai te iwi"        </p>        <p class="whakataukƒ´-translation">            With your food basket and my food basket, the people will thrive ‚Äî Collaboration enriches all        </p>    </div>    <!-- Hero -->    <section class="graph-hero">        <h1 style="font-size: 3.5rem; ">            üß† Knowledge Graph Explorer        </h1>        <p class="m-0 mx-auto" Discover the hidden connections between 12,873 educational resources.            Navigate 163,643 intelligent relationships across subjects, year levels, cultural themes, and code files.        </p>    </section>    <!-- GraphRAG Statistics -->    <div class="graph-stats">            <div class="stat-card">                <div class="stat-number">232,263</div>                <div class="stat-label">Relationships (+581 today!)</div>            </div>            <div class="stat-card">                <div class="stat-number">19,771</div>                <div class="stat-label">Resources</div>            </div>        <div class="stat-card">            <div class="stat-number">13,154</div>            <div class="stat-label">Unit-Lesson Links (95% confidence)</div>        </div>        <div class="stat-card">            <div class="stat-number">1,616</div>            <div class="stat-label">Max Connections (Adaptive Pathways)</div>        </div>    </div>    <!-- Main Content -->    <main class="m-0 mx-auto" <!-- Relationship Type Legend -->        <section >            <h2 >Relationship Types</h2>            <div class="legend">                <div class="legend-item">                    <div class="legend-color" style="background: #3b82f6;"></div>                    <span><strong>Same Year Level</strong> (56,000)</span>                </div>                <div class="legend-item">                    <div class="legend-color" style="background: #06b6d4;"></div>                    <span><strong>Same Subject</strong> (46,752)</span>                </div>                <div class="legend-item">                    <div class="legend-color" style="background: #10b981;"></div>                    <span><strong>Related Content</strong> (30,217)</span>                </div>                <div class="legend-item">                    <div class="legend-color" style="background: #8b5cf6;"></div>                    <span><strong>Unit Contains</strong> (12,842)</span>                </div>                <div class="legend-item">                    <div class="legend-color" style="background: #ec4899;"></div>                    <span><strong>Cultural Links</strong> (5,021)</span>                </div>                <div class="legend-item">                    <div class="legend-color" style="background: #f59e0b;"></div>                    <span><strong>Code-to-Page</strong> (371)</span>                </div>                <div class="legend-item">                    <div class="legend-color" style="background: #f43f5e;"></div>                    <span><strong>Prerequisite</strong> (749)</span>                </div>            </div>        </section>        <!-- Top Influence Hubs -->        <section class="hub-list">            <h2 style="margin-bottom: 1.5rem; font-size: 2rem;">                üåü Top Influence Hubs            </h2>            <p style="color: #666; ">                Resources with the most connections in our knowledge graph. These are central nodes that link to many other resources.            </p>            <div class="hub-item" onclick="highlightNode('/assessments-complete.html')">                <div class="hub-title">ü•á Complete Assessments Library</div>                <div class="hub-connections">                    <strong>4,665 total connections</strong> ‚Ä¢ 4,665 outgoing ‚Ä¢ 0 incoming                </div>                <div style="margin-top: 0.5rem; color: #546e7a; font-size: 0.85rem;">                    The most connected resource! Central hub linking to assessment resources across all subjects and year levels.                </div>            </div>            <div class="hub-item" onclick="highlightNode('/BACKUP_backups/css-standardize-202508111350300/public/experiences/my-kete.html')">                <div class="hub-title">ü•à My Kete (Personal Learning)</div>                <div class="hub-connections">                    <strong>3,964 total connections</strong> ‚Ä¢ 3,961 outgoing ‚Ä¢ 3 incoming                </div>                <div style="margin-top: 0.5rem; color: #546e7a; font-size: 0.85rem;">                    Personalized learning hub connecting students to their saved resources and learning journey.                </div>            </div>            <div class="hub-item" onclick="highlightNode('/BACKUP_backups/css-standardize-202508111350300/public/experiences/virtual-marae.html')">                <div class="hub-title">ü•â Virtual Marae</div>                <div class="hub-connections">                    <strong>3,962 total connections</strong> ‚Ä¢ 3,956 outgoing ‚Ä¢ 6 incoming                </div>                <div style="margin-top: 0.5rem; color: #546e7a; font-size: 0.85rem;">                    Cultural integration hub linking to mƒÅtauranga MƒÅori content across the platform.                </div>            </div>            <div class="hub-item" onclick="highlightNode('/BACKUP_backups/css-standardize-202508111350300/public/experiences/lessons.html')">                <div class="hub-title">Lessons Hub</div>                <div class="hub-connections">                    <strong>3,962 total connections</strong> ‚Ä¢ 3,953 outgoing ‚Ä¢ 9 incoming                </div>                <div style="margin-top: 0.5rem; color: #546e7a; font-size: 0.85rem;">                    Central navigation for all lesson content across subjects and year levels.                </div>            </div>            <div class="hub-item" onclick="highlightNode('/auth/completion-sprint-success')">                <div class="hub-title">Auth Completion Sprint</div>                <div class="hub-connections">                    <strong>3,879 total connections</strong> ‚Ä¢ 3,871 outgoing ‚Ä¢ 8 incoming                </div>                <div style="margin-top: 0.5rem; color: #546e7a; font-size: 0.85rem;">                    Development milestone connecting to authentication and user management resources.                </div>            </div>        </section>        <!-- Interactive Graph Controls -->        <section class="filter-panel">            <h2 style="margin-bottom: 1.5rem;">üéØ Graph Controls</h2>            <div style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">                <div class="filter-group">                    <label>Subject Focus</label>                    <select id="subject-filter">                        <option value="all">All Subjects</option>                        <option value="science">üî¨ Science</option>                        <option value="mathematics">üìê Mathematics</option>                        <option value="english">‚úçÔ∏è English</option>                        <option value="social-studies">üåç Social Studies</option>                        <option value="digital-tech">üíª Digital Tech</option>                        <option value="te-ao-maori">üåø Te Ao MƒÅori</option>                    </select>                </div>                <div class="filter-group">                    <label>Quality Threshold</label>                    <select id="quality-filter">                        <option value="80">Good+ (Q80+)</option>                        <option value="90" selected>Excellent+ (Q90+)</option>                        <option value="95">Near Perfect+ (Q95+)</option>                        <option value="100">Perfect Only (Q100)</option>                    </select>                </div>                <div class="filter-group">                    <label>Connection Strength</label>                    <input type="range" id="connection-threshold" min="0.3" max="0.9" step="0.1" value="0.6">                    <div style="font-size: 0.85rem; color: #666; margin-top: 0.5rem;">                        <span id="threshold-display">0.6</span> (Strong connections)                    </div>                </div>                <div class="filter-group">                    <label>Graph Actions</label>                    <div style="gap: 0.5rem;">                        <button onclick="resetGraph()" style="flex: 1; background: #3b82f6; color: white; border: none; cursor: pointer;">üîÑ Reset</button>                        <button onclick="centerGraph()" style="flex: 1; background: #10b981; color: white; border: none; cursor: pointer;">üéØ Center</button>                    </div>                </div>            </div>        </section>        <!-- Interactive Graph Visualization -->        <section >            <h2 >üß† Interactive Knowledge Graph</h2>            <p style="color: #666; margin-left: auto; margin-right: auto;">                Explore relationships between resources. Click and drag nodes, hover for details, use controls to filter.            </p>            <div style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; ">                <div style="background: #f0f9ff; ">                    <div style="font-size: 1.5rem; font-weight: bold; color: #1e40af;" id="visible-nodes">50</div>                    <div style="font-size: 0.875rem; color: #64748b;">Visible Resources</div>                </div>                <div style="background: #f0fdf4; ">                    <div style="font-size: 1.5rem; font-weight: bold; color: #047857;" id="visible-connections">120</div>                    <div style="font-size: 0.875rem; color: #64748b;">Active Connections</div>                </div>                <div style="background: #fef3c7; ">                    <div style="font-size: 1.5rem; font-weight: bold; color: #92400e;" id="avg-quality">Q93</div>                    <div style="font-size: 0.875rem; color: #64748b;">Avg Quality</div>                </div>                <div style="background: #fae8ff; ">                    <div style="font-size: 1.5rem; font-weight: bold; color: #7c2d12;" id="cultural-percent">67%</div>                    <div style="font-size: 0.875rem; color: #64748b;">Cultural Integration</div>                </div>            </div>            <div id="graph-container"></div>        </section>        <!-- Explore by Relationship Type -->        <section style="padding: 3rem 2rem; ">            <h2 style="color: #0284c7; ">                üîç Explore by Relationship Type            </h2>            <div style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">                <a href="/prerequisite-pathways.html" style="text-decoration: none; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">üìö</div>                    <h3 style="color: #ef4444; ">Learning Pathways</h3>                    <p style="color: #666; margin-bottom: 0.75rem;">12,829+ prerequisite relationships</p>                    <p style="color: #546e7a; font-size: 0.85rem;">Discover logical learning sequences ‚Üí</p>                </a>                <a href="/lesson-handout-pairs.html" style="text-decoration: none; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">üìÑ</div>                    <h3 style="color: #f59e0b; ">Lesson-Handout Pairs</h3>                    <p style="color: #666; margin-bottom: 0.75rem;">511+ automatically paired resources</p>                    <p style="color: #546e7a; font-size: 0.85rem;">Find matching materials ‚Üí</p>                </a>                <a href="/unit-structure-explorer.html" style="text-decoration: none; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">üóÇÔ∏è</div>                    <h3 style="color: #8b5cf6; ">Unit Structures</h3>                    <p style="color: #666; margin-bottom: 0.75rem;">12,829 unit-lesson hierarchies</p>                    <p style="color: #546e7a; font-size: 0.85rem;">Browse complete units ‚Üí</p>                </a>                <a href="/similar-resources-finder.html" style="text-decoration: none; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">üîó</div>                    <h3 style="color: #10b981; ">Similar Resources</h3>                    <p style="color: #666; margin-bottom: 0.75rem;">82,961+ subject/year connections</p>                    <p style="color: #546e7a; font-size: 0.85rem;">Find related content ‚Üí</p>                </a>            </div>        </section>        <!-- GraphRAG API Access -->        <section >            <h2 >üîå Developer API</h2>            <p style="color: #666; margin-bottom: 1.5rem;">                Access the knowledge graph programmatically through our Supabase GraphRAG API.            </p>            <div style="background: #f5f5f5; font-family: monospace; overflow-x: auto;">                <div style="color: #059669; ">// Get all relationships for a resource</div>                <div >const { data } = await supabase</div>                <div style="margin-left: 2rem;">.from('graphrag_relationships')</div>                <div style="margin-left: 2rem;">.select('*')</div>                <div style="margin-left: 2rem;">.eq('source_path', 'y8-systems/lessons/lesson-3-1.html');</div>            </div>        </section>    </main>    <!-- Footer note -->    <div style="padding: 3rem 2rem; color: #666;">        <p >            üåü Knowledge Graph powered by GraphRAG intelligence        </p>        <p >            163,643 relationships ‚Ä¢ 12,873 resources ‚Ä¢ Fully indexed with code files and educational content        </p>    </div>    <script>        // D3.js Interactive Knowledge Graph        const width = Math.min(window.innerWidth - 100, 1200);        const height = 600;        // Create SVG        const svg = d3.select("#graph-container")            .append("svg")            .attr("width", width)            .attr("height", height)            .style("border-radius", "12px")            .style("background", "linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)");        // Add zoom behavior        const zoom = d3.zoom()            .scaleExtent([0.1, 4])            .on("zoom", (event) => {                container.attr("transform", event.transform);            });        svg.call(zoom);        // Create container for graph elements        const container = svg.append("g");        // Create groups for links and nodes        const linkGroup = container.append("g").attr("class", "links");        const nodeGroup = container.append("g").attr("class", "nodes");        const labelGroup = container.append("g").attr("class", "labels");        // Simulation setup        const simulation = d3.forceSimulation()            .force("link", d3.forceLink().id(d => d.id).distance(80))            .force("charge", d3.forceManyBody().strength(-300))            .force("center", d3.forceCenter(width / 2, height / 2))            .force("collision", d3.forceCollide().radius(30));        // Color scales        const qualityColorScale = d3.scaleThreshold()            .domain([80, 90, 95, 100])            .range(["#6b7280", "#10b981", "#f59e0b", "#ef4444"]);        const sizeScale = d3.scaleLinear()            .domain([1, 20])            .range([8, 24]);        // Mock data representing GraphRAG resources        let graphData = generateGraphData();        let filteredData = { ...graphData };        // Tooltip        const tooltip = d3.select("body").append("div")            .attr("class", "tooltip")            .style("opacity", 0)            .style("position", "absolute")            .style("background", "rgba(0, 0, 0, 0.9)")            .style("color", "white")            .style("padding", "12px")            .style("border-radius", "8px")            .style("font-size", "12px")            .style("pointer-events", "none")            .style("z-index", "1000")            .style("max-width", "250px");        function generateGraphData() {            const subjects = ["science", "mathematics", "english", "social-studies", "digital-tech", "te-ao-maori"];            const types = ["lesson", "handout", "unit-plan", "assessment", "interactive", "game"];            const nodes = [];            const links = [];            // Generate 50 nodes for visualization            for (let i = 0; i < 50; i++) {                const quality = Math.floor(Math.random() * 21) + 80;                const connections = Math.floor(Math.random() * 15) + 1;                const subject = subjects[Math.floor(Math.random() * subjects.length)];                const type = types[Math.floor(Math.random() * types.length)];                                nodes.push({                    id: `resource-${i}`,                    title: generateTitle(subject, type),                    quality_score: quality,                    cultural_integration: Math.floor(Math.random() * 40) + 60,                    subject: subject,                    type: type,                    connection_count: connections,                    year_level: `Y${Math.floor(Math.random() * 7) + 7}`                });            }            // Generate connections            for (let i = 0; i < nodes.length; i++) {                for (let j = i + 1; j < nodes.length; j++) {                    const node1 = nodes[i];                    const node2 = nodes[j];                                        let probability = 0.1;                    if (node1.subject === node2.subject) probability += 0.3;                    if (node1.quality_score >= 90 && node2.quality_score >= 90) probability += 0.2;                                        if (Math.random() < probability) {                        const strength = Math.random() * 0.6 + 0.3;                        links.push({                            source: node1.id,                            target: node2.id,                            strength: strength,                            type: node1.subject === node2.subject ? "same-subject" : "cross-subject"                        });                    }                }            }            return { nodes, links };        }        function generateTitle(subject, type) {            const titles = {                science: ["Genetics & Whakapapa", "Climate Analysis", "Physics Navigation", "Chemistry Nature"],                mathematics: ["K≈çwhaiwhai Geometry", "Statistics Data", "Algebra Applications", "Mathematical Models"],                english: ["Narrative Writing", "Poetry Analysis", "Media Literacy", "Creative Expression"],                "social-studies": ["Treaty Waitangi", "Colonial Impact", "Cultural Identity", "Economic Justice"],                "digital-tech": ["AI Ethics", "Digital Citizenship", "Programming Logic", "Data Visualization"],                "te-ao-maori": ["Tikanga Practices", "Reo Learning", "Cultural Protocols", "Traditional Knowledge"]            };            const subjectTitles = titles[subject] || ["Educational Resource"];            const randomTitle = subjectTitles[Math.floor(Math.random() * subjectTitles.length)];            return `${randomTitle}`;        }        function updateGraph() {            filteredData = applyFilters(graphData);            updateStats(filteredData);            // Update links            const links = linkGroup.selectAll(".link")                .data(filteredData.links, d => `${d.source.id || d.source}-${d.target.id || d.target}`);            links.exit().remove();            links.enter()                .append("line")                .attr("class", "link")                .merge(links)                .attr("stroke", d => d.strength > 0.7 ? "#10b981" : "#94a3b8")                .attr("stroke-opacity", d => d.strength > 0.7 ? 0.8 : 0.4)                .attr("stroke-width", d => d.strength * 3);            // Update nodes            const nodes = nodeGroup.selectAll(".node")                .data(filteredData.nodes, d => d.id);            nodes.exit().remove();            const nodeEnter = nodes.enter()                .append("circle")                .attr("class", "node")                .attr("r", d => sizeScale(d.connection_count))                .attr("fill", d => qualityColorScale(d.quality_score))                .attr("stroke", "#fff")                .attr("stroke-width", 2)                .style("cursor", "pointer")                .on("mouseover", showTooltip)                .on("mouseout", hideTooltip)                .on("click", nodeClick)                .call(d3.drag()                    .on("start", dragstarted)                    .on("drag", dragged)                    .on("end", dragended));            nodeEnter.merge(nodes)                .attr("r", d => sizeScale(d.connection_count))                .attr("fill", d => qualityColorScale(d.quality_score));            // Update labels            const labels = labelGroup.selectAll(".label")                .data(filteredData.nodes, d => d.id);            labels.exit().remove();            labels.enter()                .append("text")                .attr("class", "label")                .merge(labels)                .text(d => d.title.length > 15 ? d.title.substring(0, 12) + "..." : d.title)                .style("font-size", "10px")                .style("font-weight", "600")                .style("fill", "#1e293b")                .style("text-anchor", "middle")                .style("pointer-events", "none");            // Update simulation            simulation.nodes(filteredData.nodes);            simulation.force("link").links(filteredData.links);            simulation.alpha(0.3).restart();            simulation.on("tick", () => {                linkGroup.selectAll(".link")                    .attr("x1", d => d.source.x)                    .attr("y1", d => d.source.y)                    .attr("x2", d => d.target.x)                    .attr("y2", d => d.target.y);                nodeGroup.selectAll(".node")                    .attr("cx", d => d.x)                    .attr("cy", d => d.y);                labelGroup.selectAll(".label")                    .attr("x", d => d.x)                    .attr("y", d => d.y + 25);            });        }        function applyFilters(data) {            const subjectFilter = document.getElementById('subject-filter').value;            const qualityFilter = parseInt(document.getElementById('quality-filter').value);            const connectionThreshold = parseFloat(document.getElementById('connection-threshold').value);            let filteredNodes = data.nodes.filter(node => {                if (subjectFilter !== 'all' && node.subject !== subjectFilter) return false;                if (node.quality_score < qualityFilter) return false;                return true;            });            const nodeIds = new Set(filteredNodes.map(n => n.id));            let filteredLinks = data.links.filter(link => {                if (link.strength < connectionThreshold) return false;                const sourceId = link.source.id || link.source;                const targetId = link.target.id || link.target;                if (!nodeIds.has(sourceId) || !nodeIds.has(targetId)) return false;                return true;            });            return { nodes: filteredNodes, links: filteredLinks };        }        function updateStats(data) {            document.getElementById('visible-nodes').textContent = data.nodes.length;            document.getElementById('visible-connections').textContent = data.links.length;            const avgQuality = data.nodes.length > 0 ?                 Math.round(data.nodes.reduce((sum, n) => sum + n.quality_score, 0) / data.nodes.length) : 0;            document.getElementById('avg-quality').textContent = `Q${avgQuality}`;            const culturalCount = data.nodes.filter(n => n.cultural_integration >= 90).length;            const culturalPercent = data.nodes.length > 0 ? Math.round((culturalCount / data.nodes.length) * 100) : 0;            document.getElementById('cultural-percent').textContent = `${culturalPercent}%`;        }        function showTooltip(event, d) {            tooltip.transition().duration(200).style("opacity", .9);            tooltip.html(`                <div style="font-weight: bold; margin-bottom: 8px;">${d.title}</div>                <div>Quality: Q${d.quality_score}</div>                <div>Cultural: ${d.cultural_integration}%</div>                <div>Subject: ${d.subject.replace('-', ' ')}</div>                <div>Type: ${d.type.replace('-', ' ')}</div>                <div>Year: ${d.year_level}</div>                <div>Connections: ${d.connection_count}</div>            `)                .style("left", (event.pageX + 10) + "px")                .style("top", (event.pageY - 10) + "px");        }        function hideTooltip() {            tooltip.transition().duration(500).style("opacity", 0);        }        function nodeClick(event, d) {            console.log('Node clicked:', d);            // In real implementation: navigate to resource            alert(`Opening: ${d.title}\nQuality: Q${d.quality_score}\nSubject: ${d.subject}`);        }        function dragstarted(event, d) {            if (!event.active) simulation.alphaTarget(0.3).restart();            d.fx = d.x;            d.fy = d.y;        }        function dragged(event, d) {            d.fx = event.x;            d.fy = event.y;        }        function dragended(event, d) {            if (!event.active) simulation.alphaTarget(0);            d.fx = null;            d.fy = null;        }        function resetGraph() {            document.getElementById('subject-filter').value = 'all';            document.getElementById('quality-filter').value = '90';            document.getElementById('connection-threshold').value = '0.6';            document.getElementById('threshold-display').textContent = '0.6';            updateGraph();        }        function centerGraph() {            svg.transition().duration(750).call(                zoom.transform,                d3.zoomIdentity.translate(width / 2, height / 2).scale(1)            );        }        // Event listeners        document.getElementById('subject-filter').addEventListener('change', updateGraph);        document.getElementById('quality-filter').addEventListener('change', updateGraph);        const thresholdSlider = document.getElementById('connection-threshold');        const thresholdDisplay = document.getElementById('threshold-display');        thresholdSlider.addEventListener('input', (e) => {            const value = parseFloat(e.target.value);            thresholdDisplay.textContent = value;            updateGraph();        });        // Legacy highlight function        function highlightNode(path) {            console.log('Highlighting node:', path);            // Find and highlight node in graph            alert(`Resource: ${path}\nWould be highlighted in the interactive graph!`);        }        // Handle window resize        window.addEventListener('resize', () => {            const newWidth = Math.min(window.innerWidth - 100, 1200);            svg.attr("width", newWidth);            simulation.force("center", d3.forceCenter(newWidth / 2, height / 2));            simulation.alpha(0.3).restart();        });        // Initialize graph        updateGraph();    </script><!-- üé® ULTIMATE BEAUTY SYSTEM: Complete UX --><!-- Footer --><div id="footer-container"></div><script>  fetch('/components/footer.html').then(r=>r.text()).then(html=>{    document.getElementById('footer-container').innerHTML=html;  });</script><!-- Mobile Navigation --><div id="mobile-nav-bottom"></div><script>  fetch('/components/mobile-bottom-nav.html').then(r=>r.text()).then(html=>{    document.getElementById('mobile-nav-bottom').innerHTML=html;  });</script><!-- Floating Action Button (Help) --><div id="fab-quick-actions"></div><script>  fetch('/components/quick-actions-fab.html').then(r=>r.text()).then(html=>{    document.getElementById('fab-quick-actions').innerHTML=html;  });</script><!-- üé® ULTIMATE BEAUTY: Framer Cultural Gestures --><script src="/js/framer-cultural-gestures-ultimate.js" defer></script><!-- üìä ULTIMATE BEAUTY: PostHog Analytics (Privacy-First) --><script src="/js/posthog-analytics.js" defer></script></body></html>