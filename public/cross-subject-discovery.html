<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross-Subject Discovery | GraphRAG Intelligence | Te Kete Ako</title>
    <meta name="description" content="Explore 1,332+ cross-curricular pathways discovered by GraphRAG. Interactive visualization of Science×Math, English×Digital Tech, and more connections across 17,277 resources.">
    
    <!-- Professional Design System -->
    <link rel="stylesheet" href="/css/te-kete-professional.css">
    
    
    
    
    
    
</head>
<body class="pattern-koru-subtle">
    <!-- Navigation -->
    <div id="nav-container"></div>
    <script>
        fetch('/components/navigation-standard.html')
            .then(r => r.text())
            .then(html => document.getElementById('nav-container').innerHTML = html);
    </script>

    <!-- Hero Section -->
    <section style="background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); color: white; padding: 4rem 2rem; text-align: center;">
        <div style="max-width: 1000px; margin: 0 auto;">
            <div style="display: inline-block; background: rgba(255,255,255,0.2); padding: 0.5rem 1.5rem; border-radius: 24px; margin-bottom: 1rem;">
                <span style="font-weight: 700; font-size: 0.9rem;">🧠 GRAPHRAG INTELLIGENCE</span>
            </div>
            <h1 style="font-size: 3rem; font-weight: 800; margin-bottom: 1rem;">Cross-Subject Discovery</h1>
            <p style="font-size: 1.25rem; opacity: 0.95; margin-bottom: 1rem;">
                Explore thousands of cross-curricular connections automatically discovered by our knowledge graph
            </p>
            <div style="display: flex; gap: 2rem; justify-content: center; flex-wrap: wrap; margin-top: 2rem;">
                <div>
                    <div style="font-size: 2.5rem; font-weight: 800;">1,332</div>
                    <div style="opacity: 0.9;">Science→Math</div>
                </div>
                <div>
                    <div style="font-size: 2.5rem; font-weight: 800;">632</div>
                    <div style="opacity: 0.9;">Math→Science</div>
                </div>
                <div>
                    <div style="font-size: 2.5rem; font-weight: 800;">433</div>
                    <div style="opacity: 0.9;">Digital→Science</div>
                </div>
                <div>
                    <div style="font-size: 2.5rem; font-weight: 800;">407</div>
                    <div style="opacity: 0.9;">English→Math</div>
                </div>
            </div>
        </div>
    </section>

    <main style="max-width: 1200px; margin: 3rem auto; padding: 0 2rem;">
        
        <!-- Interactive Filter -->
        <section style="background: white; padding: 2rem; border-radius: 16px; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
            <h2 style="font-size: 1.75rem; color: #1a4d2e; margin-bottom: 1.5rem; text-align: center;">
                🔍 Explore Cross-Curricular Pathways
            </h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                <div>
                    <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #374151;">From Subject:</label>
                    <select id="fromSubject" style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
                        <option value="">All Subjects</option>
                        <option value="Science">🔬 Science</option>
                        <option value="Mathematics">📐 Mathematics</option>
                        <option value="English">📝 English</option>
                        <option value="Digital Technologies">💻 Digital Technologies</option>
                        <option value="Social Studies">🏛️ Social Studies</option>
                    </select>
                </div>
                <div>
                    <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #374151;">To Subject:</label>
                    <select id="toSubject" style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
                        <option value="">All Subjects</option>
                        <option value="Science">🔬 Science</option>
                        <option value="Mathematics">📐 Mathematics</option>
                        <option value="English">📝 English</option>
                        <option value="Digital Technologies">💻 Digital Technologies</option>
                        <option value="Social Studies">🏛️ Social Studies</option>
                    </select>
                </div>
            </div>
            <button onclick="filterConnections()" style="width: 100%; background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; padding: 1rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 700; cursor: pointer; transition: transform 0.2s;">
                🔍 Discover Connections
            </button>
        </section>

        <!-- Connection Network Visualization -->
        <section style="background: white; padding: 3rem 2rem; border-radius: 16px; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
            <h2 style="font-size: 2rem; color: #1a4d2e; margin-bottom: 1rem; text-align: center;">
                🌐 Connection Network
            </h2>
            <p style="text-align: center; color: #666; margin-bottom: 2rem;">
                Visual map of cross-subject relationships discovered by GraphRAG
            </p>
            <div id="networkViz" style="min-height: 400px; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;"></div>
        </section>

        <!-- Top Pathways -->
        <section style="margin-bottom: 3rem;">
            <h2 style="font-size: 2rem; color: #1a4d2e; margin-bottom: 2rem; text-align: center;">
                🏆 Top Cross-Subject Pathways
            </h2>
            <div id="topPathways" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;"></div>
        </section>

        <!-- Sample Resources -->
        <section id="sampleResources" style="display: none; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 3rem 2rem; border-radius: 16px; margin-bottom: 3rem; border: 2px solid #3b82f6;">
            <h2 style="font-size: 2rem; color: #1e40af; margin-bottom: 1rem; text-align: center;">
                📚 Sample Resources
            </h2>
            <p id="pathwayDescription" style="text-align: center; color: #475569; margin-bottom: 2rem; font-size: 1.1rem;"></p>
            <div id="resourceGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;"></div>
        </section>

        <!-- Build Your Own Pathway -->
        <section style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 3rem 2rem; border-radius: 16px; border: 2px solid #f59e0b;">
            <div style="text-align: center; margin-bottom: 2rem;">
                <div style="display: inline-block; background: #f59e0b; color: white; padding: 0.5rem 1.5rem; border-radius: 20px; font-weight: 700; margin-bottom: 1rem;">
                    🛠️ BUILD YOUR OWN
                </div>
                <h2 style="font-size: 2rem; color: #92400e; margin-bottom: 0.5rem;">
                    Create a Custom Learning Pathway
                </h2>
                <p style="color: #78350f; font-size: 1rem;">
                    Design integrated units that bridge multiple subjects
                </p>
            </div>
            <div style="background: white; padding: 2rem; border-radius: 12px;">
                <form id="pathwayBuilder" style="display: grid; gap: 1.5rem;">
                    <div>
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Primary Subject:</label>
                        <select id="primarySubject" style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px;">
                            <option value="Science">🔬 Science</option>
                            <option value="Mathematics">📐 Mathematics</option>
                            <option value="English">📝 English</option>
                            <option value="Digital Technologies">💻 Digital Technologies</option>
                            <option value="Social Studies">🏛️ Social Studies</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Connect With:</label>
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 0.75rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" value="Science" name="connectSubjects"> Science
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" value="Mathematics" name="connectSubjects"> Math
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" value="English" name="connectSubjects"> English
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" value="Digital Technologies" name="connectSubjects"> Digital Tech
                            </label>
                        </div>
                    </div>
                    <div>
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Year Level:</label>
                        <select id="yearLevel" style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px;">
                            <option value="7-8">Years 7-8</option>
                            <option value="9-10">Years 9-10</option>
                            <option value="11-13">Years 11-13</option>
                        </select>
                    </div>
                    <button type="button" onclick="buildPathway()" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 1rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 700; cursor: pointer;">
                        🚀 Generate Pathway
                    </button>
                </form>
                <div id="pathwayResult" style="margin-top: 2rem; padding: 1.5rem; background: #f0fdf4; border-radius: 8px; border-left: 4px solid #10b981; display: none;">
                    <h3 style="color: #065f46; margin-bottom: 1rem;">✅ Your Custom Pathway:</h3>
                    <div id="pathwayDetails"></div>
                </div>
            </div>
        </section>

        <!-- Why Cross-Subject Learning Matters -->
        <section style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); padding: 3rem 2rem; border-radius: 16px; margin: 3rem 0;">
            <h2 style="font-size: 2rem; color: #1a4d2e; margin-bottom: 2rem; text-align: center;">
                💡 Why Cross-Subject Learning Matters
            </h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
                <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">🧠</div>
                    <h3 style="color: #065f46; font-weight: 700; margin-bottom: 0.5rem;">Deeper Understanding</h3>
                    <p style="color: #6b7280; font-size: 0.95rem;">Students see how concepts connect across disciplines, leading to more robust learning</p>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">🎯</div>
                    <h3 style="color: #065f46; font-weight: 700; margin-bottom: 0.5rem;">Real-World Relevance</h3>
                    <p style="color: #6b7280; font-size: 0.95rem;">Problems in the real world don't exist in subject silos—cross-curricular learning reflects reality</p>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">🌟</div>
                    <h3 style="color: #065f46; font-weight: 700; margin-bottom: 0.5rem;">NZ Curriculum Alignment</h3>
                    <p style="color: #6b7280; font-size: 0.95rem;">The NZ Curriculum emphasizes connections across learning areas and key competencies</p>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
                    <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">🚀</div>
                    <h3 style="color: #065f46; font-weight: 700; margin-bottom: 0.5rem;">GraphRAG Advantage</h3>
                    <p style="color: #6b7280; font-size: 0.95rem;">Our AI automatically discovers connections you might miss—surfacing 241,256 relationships</p>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <div id="footer-container"></div>
    <script>
        fetch('/components/footer.html').then(r=>r.text()).then(html=>{
            document.getElementById('footer-container').innerHTML=html;
        });
    </script>

    <script>
        // Cross-subject connection data (from GraphRAG analysis)
        const connections = {
            'Science→Mathematics': { count: 1332, desc: 'Data analysis, mathematical modeling, statistics in scientific inquiry', color: '#3b82f6' },
            'Mathematics→Science': { count: 632, desc: 'Mathematical foundations for scientific concepts, measurement, patterns', color: '#10b981' },
            'Digital Technologies→Science': { count: 433, desc: 'Data collection, sensors, environmental monitoring, computational thinking', color: '#7c3aed' },
            'English→Mathematics': { count: 407, desc: 'Problem-solving explanations, mathematical writing, communication of ideas', color: '#dc2626' },
            'Digital Technologies→English': { count: 404, desc: 'Digital storytelling, media literacy, online communication', color: '#ec4899' },
            'Science→English': { count: 350, desc: 'Scientific writing, research skills, explanation texts', color: '#14b8a6' },
            'Mathematics→Digital Technologies': { count: 293, desc: 'Computational thinking, algorithms, data structures', color: '#f59e0b' },
            'English→Digital Technologies': { count: 197, desc: 'Digital literacy, media analysis, online communication', color: '#8b5cf6' },
            'Science→Digital Technologies': { count: 388, desc: 'Data science, sensors, coding for science', color: '#06b6d4' },
            'Mathematics→English': { count: 278, desc: 'Explaining mathematical reasoning, word problems, communication', color: '#ef4444' },
            'Social Studies→Science': { count: 245, desc: 'Environmental policy, climate action, data analysis', color: '#10b981' },
            'Mathematics→Social Studies': { count: 168, desc: 'Statistics, demographics, economic modeling', color: '#f97316' }
        };

        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            renderNetworkViz();
            renderTopPathways();
            
            // Check URL parameters
            const params = new URLSearchParams(window.location.search);
            const from = params.get('from');
            const to = params.get('to');
            if (from && to) {
                document.getElementById('fromSubject').value = from;
                document.getElementById('toSubject').value = to;
                filterConnections();
            }
        });

        function renderNetworkViz() {
            const container = document.getElementById('networkViz');
            const topConnections = Object.entries(connections)
                .sort((a, b) => b[1].count - a[1].count)
                .slice(0, 6);
            
            container.innerHTML = topConnections.map(([key, data]) => {
                const [from, to] = key.split('→');
                return `
                    <div style="background: white; padding: 1.5rem; border-radius: 12px; border-left: 4px solid ${data.color}; box-shadow: 0 2px 12px rgba(0,0,0,0.08); cursor: pointer; transition: transform 0.2s;" onclick="showPathway('${from}', '${to}')">
                        <div style="font-size: 2rem; font-weight: 800; color: ${data.color}; margin-bottom: 0.5rem;">${data.count}</div>
                        <div style="font-weight: 700; color: #1f2937; margin-bottom: 0.5rem;">${key}</div>
                        <div style="color: #6b7280; font-size: 0.85rem;">${data.desc}</div>
                        <div style="margin-top: 0.75rem; color: ${data.color}; font-weight: 600; font-size: 0.9rem;">Explore →</div>
                    </div>
                `;
            }).join('');
        }

        function renderTopPathways() {
            const container = document.getElementById('topPathways');
            const allConnections = Object.entries(connections)
                .sort((a, b) => b[1].count - a[1].count);
            
            container.innerHTML = allConnections.map(([key, data]) => {
                const [from, to] = key.split('→');
                return `
                    <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-top: 4px solid ${data.color}; cursor: pointer; transition: transform 0.2s;" onclick="showPathway('${from}', '${to}')" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                            <div style="font-size: 1.25rem; font-weight: 700; color: #1f2937;">${key}</div>
                            <div style="background: ${data.color}; color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">${data.count}</div>
                        </div>
                        <p style="color: #6b7280; font-size: 0.9rem; margin-bottom: 0.75rem;">${data.desc}</p>
                        <div style="color: ${data.color}; font-weight: 600;">View Resources →</div>
                    </div>
                `;
            }).join('');
        }

        function filterConnections() {
            const from = document.getElementById('fromSubject').value;
            const to = document.getElementById('toSubject').value;
            
            if (from && to) {
                showPathway(from, to);
            } else {
                alert('Please select both From and To subjects');
            }
        }

        function showPathway(from, to) {
            const key = `${from}→${to}`;
            const data = connections[key];
            
            if (!data) {
                alert(`Connection ${key} not found in current dataset. Try exploring other combinations!`);
                return;
            }

            // Scroll to sample resources
            const section = document.getElementById('sampleResources');
            section.style.display = 'block';
            section.scrollIntoView({ behavior: 'smooth', block: 'start' });

            // Update description
            document.getElementById('pathwayDescription').innerHTML = `
                <strong style="color: #1e40af; font-size: 1.3rem;">${from} → ${to}</strong><br>
                ${data.count.toLocaleString()} connections discovered by GraphRAG<br>
                <span style="font-size: 0.95rem;">${data.desc}</span>
            `;

            // Generate sample resources (placeholder - would query Supabase in production)
            const resourceGrid = document.getElementById('resourceGrid');
            resourceGrid.innerHTML = `
                <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
                    <div style="font-size: 1.5rem; margin-bottom: 0.75rem;">📚</div>
                    <h4 style="color: #1f2937; font-weight: 700; margin-bottom: 0.5rem;">Sample Lesson Resources</h4>
                    <p style="color: #6b7280; font-size: 0.9rem;">GraphRAG is connecting you to relevant resources...</p>
                    <a href="/${from.toLowerCase()}-hub.html" style="display: inline-block; margin-top: 0.75rem; color: #3b82f6; font-weight: 600;">Browse ${from} Hub →</a>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
                    <div style="font-size: 1.5rem; margin-bottom: 0.75rem;">🎯</div>
                    <h4 style="color: #1f2937; font-weight: 700; margin-bottom: 0.5rem;">Integrated Units</h4>
                    <p style="color: #6b7280; font-size: 0.9rem;">Explore units that combine ${from} and ${to}...</p>
                    <a href="/browse-units.html" style="display: inline-block; margin-top: 0.75rem; color: #3b82f6; font-weight: 600;">Browse All Units →</a>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
                    <div style="font-size: 1.5rem; margin-bottom: 0.75rem;">🔗</div>
                    <h4 style="color: #1f2937; font-weight: 700; margin-bottom: 0.5rem;">Connection Strength</h4>
                    <p style="color: #6b7280; font-size: 0.9rem;"><strong>${data.count}</strong> automatic connections found by analyzing 17,277 resources</p>
                    <p style="color: #6b7280; font-size: 0.85rem; margin-top: 0.5rem;">These pathways were discovered through semantic analysis of content, not manual tagging</p>
                </div>
            `;
        }

        function buildPathway() {
            const primary = document.getElementById('primarySubject').value;
            const checkboxes = document.querySelectorAll('input[name="connectSubjects"]:checked');
            const connected = Array.from(checkboxes).map(cb => cb.value);
            const yearLevel = document.getElementById('yearLevel').value;

            if (connected.length === 0) {
                alert('Please select at least one subject to connect with');
                return;
            }

            // Show result
            const resultDiv = document.getElementById('pathwayResult');
            const detailsDiv = document.getElementById('pathwayDetails');
            
            resultDiv.style.display = 'block';
            detailsDiv.innerHTML = `
                <div style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                    <h4 style="color: #065f46; font-weight: 700; margin-bottom: 0.75rem;">📚 Your Integrated Learning Pathway</h4>
                    <p><strong>Primary Subject:</strong> ${primary}</p>
                    <p><strong>Connected Subjects:</strong> ${connected.join(', ')}</p>
                    <p><strong>Year Level:</strong> ${yearLevel}</p>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #065f46; font-weight: 700; margin-bottom: 0.75rem;">🚀 Next Steps:</h4>
                    <ol style="color: #374151; line-height: 1.8;">
                        <li>Browse the <a href="/${primary.toLowerCase()}-hub.html" style="color: #3b82f6; font-weight: 600;">${primary} Hub</a> for primary resources</li>
                        ${connected.map(subject => 
                            `<li>Explore <a href="/cross-subject-discovery.html?from=${primary}&to=${subject}" style="color: #3b82f6; font-weight: 600;">${primary}→${subject} connections</a></li>`
                        ).join('')}
                        <li>Check <a href="/browse-units.html" style="color: #3b82f6; font-weight: 600;">integrated units</a> that combine these subjects</li>
                    </ol>
                </div>
            `;

            // Scroll to result
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>

    <!-- PostHog Analytics -->
    <script src="/js/posthog-analytics.js" defer></script>
    <script src="/js/framer-cultural-gestures-ultimate.js" defer></script>
</body>
</html>