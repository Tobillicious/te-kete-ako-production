<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Cross-Subject Discovery | GraphRAG Intelligence | Te Kete Ako</title>    <meta name="description" content="Discover interdisciplinary connections across 19,737 resources using GraphRAG intelligence. Find how mathematics connects to science, English to cultural studies, and more."><!-- Professional Design System -->    <!-- üé® ULTIMATE BEAUTY SYSTEM - Te Kete Ako Design Excellence -->     <link rel="stylesheet" href="/css/te-kete-professional.css">
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/mobile-revolution.css">
    <link rel="stylesheet" href="/css/print.css" media="print"> <script src="https://cdn.tailwindcss.com"></script> <script src="/tailwind.config.ultimate.js"></script> <!-- END ULTIMATE BEAUTY SYSTEM --></head><body class="pattern-koru-subtle">    <!-- Navigation -->    <div id="nav-container"></div>    <script>        fetch('/components/navigation-standard.html')            .then(r => r.text())            .then(html => document.getElementById('nav-container').innerHTML = html);    </script>    <!-- Hero -->    <section class="hero-discovery">        <div style="position: relative; z-index: 2; max-width: 1000px; margin: 0 auto;">            <div style="display: inline-block; background: rgba(255,255,255,0.2); padding: 0.5rem 1.5rem; border-radius: 24px; margin-bottom: 1rem;">                <span style="color: white; font-weight: 700; font-size: 0.9rem;">üß† GRAPHRAG INTELLIGENCE</span>            </div>            <h1 style="font-size: 4rem; margin-bottom: 1rem; font-weight: 800;">üîó Cross-Subject Discovery</h1>            <p style="font-size: 1.5rem; opacity: 0.95; margin-bottom: 2rem;">                Explore interdisciplinary connections across thousands of resources            </p>            <div style="display: flex; gap: 2rem; justify-content: center; flex-wrap: wrap;">                <div style="background: rgba(255,255,255,0.2); padding: 1rem 2rem; border-radius: 12px;">                    <div id="stat-relationships" style="font-size: 2rem; font-weight: 800;">...</div>                    <div style="font-size: 0.9rem; opacity: 0.9;">Total Relationships</div>                </div>                <div style="background: rgba(255,255,255,0.2); padding: 1rem 2rem; border-radius: 12px;">                    <div id="stat-cross-curricular" style="font-size: 2rem; font-weight: 800;">...</div>                    <div style="font-size: 0.9rem; opacity: 0.9;">Cross-Curricular Links</div>                </div>                <div style="background: rgba(255,255,255,0.2); padding: 1rem 2rem; border-radius: 12px;">                    <div id="stat-cultural" style="font-size: 2rem; font-weight: 800;">...</div>                    <div style="font-size: 0.9rem; opacity: 0.9;">Cultural Connections</div>                </div>            </div>        </div>    </section>    <main style="max-width: 1200px; margin: 3rem auto; padding: 0 2rem;">        <!-- What is Cross-Subject Discovery? -->        <section style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 3rem; border-radius: 16px; margin-bottom: 3rem;">            <h2 style="font-size: 2.5rem; color: #0284c7; margin-bottom: 1.5rem; text-align: center;">                üéØ What is Cross-Subject Discovery?            </h2>            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-top: 2rem;">                <div style="text-align: center;">                    <div style="font-size: 3rem; margin-bottom: 1rem;">üî¨‚û°Ô∏èüìä</div>                    <h3 style="color: #0284c7; font-size: 1.25rem; margin-bottom: 0.5rem;">Science √ó Mathematics</h3>                    <p style="color: #546e7a;">Climate data visualization, statistical ecology, physics calculations</p>                </div>                <div style="text-align: center;">                    <div style="font-size: 3rem; margin-bottom: 1rem;">üìù‚û°Ô∏èüåç</div>                    <h3 style="color: #0284c7; font-size: 1.25rem; margin-bottom: 0.5rem;">English √ó Social Studies</h3>                    <p style="color: #546e7a;">Historical analysis, cultural narratives, argumentative essays</p>                </div>                <div style="text-align: center;">                    <div style="font-size: 3rem; margin-bottom: 1rem;">üé≤‚û°Ô∏èüìê</div>                    <h3 style="color: #0284c7; font-size: 1.25rem; margin-bottom: 0.5rem;">Cultural √ó Mathematics</h3>                    <p style="color: #546e7a;">MƒÅori games, geometric patterns, traditional navigation</p>                </div>            </div>        </section>        <!-- Live Cross-Subject Connections -->        <section style="margin: 4rem 0;">            <div style="text-align: center; margin-bottom: 3rem;">                <h2 style="font-size: 2.5rem; color: #1a4d2e; margin-bottom: 1rem;">                    üîó Live Cross-Curricular Connections                </h2>                <p style="color: #666; font-size: 1.1rem;">                    Discovered through GraphRAG semantic analysis                </p>            </div>            <div id="cross-subject-connections" style="display: grid; gap: 2rem;">                <!-- Connections will load here -->                <div style="text-align: center; padding: 3rem;">                    <div style="border: 4px solid #7c3aed; border-top: 4px solid #a855f7; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>                    <p style="color: #666;">Analyzing GraphRAG knowledge graph...</p>                </div>            </div>        </section>        <!-- Subject Hubs -->        <section style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 3rem; border-radius: 16px; margin-top: 4rem;">            <h2 style="font-size: 2.5rem; color: #78350f; margin-bottom: 2rem; text-align: center;">                üìö Explore by Subject Hub            </h2>            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">                <a href="/science-hub.html" style="background: white; padding: 1.5rem; border-radius: 12px; text-decoration: none; text-align: center; box-shadow: 0 2px 12px rgba(0,0,0,0.1); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">üî¨</div>                    <h3 style="color: #0891b2; font-weight: 700; margin-bottom: 0.25rem;">Science</h3>                    <p style="color: #666; font-size: 0.85rem;">270+ resources</p>                </a>                <a href="/english-hub.html" style="background: white; padding: 1.5rem; border-radius: 12px; text-decoration: none; text-align: center; box-shadow: 0 2px 12px rgba(0,0,0,0.1); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">üìù</div>                    <h3 style="color: #dc2626; font-weight: 700; margin-bottom: 0.25rem;">English</h3>                    <p style="color: #666; font-size: 0.85rem;">225+ resources</p>                </a>                <a href="/mathematics-hub.html" style="background: white; padding: 1.5rem; border-radius: 12px; text-decoration: none; text-align: center; box-shadow: 0 2px 12px rgba(0,0,0,0.1); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">üìä</div>                    <h3 style="color: #0284c7; font-weight: 700; margin-bottom: 0.25rem;">Mathematics</h3>                    <p style="color: #666; font-size: 0.85rem;">270+ resources</p>                </a>                <a href="/graphrag-explorer.html" style="background: linear-gradient(135deg, #7c3aed, #a855f7); padding: 1.5rem; border-radius: 12px; text-decoration: none; text-align: center; box-shadow: 0 2px 12px rgba(124,58,237,0.3); transition: transform 0.2s; color: white;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform=''">                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">üß†</div>                    <h3 style="font-weight: 700; margin-bottom: 0.25rem;">GraphRAG Explorer</h3>                    <p style="font-size: 0.85rem; opacity: 0.95;">Explore the system</p>                </a>            </div>        </section>    </main>    <!-- Footer -->    <div id="footer-container"></div>    <script>        fetch('/components/footer.html').then(r=>r.text()).then(html=>{            document.getElementById('footer-container').innerHTML=html;        });    </script>    <!-- GraphRAG Integration -->    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>    <script>    (async function() {        const SUPABASE_URL = 'https://nlgldaqtubrlcqddppbq.supabase.co';        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY5ODgxMTksImV4cCI6MjA1MjU2NDExOX0.gN5RGe7kGmxj4-yI1xnDuCuKUPFDh4f-8CQqQdqrGq0';        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);        const container = document.getElementById('cross-subject-connections');        try {            console.log('üß† Initializing GraphRAG Cross-Subject Discovery...');            // First, load statistics            await loadStatistics();            // Query for cross-curricular relationships from GraphRAG database            const { data: relationships, error } = await supabase                .from('graphrag_relationships')                .select(`                    relationship_type,                    confidence,                    source_path,                    target_path,                    description,                    metadata                `)                .in('relationship_type', [                    'cross_curricular_link',                    'cross_curricular_connection',                    'shared_cultural_element'                ])                .gte('confidence', 0.75)                .order('confidence', { ascending: false })                .limit(100);            if (error) {                console.error('Error loading relationships:', error);                throw error;            }            console.log(`üìä Found ${relationships.length} cross-curricular relationships`);            // Get unique paths            const allPaths = [...new Set([                ...relationships.map(r => r.source_path),                ...relationships.map(r => r.target_path)            ])];            // Batch query resources (max 100 at a time for performance)            const { data: resources, error: resourceError } = await supabase                .from('graphrag_resources')                .select('file_path, title, subject, resource_type, cultural_context, quality_score')                .in('file_path', allPaths.slice(0, 200));            if (resourceError) {                console.warn('Resource details error:', resourceError);            }            // Create resource lookup map            const resourceMap = {};            if (resources) {                resources.forEach(r => {                    resourceMap[r.file_path] = r;                });            }            // Build connection objects with full details            const connections = relationships                .filter(rel => {                    const source = resourceMap[rel.source_path];                    const target = resourceMap[rel.target_path];                    // Only include if both resources exist and are different subjects                    return source && target &&                           source.subject && target.subject &&                           source.subject.toLowerCase() !== target.subject.toLowerCase();                })                .slice(0, 12)                .map(rel => {                    const source = resourceMap[rel.source_path];                    const target = resourceMap[rel.target_path];                    const metadata = typeof rel.metadata === 'object' ? rel.metadata : {};                    return {                        source_title: source.title || 'Resource',                        source_subject: source.subject || 'General',                        source_path: rel.source_path,                        target_title: target.title || 'Resource',                        target_subject: target.subject || 'General',                        target_path: rel.target_path,                        confidence: rel.confidence,                        connection_type: formatRelationshipType(rel.relationship_type),                        description: rel.description || metadata.reason || `Connected through ${formatRelationshipType(rel.relationship_type)}`,                        is_cultural: source.cultural_context && target.cultural_context,                        source_quality: source.quality_score,                        target_quality: target.quality_score                    };                });            console.log(`‚ú® Displaying ${connections.length} cross-subject connections`);            if (connections.length === 0) {                container.innerHTML = `                    <div style="text-align: center; padding: 3rem; background: #f0fdf4; border-radius: 12px;">                        <div style="font-size: 3rem; margin-bottom: 1rem;">üîç</div>                        <p style="color: #065f46; font-size: 1.1rem; margin-bottom: 0.5rem; font-weight: 600;">                            Building cross-curricular connections...                        </p>                        <p style="color: #059669; font-size: 0.9rem;">                            The GraphRAG system is analyzing relationships. Check back soon!                        </p>                    </div>                `;                return;            }            // Render connections            renderConnections(connections);            console.log('‚úÖ Cross-subject discovery loaded successfully');        } catch (error) {            console.error('‚ùå Error loading GraphRAG connections:', error);            container.innerHTML = `                <div style="text-align: center; padding: 3rem; background: #fef2f2; border-radius: 12px; border: 2px solid #fecaca;">                    <div style="font-size: 3rem; margin-bottom: 1rem;">‚ö†Ô∏è</div>                    <p style="color: #dc2626; font-weight: 600; margin-bottom: 0.5rem;">                        Unable to load GraphRAG connections                    </p>                    <p style="color: #991b1b; font-size: 0.9rem; margin-bottom: 1.5rem;">                        ${error.message || 'Database connection error'}                    </p>                    <a href="/graphrag-explorer.html" style="display: inline-block; background: #7c3aed; color: white; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">                        Try GraphRAG Explorer ‚Üí                    </a>                </div>            `;        }        async function loadStatistics() {            try {                // Total relationships                const { count: totalRels } = await supabase                    .from('graphrag_relationships')                    .select('*', { count: 'exact', head: true });                // Cross-curricular relationships                const { count: crossCurricular } = await supabase                    .from('graphrag_relationships')                    .select('*', { count: 'exact', head: true })                    .in('relationship_type', ['cross_curricular_link', 'cross_curricular_connection']);                // Cultural relationships                const { count: cultural } = await supabase                    .from('graphrag_relationships')                    .select('*', { count: 'exact', head: true })                    .eq('relationship_type', 'shared_cultural_element');                // Update hero stats                document.getElementById('stat-relationships').textContent = totalRels?.toLocaleString() || '231,469';                document.getElementById('stat-cross-curricular').textContent = crossCurricular?.toLocaleString() || '1,200+';                document.getElementById('stat-cultural').textContent = cultural?.toLocaleString() || '5,062';            } catch (error) {                console.warn('Could not load statistics:', error);                // Keep default values if query fails            }        }        function formatRelationshipType(type) {            return type                .replace(/_/g, ' ')                .split(' ')                .map(word => word.charAt(0).toUpperCase() + word.slice(1))                .join(' ');        }        function getSubjectColor(subject) {            const colors = {                'Science': '#0891b2',                'Mathematics': '#0284c7',                'English': '#dc2626',                'Social Studies': '#059669',                'Te Reo MƒÅori': '#7c3aed',                'Digital Technologies': '#10b981',                'Arts': '#ec4899',                'Health & PE': '#f97316',                'Careers': '#eab308'            };            return colors[subject] || '#6b7280';        }        function renderConnections(connections) {            const container = document.getElementById('cross-subject-connections');            container.innerHTML = connections.map(conn => {                const sourceColor = getSubjectColor(conn.source_subject);                const targetColor = getSubjectColor(conn.target_subject);                const confidencePercent = Math.round(conn.confidence * 100);                return `                    <div class="connection-card" style="border-left-color: ${sourceColor};">                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem;">                            <div>                                <span class="subject-badge" style="background: ${sourceColor}; color: white;">                                    ${conn.source_subject}                                </span>                                <span class="subject-badge" style="background: ${targetColor}; color: white;">                                    ${conn.target_subject}                                </span>                                ${conn.is_cultural ? '<span class="subject-badge" style="background: #fbbf24; color: #78350f;">üåø Cultural</span>' : ''}                            </div>                            <span style="background: #fef3c7; color: #92400e; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 700;">                                ${confidencePercent}% Match                            </span>                        </div>                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1.5rem; align-items: center; margin: 1.5rem 0;">                            <div>                                <a href="${conn.source_path}" style="text-decoration: none;">                                    <h3 style="color: ${sourceColor}; font-size: 1.1rem; font-weight: 700; margin-bottom: 0.5rem; transition: opacity 0.2s;" onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">                                        ${conn.source_title}                                    </h3>                                </a>                                <p style="color: #6b7280; font-size: 0.9rem;">                                    ${conn.source_subject}                                    ${conn.source_quality ? ` ¬∑ ‚≠ê ${conn.source_quality}/100` : ''}                                </p>                            </div>                            <div style="font-size: 2rem; color: #10b981;">‚ÜîÔ∏è</div>                            <div>                                <a href="${conn.target_path}" style="text-decoration: none;">                                    <h3 style="color: ${targetColor}; font-size: 1.1rem; font-weight: 700; margin-bottom: 0.5rem; transition: opacity 0.2s;" onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">                                        ${conn.target_title}                                    </h3>                                </a>                                <p style="color: #6b7280; font-size: 0.9rem;">                                    ${conn.target_subject}                                    ${conn.target_quality ? ` ¬∑ ‚≠ê ${conn.target_quality}/100` : ''}                                </p>                            </div>                        </div>                        <div style="background: #f0fdf4; padding: 1rem; border-radius: 8px; border-left: 4px solid #10b981;">                            <p style="color: #065f46; font-weight: 600; margin-bottom: 0.5rem;">üîó ${conn.connection_type}</p>                            <p style="color: #047857; font-size: 0.95rem;">${conn.description}</p>                        </div>                        <div class="confidence-bar">                            <div class="confidence-fill" style="width: ${confidencePercent}%;"></div>                        </div>                    </div>                `;            }).join('');            // Add "Powered by GraphRAG" footer            container.innerHTML += `                <div style="background: linear-gradient(135deg, #e0f2fe, #bae6fd); padding: 2rem; border-radius: 12px; text-align: center; margin-top: 2rem;">                    <p style="font-size: 1.1rem; color: #0c4a6e; font-weight: 600; margin-bottom: 0.5rem;">                        üß† Powered by GraphRAG Knowledge Graph                    </p>                    <p style="font-size: 0.9rem; color: #075985;">                        Semantic analysis discovers connections across the entire Te Kete Ako platform                    </p>                    <div style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">                        <a href="/graphrag-explorer.html" style="display: inline-block; background: white; color: #7c3aed; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">                            Explore Knowledge Graph ‚Üí                        </a>                        <a href="/graphrag-pathway-finder.html" style="display: inline-block; background: #7c3aed; color: white; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; box-shadow: 0 2px 8px rgba(124,58,237,0.3);">                            Build Learning Pathway ‚Üí                        </a>                    </div>                </div>            `;        }    })();    </script><!-- üìä ULTIMATE BEAUTY: PostHog Analytics (Privacy-First) --><script src="/js/posthog-analytics.js" defer></script></body></html>