<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Prerequisite Chain Explorer | GraphRAG Learning Pathways | Te Kete Ako</title>    <meta name="description" content="Explore 849 prerequisite relationships with 85.5% average confidence. Discover complete learning pathways through our knowledge graph."><!-- Professional Design System -->    <!-- üé® ULTIMATE BEAUTY SYSTEM - Te Kete Ako Design Excellence -->     <link rel="stylesheet" href="/css/te-kete-professional.css">
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"> <script src="https://cdn.tailwindcss.com"></script> <script src="/tailwind.config.ultimate.js"></script> <!-- END ULTIMATE BEAUTY SYSTEM --><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>    <style>        .pathway-hero {            background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);            color: white;            padding: 5rem 2rem;            text-align: center;            position: relative;            overflow: hidden;        }        .pathway-hero::before {            content: '';            position: absolute;            top: 0;            left: 0;            right: 0;            bottom: 0;            opacity: 0.1;            background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 5 L30 20 L20 35' stroke='white' fill='none' stroke-width='2'/%3E%3C/svg%3E");            background-repeat: repeat;        }        .chain-step {            background: white;            border-radius: 12px;            padding: 1.5rem;            margin: 1rem 0;            box-shadow: 0 4px 12px rgba(0,0,0,0.1);            position: relative;            border-left: 6px solid #10b981;            transition: all 0.3s;        }        .chain-step:hover {            transform: translateX(8px);            box-shadow: 0 6px 20px rgba(0,0,0,0.15);        }        .confidence-badge {            display: inline-block;            background: linear-gradient(135deg, #10b981, #059669);            color: white;            padding: 0.5rem 1rem;            border-radius: 20px;            font-weight: 700;            font-size: 0.85rem;        }        .arrow-connector {            text-align: center;            font-size: 2rem;            color: #10b981;            margin: 0.5rem 0;        }        .pathway-card {            background: linear-gradient(135deg, #f0fdf4, #dcfce7);            border-radius: 16px;            padding: 2rem;            margin: 2rem 0;            border-top: 4px solid #10b981;        }    </style></head><body class="pattern-koru-subtle">    <!-- Navigation -->    <div id="nav-container"></div>    <script>        fetch('/components/navigation-standard.html')            .then(r => r.text())            .then(html => document.getElementById('nav-container').innerHTML = html);    </script>    <!-- Hero -->    <section class="pathway-hero">        <div style="position: relative; z-index: 2; max-width: 1000px; margin: 0 auto;">            <div style="display: inline-block; background: rgba(255,255,255,0.2); padding: 0.5rem 1.5rem; border-radius: 24px; margin-bottom: 1rem;">                <span style="color: white; font-weight: 700; font-size: 0.9rem;">üß† GRAPHRAG PATHWAYS</span>            </div>            <h1 style="font-size: 4rem; margin-bottom: 1rem; font-weight: 800;">üîó Prerequisite Chain Explorer</h1>            <p style="font-size: 1.5rem; opacity: 0.95; margin-bottom: 2rem;">                Discover complete learning journeys using 849 prerequisite relationships            </p>            <div style="display: flex; gap: 2rem; justify-content: center; flex-wrap: wrap;">                <div style="background: rgba(255,255,255,0.2); padding: 1rem 2rem; border-radius: 12px;">                    <div style="font-size: 2rem; font-weight: 800;">849</div>                    <div style="font-size: 0.9rem; opacity: 0.9;">Prerequisite Links</div>                </div>                <div style="background: rgba(255,255,255,0.2); padding: 1rem 2rem; border-radius: 12px;">                    <div style="font-size: 2rem; font-weight: 800;">85.5%</div>                    <div style="font-size: 0.9rem; opacity: 0.9;">Avg Confidence</div>                </div>                <div style="background: rgba(255,255,255,0.2); padding: 1rem 2rem; border-radius: 12px;">                    <div style="font-size: 2rem; font-weight: 800;">18</div>                    <div style="font-size: 0.9rem; opacity: 0.9;">Max Chain Length</div>                </div>            </div>        </div>    </section>    <main style="max-width: 1200px; margin: 3rem auto; padding: 0 2rem;">        <!-- What Are Prerequisite Chains? -->        <section style="background: linear-gradient(135deg, #f0f9ff, #e0f2fe); padding: 3rem; border-radius: 16px; margin-bottom: 3rem;">            <h2 style="font-size: 2.5rem; color: #0284c7; margin-bottom: 1.5rem; text-align: center;">                üéØ What Are Prerequisite Chains?            </h2>            <p style="color: #546e7a; font-size: 1.1rem; line-height: 1.8; max-width: 800px; margin: 0 auto 2rem; text-align: center;">                GraphRAG analyzes the knowledge graph to identify <strong>learning sequences</strong> - resources that build upon each other.                A prerequisite chain shows you the complete path from foundational concepts to advanced mastery.            </p>            <div style="background: white; padding: 2rem; border-radius: 12px; max-width: 700px; margin: 0 auto;">                <h3 style="color: #10b981; font-size: 1.5rem; margin-bottom: 1rem;">Example: Y7 Algebra Mastery Chain</h3>                <div style="font-family: monospace; color: #1a4d2e; line-height: 2;">                    <div>1Ô∏è‚É£ Patterns & Sequences <span class="confidence-badge">100%</span></div>                    <div class="arrow-connector">‚Üì</div>                    <div>2Ô∏è‚É£ Mystery of X <span class="confidence-badge">100%</span></div>                    <div class="arrow-connector">‚Üì</div>                    <div>3Ô∏è‚É£ Building with Algebra <span class="confidence-badge">98%</span></div>                    <div class="arrow-connector">‚Üì</div>                    <div>4Ô∏è‚É£ Balancing Act <span class="confidence-badge">98%</span></div>                    <div class="arrow-connector">‚Üì</div>                    <div>5Ô∏è‚É£ Two-Step Shuffle <span class="confidence-badge">98%</span></div>                </div>                <p style="margin-top: 1.5rem; color: #666; font-size: 0.95rem; text-align: center;">                    <strong>Total Journey:</strong> 5 lessons ‚Ä¢ <strong>Estimated Time:</strong> 5-6 weeks                </p>            </div>        </section>        <!-- Live Prerequisite Chains -->        <section>            <h2 style="font-size: 2.5rem; color: #1a4d2e; text-align: center; margin-bottom: 2rem;">                üìö Explore Learning Pathways            </h2>            <div id="prerequisite-chains-container">                <div style="text-align: center; padding: 3rem; color: #64748b;">                    <div style="border: 4px solid #10b981; border-top: 4px solid transparent; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>                    <p>Loading prerequisite chains from GraphRAG...</p>                </div>            </div>        </section>        <!-- Stats -->        <section class="pathway-card">            <h3 style="color: #047857; font-size: 1.75rem; margin-bottom: 1rem; text-align: center;">                üìä Prerequisite Network Statistics            </h3>            <div id="pathway-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 2rem;">                <div style="text-align: center;">                    <div style="font-size: 2.5rem; color: #10b981; font-weight: 800;">...</div>                    <div style="color: #065f46; font-weight: 600;">Total Chains</div>                </div>                <div style="text-align: center;">                    <div style="font-size: 2.5rem; color: #10b981; font-weight: 800;">...</div>                    <div style="color: #065f46; font-weight: 600;">Longest Chain</div>                </div>                <div style="text-align: center;">                    <div style="font-size: 2.5rem; color: #10b981; font-weight: 800;">...</div>                    <div style="color: #065f46; font-weight: 600;">Avg Confidence</div>                </div>            </div>        </section>    </main>    <!-- Footer -->    <div id="footer-container"></div>    <script>        fetch('/components/footer.html').then(r=>r.text()).then(html=>{            document.getElementById('footer-container').innerHTML=html;        });    </script>    <style>    @keyframes spin {        0% { transform: rotate(0deg); }        100% { transform: rotate(360deg); }    }    </style>    <script>    (async function() {        const SUPABASE_URL = 'https://nlgldaqtubrlcqddppbq.supabase.co';        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY5ODgxMTksImV4cCI6MjA1MjU2NDExOX0.gN5RGe7kGmxj4-yI1xnDuCuKUPFDh4f-8CQqQdqrGq0';        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);        const container = document.getElementById('prerequisite-chains-container');        try {            console.log('üîó Loading prerequisite chains from GraphRAG...');            // Query for prerequisite relationships            const { data: prerequisites, error } = await supabase                .from('graphrag_relationships')                .select('source_path, target_path, confidence, metadata')                .eq('relationship_type', 'prerequisite')                .gte('confidence', 0.85)                .order('confidence', { ascending: false })                .limit(50);            if (error) throw error;            // Get resource details for the paths            const allPaths = [...new Set([                ...prerequisites.map(p => p.source_path),                ...prerequisites.map(p => p.target_path)            ])].filter(p => !p.includes('backup'));            const { data: resources } = await supabase                .from('graphrag_resources')                .select('file_path, title, subject, year_level')                .in('file_path', allPaths.slice(0, 100));            // Build pathway chains            const pathways = buildPathwayChains(prerequisites, resources || []);            // Render pathways            container.innerHTML = pathways.map((pathway, idx) => {                const avgConfidence = (pathway.steps.reduce((sum, s) => sum + s.confidence, 0) / pathway.steps.length * 100).toFixed(0);                return `                    <div class="pathway-card">                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">                            <h3 style="color: #047857; font-size: 1.5rem; font-weight: 700;">                                Pathway ${idx + 1}: ${pathway.subject || 'Learning Journey'}                            </h3>                            <span style="background: #10b981; color: white; padding: 0.5rem 1.25rem; border-radius: 20px; font-weight: 700;">                                ${pathway.steps.length} Steps ‚Ä¢ ${avgConfidence}% Confidence                            </span>                        </div>                        ${pathway.steps.map((step, stepIdx) => `                            <div class="chain-step">                                <div style="display: flex; justify-content: space-between; align-items: center;">                                    <div>                                        <span style="background: #10b981; color: white; padding: 0.35rem 0.85rem; border-radius: 50%; font-weight: 800; margin-right: 1rem;">                                            ${stepIdx + 1}                                        </span>                                        <a href="${step.path}" style="color: #1a4d2e; font-weight: 700; font-size: 1.1rem; text-decoration: none;">                                            ${step.title}                                        </a>                                    </div>                                    <span style="background: ${step.confidence >= 0.95 ? '#10b981' : '#fbbf24'}; color: white; padding: 0.35rem 0.85rem; border-radius: 12px; font-size: 0.85rem; font-weight: 700;">                                        ${Math.round(step.confidence * 100)}%                                    </span>                                </div>                                ${step.metadata?.topic ? `                                    <p style="margin-top: 0.75rem; color: #666; font-size: 0.9rem; margin-left: 3rem;">                                        üìò Topic: ${step.metadata.topic}                                    </p>                                ` : ''}                            </div>                            ${stepIdx < pathway.steps.length - 1 ? '<div class="arrow-connector">‚Üì prerequisite</div>' : ''}                        `).join('')}                        <div style="background: #e0f2fe; padding: 1rem; border-radius: 8px; margin-top: 1.5rem; text-align: center;">                            <strong style="color: #0c4a6e;">üí° Estimated Time:</strong>                            <span style="color: #0369a1;">${pathway.steps.length} weeks at 2-3 hours/week</span>                        </div>                    </div>                `;            }).join('');            // Update stats            const totalChains = pathways.length;            const longestChain = Math.max(...pathways.map(p => p.steps.length));            const avgConf = (prerequisites.reduce((sum, p) => sum + p.confidence, 0) / prerequisites.length * 100).toFixed(1);            document.getElementById('pathway-stats').innerHTML = `                <div style="text-align: center;">                    <div style="font-size: 2.5rem; color: #10b981; font-weight: 800;">${totalChains}</div>                    <div style="color: #065f46; font-weight: 600;">Learning Pathways</div>                </div>                <div style="text-align: center;">                    <div style="font-size: 2.5rem; color: #10b981; font-weight: 800;">${longestChain}</div>                    <div style="color: #065f46; font-weight: 600;">Longest Chain</div>                </div>                <div style="text-align: center;">                    <div style="font-size: 2.5rem; color: #10b981; font-weight: 800;">${avgConf}%</div>                    <div style="color: #065f46; font-weight: 600;">Avg Confidence</div>                </div>            `;            document.getElementById('orphan-count').textContent = `${totalChains} Complete Learning Pathways`;            console.log(`‚úÖ Loaded ${totalChains} prerequisite chains`);        } catch (error) {            console.error('‚ùå Error loading prerequisite chains:', error);            container.innerHTML = `                <div style="text-align: center; padding: 3rem; background: #fee2e2; border-radius: 12px;">                    <p style="color: #dc2626; font-weight: 600; margin-bottom: 1rem;">‚ö†Ô∏è Unable to load prerequisite chains</p>                    <p style="color: #666; font-size: 0.9rem;">The GraphRAG system is being enhanced. Check back soon!</p>                </div>            `;        }        // Helper function to build pathway chains from relationships        function buildPathwayChains(prerequisites, resources) {            // Group by source to find chain starts            const chains = [];            const used = new Set();            // Simple approach: group by similar subjects/units            const bySubject = {};            prerequisites.forEach(prereq => {                const resource = resources.find(r => r.file_path === prereq.source_path);                if (resource) {                    const key = resource.subject || 'General';                    if (!bySubject[key]) bySubject[key] = [];                    bySubject[key].push({                        ...prereq,                        title: resource.title,                        subject: resource.subject,                        path: prereq.source_path                    });                }            });            // Create pathways from groups            Object.keys(bySubject).forEach(subject => {                const items = bySubject[subject].sort((a, b) => b.confidence - a.confidence).slice(0, 8);                if (items.length >= 2) {                    chains.push({                        subject,                        steps: items.map(item => ({                            title: item.title,                            path: item.path,                            confidence: item.confidence,                            metadata: item.metadata                        }))                    });                }            });            return chains.slice(0, 10); // Top 10 pathways        }    })();    </script><!-- üìä ULTIMATE BEAUTY: PostHog Analytics (Privacy-First) --><script src="/js/posthog-analytics.js" defer></script></body></html>