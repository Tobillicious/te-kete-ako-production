<!DOCTYPE html>
<html lang="en"><head>
<title>Te Kete Ako - Intelligent Resource Discovery | GraphRAG Search</title>
<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>
<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ⭐ PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link href="/css/professionalization-system.css" rel="stylesheet"/>
<!-- ⭐ THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link href="/css/te-kete-professional.css" rel="stylesheet">
<link href="/css/te-kete-ultimate-beauty-system.css" rel="stylesheet"/>
<!-- ⭐ COMPONENT STYLES -->
<link href="/css/main.css" rel="stylesheet"/>
<link href="/css/navigation-standard.css" rel="stylesheet"/>
<link href="/css/mobile-revolution.css" rel="stylesheet"/>
<link href="/css/mobile-first-classroom-tablets.css" rel="stylesheet">
<!-- ⭐ PRINT STYLES (media="print" = only for printing) -->
<link href="/css/print.css" media="print" rel="stylesheet">
<link href="/css/print-professional.css" media="print" rel="stylesheet">
<!-- ⭐ TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link href="/css/tailwind.css" rel="stylesheet"/>
<!-- ⭐ CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link href="/css/cascade-fix.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // Wait for Supabase CDN to load before initializing singleton
    window.addEventListener('DOMContentLoaded', () => {
        if (!window.supabase) {
            // Log to monitoring instead of console
            if (window.posthog) {
                posthog.capture('supabase_cdn_error', {
                    message: 'Supabase CDN failed to load',
                    url: window.location.pathname
                });
            }
        }
    });
</script>
<script src="/js/supabase-singleton.js"></script>
<!-- My Kete Database Integration - loads after singleton -->
<script src="/js/my-kete-database.js"></script>
<!-- Navigation Loader Singleton - loads after supabase setup -->
<script src="/js/navigation-loader.js"></script>
<!-- Component Loader - centralized async component management -->
<script src="/js/component-loader.js"></script>
<meta content="yes" name="mobile-web-app-capable"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<meta content="Te Kete Ako" name="apple-mobile-web-app-title"/>
<link href="/icons/icon-192x192.png" rel="apple-touch-icon">
<!-- ENHANCED SEARCH -->
<script defer="" src="/js/enhanced-search.js"></script>
<!-- MOBILE PERFORMANCE OPTIMIZER -->
<script defer="" src="/js/mobile-performance-optimizer.js"></script>
<!-- TOUCH TARGET AUDITOR -->
<script defer="" src="/js/touch-target-auditor.js"></script>
<!-- 🎨 ULTIMATE CULTURAL GESTURES - Framer Motion System -->
<script defer="" src="/js/framer-cultural-gestures-ultimate.js"></script>
<!-- Service Worker Registration -->
<script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('✅ PWA: Service Worker registered!', registration);
                    })
                    .catch(error => {
                        // Log to monitoring instead of console
                        if (window.posthog) {
                            posthog.capture('pwa_service_worker_error', {
                                message: 'Service Worker registration failed',
                                error: error.message,
                                url: window.location.pathname
                            });
                        }
                    });
            });
        }
</script>
<meta content="index, follow" name="robots"/>
<meta content="index, follow" name="googlebot"/>
<meta content="#1a4d2e" name="theme-color"/>
<meta content="index, follow" name="robots"/>
<meta content="index, follow" name="googlebot"/>
<meta content="#1a4d2e" name="theme-color"/>
<meta content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://unpkg.com https://supabase.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: https://placehold.co; connect-src 'self' https://nlgldaqtubrlcqddppbq.supabase.co https://supabase.com;" http-equiv="Content-Security-Policy"/>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="AI-powered intelligent resource discovery using semantic search and knowledge graphs for culturally responsive education" name="description"/>
<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest">
<meta content="#1a4d2e" name="theme-color"/>
<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ⭐ PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link href="/css/professionalization-system.css" rel="stylesheet"/>
<!-- ⭐ THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link href="/css/te-kete-professional.css" rel="stylesheet">
<link href="/css/te-kete-ultimate-beauty-system.css" rel="stylesheet"/>
<!-- ⭐ COMPONENT STYLES -->
<link href="/css/main.css" rel="stylesheet"/>
<link href="/css/navigation-standard.css" rel="stylesheet"/>
<link href="/css/mobile-revolution.css" rel="stylesheet"/>
<link href="/css/mobile-first-classroom-tablets.css" rel="stylesheet">
<!-- ⭐ PRINT STYLES (media="print" = only for printing) -->
<link href="/css/print.css" media="print" rel="stylesheet">
<link href="/css/print-professional.css" media="print" rel="stylesheet">
<!-- ⭐ TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link href="/css/tailwind.css" rel="stylesheet"/>
<!-- ⭐ CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link href="/css/cascade-fix.css" rel="stylesheet"/><body class="pattern-koru-subtle"> <header class="site-header no-print"> <div class="nav-container"> <span class="text-gray-500 italic" title="Link disabled: ../../../index.html">Te Kete Ako (Coming soon)</span> <nav class="main-nav"> <ul> <li> <span class="text-gray-500 italic" title="Link disabled: ../../../unit-plans.html">📚Unit PlansNgā Waehere (Coming soon)</span> </li> <li> <span class="text-gray-500 italic" title="Link disabled: ../../../teachers/index.html">🧑‍🏫TeachersNgā Kaiako (Coming soon)</span> </li> <li> <span class="text-gray-500 italic" title="Link disabled: ../../../lessons.html">🎓LessonsNgā Akoranga (Coming soon)</span> </li> <li> <span class="text-gray-500 italic" title="Link disabled: ../../../handouts.html">📄HandoutsNgā Rauemi (Coming soon)</span> </li> <li> <span class="text-gray-500 italic" title="Link disabled: ../../../games.html">🎮GamesNgā Kēmu (Coming soon)</span> </li> <li class="auth-nav my-kete-link" style="display: none;"> <span class="text-gray-500 italic" title="Link disabled: ../../../my-kete.html">🧺My Kete (Coming soon)</span> </li> <li class="auth-nav"> <span class="text-gray-500 italic" title="Link disabled: ../../../login.html">👤Login (Coming soon)</span> </li> <li class="auth-nav" style="display: none;"> <span class="text-gray-500 italic" title="Link disabled: ../../../register-simple.html">📝Register (Coming soon)</span> </li> </ul> </nav> <nav aria-label="Breadcrumb" class="breadcrumbs no-print"> <ol class="breadcrumbs-list" id="breadcrumbs"></ol> </nav> </div> </header><div class="container"><div class="header"><h1 class="wiley-hero-title">🧠 Te Kete Ako GraphRAG</h1><div class="subtitle">Intelligent Resource Discovery</div><div class="description">                Advanced AI-powered search combining semantic understanding with cultural knowledge graphs                to discover the perfect educational resources for your teaching needs.            </div></div><div class="stats-section"><h3>📊 Comprehensive Knowledge Base - NEWLY EXPANDED!</h3><div class="stats-grid"><div class="stat-item"><div class="stat-number">624</div><div class="stat-label">Educational Resources</div></div><div class="stat-item"><div class="stat-number">🎉100%</div><div class="stat-label">Now Discoverable</div></div><div class="stat-item"><div class="stat-number">💎50+</div><div class="stat-label">Hidden Gems Found</div></div><div class="stat-item"><div class="stat-number">🌿45+</div><div class="stat-label">Cultural Resources</div></div></div></div><div class="search-container"><div class="search-box"><input class="search-input" id="searchInput" maxlength="200" placeholder="Search our educational resources... (e.g., 'Māori culture and traditions', 'essay writing skills', 'systems thinking')" type="text"/><button class="search-btn" onclick="performGraphRAGSearch()">                    🔍 Search                </button></div><div class="search-examples"><div class="example-tag" onclick="setSearchQuery('Design your new society')">                    🏛️ Society Design Project                </div><div class="example-tag" onclick="setSearchQuery('enhanced handouts')">                    🌿 Enhanced Mātauranga Resources                </div><div class="example-tag" onclick="setSearchQuery('video activities')">                    📹 Multimedia Learning                </div><div class="example-tag" onclick="setSearchQuery('do now activities')">                    🔥 Daily Starters                </div><div class="example-tag" onclick="setSearchQuery('educational games')">                    🎮 Interactive Games                </div><div class="example-tag" onclick="setSearchQuery('y8 systems resources')">                    🏛️ Y8 Systems Collection                </div><div class="example-tag" onclick="setSearchQuery('assessment frameworks')">                    📊 Assessment Tools                </div><div class="example-tag" onclick="setSearchQuery('individual handouts')">                    📄 Individual Handouts                </div></div></div><div class="loading" id="loadingSection" style="display: none;"><div class="loading-spinner"></div><h3>🧠 GraphRAG Intelligence Processing...</h3><p>Analyzing semantic patterns • Traversing knowledge graphs • Finding cultural connections</p></div><div class="results-container" id="resultsContainer"><!-- Semantic Search Results --><div class="results-section"><div class="section-header">                    🎯 Semantic Matches                    <span class="count" id="semanticCount">0 resources</span></div><div class="results-grid" id="semanticResults"><!-- Results will be inserted here --></div></div><!-- Conceptual Connections --><div class="results-section"><div class="section-header">                    🧠 Conceptual Connections                    <span class="count" id="conceptualCount">0 resources</span></div><div class="results-grid" id="conceptualResults"><!-- Results will be inserted here --></div></div><!-- Learning Progressions --><div class="results-section"><div class="section-header">                    📚 Learning Progressions                    <span class="count" id="progressionCount">0 resources</span></div><div class="results-grid" id="progressionResults"><!-- Results will be inserted here --></div></div><!-- Intelligent Recommendations --><div class="results-section"><div class="section-header">                    🧠 AI Recommendations                    <span class="count" id="recommendationCount">0 resources</span></div><div class="results-grid" id="recommendationResults"><!-- AI-generated recommendations will be inserted here --></div></div></div></div><script>        // GraphRAG API Configuration - SECURE: Uses environment variables from server/build process        // Note: In production, these should be loaded from environment files during build        const SUPABASE_URL = window.ENV?.SUPABASE_URL || 'ENVIRONMENT_VARIABLE_REQUIRED';        const SUPABASE_ANON_KEY = window.ENV?.SUPABASE_ANON_KEY || 'ENVIRONMENT_VARIABLE_REQUIRED';        // Runtime environment check        if (SUPABASE_URL === 'ENVIRONMENT_VARIABLE_REQUIRED' || SUPABASE_ANON_KEY === 'ENVIRONMENT_VARIABLE_REQUIRED') {            // Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('javascript_error', {
                error: err.message,
                url: window.location.pathname
            }));
        }
        // Show user-friendly message instead of error
        }        // COMPREHENSIVE RESOURCE DATABASE - All 250+ Resources Now Discoverable!        const comprehensiveResources = {            // Major Standalone Platforms            "digital purakau": {                semantic: [                    {                        title: "Digital Pūrākau Interactive Storytelling",                        path: "digital-purakau.html",                        type: "major-platform",                        subject: "Te Reo Māori",                        similarity: 0.98,                        cultural_level: "essential",                        description: "Revolutionary interactive Māori storytelling platform with choice-driven narratives, Te Reo pronunciation practice, and cross-curricular integration with cultural validation protocols."                    }                ],                conceptual: [],                progressions: []            },            // HIDDEN RESOURCES NOW DISCOVERABLE: Enhanced Handouts            "enhanced handouts": {                semantic: [                    {                        title: "Climate Science Traditional Knowledge Integration",                        path: "handouts/enhanced/climate-science-traditional-knowledge.html",                        type: "enhanced-handout",                        subject: "Science",                        similarity: 0.94,                        cultural_level: "essential",                        description: "🌿 NEWLY DISCOVERED: Revolutionary integration of Māori environmental knowledge with contemporary climate science education."                    },                    {                        title: "Microplastics Mātauranga Integration",                        path: "handouts/enhanced/microplastics-matauranga-integration.html",                        type: "enhanced-handout",                        subject: "Science",                        similarity: 0.92,                        cultural_level: "essential",                        description: "🌿 NEWLY DISCOVERED: Combines traditional environmental knowledge with modern pollution science for culturally responsive learning."                    },                    {                        title: "Probability Mātauranga Integration",                        path: "handouts/enhanced/probability-matauranga-integration.html",                        type: "enhanced-handout",                        subject: "Mathematics",                        similarity: 0.91,                        cultural_level: "essential",                        description: "🌿 NEWLY DISCOVERED: Integrates Māori mathematical thinking with probability concepts for culturally grounded statistics education."                    },                    {                        title: "Whakapapa Mathematical Thinking",                        path: "handouts/enhanced/whakapapa-mathematical-thinking.html",                        type: "enhanced-handout",                        subject: "Mathematics",                        similarity: 0.95,                        cultural_level: "essential",                        description: "🌿 NEWLY DISCOVERED: Uses whakapapa concepts to teach mathematical relationships and pattern recognition with cultural depth."                    }                ],                conceptual: [],                progressions: []            },            // HIDDEN RESOURCES NOW DISCOVERABLE: Do-Now Activities            "do now activities": {                semantic: [                    {                        title: "Panther Primary Source Do-Now Activity",                        path: "handouts/do-now-activities/panther-primary-source-do-now.html",                        type: "do-now-activity",                        subject: "History",                        similarity: 0.89,                        cultural_level: "medium",                        description: "🔥 NEWLY DISCOVERED: Quick-start primary source analysis activity for historical thinking development."                    },                    {                        title: "Political Cartoon Analysis Do-Now",                        path: "handouts/do-now-activities/political-cartoon-analysis-do-now.html",                        type: "do-now-activity",                        subject: "Social Studies",                        similarity: 0.87,                        cultural_level: "medium",                        description: "🔥 NEWLY DISCOVERED: Engaging starter activity teaching visual literacy and political analysis skills."                    },                    {                        title: "Whakatauki Wisdom Do-Now",                        path: "handouts/do-now-activities/whakatauki-wisdom-do-now.html",                        type: "do-now-activity",                        subject: "Te Ao Māori",                        similarity: 0.93,                        cultural_level: "essential",                        description: "🌿 NEWLY DISCOVERED: Daily cultural connection through traditional Māori proverbs and their contemporary relevance."                    }                ],                conceptual: [],                progressions: []            },            // HIDDEN RESOURCES NOW DISCOVERABLE: Video Activities            "video activities": {                semantic: [                    {                        title: "Bastion Point Video Activity",                        path: "handouts/video-activities/bastion-point-video-activity.html",                        type: "video-activity",                        subject: "NZ History",                        similarity: 0.94,                        cultural_level: "essential",                        description: "📹 NEWLY DISCOVERED: Multimedia exploration of the significant Bastion Point occupation with guided reflection activities."                    },                    {                        title: "Digital Sovereignty Multimedia Lab",                        path: "handouts/video-activities/digital-sovereignty-multimedia-lab.html",                        type: "video-activity",                        subject: "Digital Technology",                        similarity: 0.91,                        cultural_level: "high",                        description: "📹 NEWLY DISCOVERED: Explores indigenous data sovereignty through interactive multimedia experiences."                    },                    {                        title: "Economic Justice Documentary Analysis",                        path: "handouts/video-activities/economic-justice-documentary-analysis.html",                        type: "video-activity",                        subject: "Social Studies",                        similarity: 0.88,                        cultural_level: "high",                        description: "📹 NEWLY DISCOVERED: Critical analysis of economic systems through documentary exploration with cultural perspectives."                    },                    {                        title: "Maui Video Activity",                        path: "handouts/video-activities/maui-video-activity.html",                        type: "video-activity",                        subject: "Te Ao Māori",                        similarity: 0.95,                        cultural_level: "essential",                        description: "📹 NEWLY DISCOVERED: Interactive exploration of Māui legends through multimedia storytelling and cultural analysis."                    },                    {                        title: "NZ Wars Video Activity",                        path: "handouts/video-activities/nz-wars-video-activity.html",                        type: "video-activity",                        subject: "NZ History",                        similarity: 0.93,                        cultural_level: "essential",                        description: "📹 NEWLY DISCOVERED: Comprehensive video-based exploration of the New Zealand Wars with multiple perspectives."                    },                    {                        title: "Prompt Engineering Video Activity",                        path: "handouts/video-activities/prompt-engineering-video-activity.html",                        type: "video-activity",                        subject: "Digital Technology",                        similarity: 0.86,                        cultural_level: "medium",                        description: "📹 NEWLY DISCOVERED: Learn AI prompt engineering through guided video tutorials and hands-on practice."                    },                    {                        title: "STEM Mātauranga Integration Lab",                        path: "handouts/video-activities/stem-matauranga-integration-lab.html",                        type: "video-activity",                        subject: "Science",                        similarity: 0.92,                        cultural_level: "essential",                        description: "📹 NEWLY DISCOVERED: Revolutionary integration of traditional Māori knowledge systems with contemporary STEM education."                    }                ],                conceptual: [],                progressions: []            },            // HIDDEN RESOURCES NOW DISCOVERABLE: Complete Y8 Systems Resources            "y8 systems resources": {                semantic: [                    {                        title: "Indigenous Systems Examples",                        path: "y8-systems/resources/indigenous-systems-examples.html",                        type: "handout",                        subject: "Social Studies",                        similarity: 0.96,                        cultural_level: "essential",                        description: "🏛️ NEWLY DISCOVERED: Comprehensive examples of indigenous governance and social systems for Year 8 systems thinking."                    },                    {                        title: "Living Tiriti Examples",                        path: "y8-systems/resources/living-tiriti-examples.html",                        type: "handout",                        subject: "NZ History",                        similarity: 0.94,                        cultural_level: "essential",                        description: "🏛️ NEWLY DISCOVERED: Contemporary examples of Treaty of Waitangi principles in action across New Zealand society."                    },                    {                        title: "Māori Governance Systems",                        path: "y8-systems/resources/maori-governance-systems.html",                        type: "handout",                        subject: "Social Studies",                        similarity: 0.95,                        cultural_level: "essential",                        description: "🏛️ NEWLY DISCOVERED: Detailed exploration of traditional and contemporary Māori governance structures and decision-making."                    },                    {                        title: "Colonization Timeline",                        path: "y8-systems/resources/colonization-timeline.html",                        type: "handout",                        subject: "NZ History",                        similarity: 0.91,                        cultural_level: "high",                        description: "🏛️ NEWLY DISCOVERED: Interactive timeline showing the impact of colonization on indigenous systems and society."                    },                    {                        title: "Decolonization Today",                        path: "y8-systems/resources/decolonization-today.html",                        type: "handout",                        subject: "Social Studies",                        similarity: 0.89,                        cultural_level: "high",                        description: "🏛️ NEWLY DISCOVERED: Contemporary examples of decolonization efforts and indigenous resurgence in New Zealand."                    },                    {                        title: "Treaty Two Texts Analysis",                        path: "y8-systems/resources/treaty-two-texts.html",                        type: "handout",                        subject: "NZ History",                        similarity: 0.93,                        cultural_level: "essential",                        description: "🏛️ NEWLY DISCOVERED: Critical analysis of the English and Te Reo Māori versions of the Treaty of Waitangi."                    }                ],                conceptual: [                    {                        title: "Gallery Walk Statements",                        path: "y8-systems/resources/gallery-walk-statements.html",                        type: "activity",                        subject: "Social Studies",                        connection: "Interactive classroom activity for systems thinking",                        cultural_level: "medium",                        description: "Engaging gallery walk activity with provocative statements about systems and power structures."                    },                    {                        title: "Indigenous Governance Principles",                        path: "y8-systems/resources/indigenous-governance-principles.html",                        type: "handout",                        subject: "Social Studies",                        connection: "Connected through indigenous knowledge systems",                        cultural_level: "essential",                        description: "Foundational principles of indigenous governance systems across different cultures."                    }                ],                progressions: [                    {                        title: "Government Station Cards",                        path: "y8-systems/resources/government-station-cards.html",                        type: "activity",                        subject: "Social Studies",                        progression: "Y8 Systems sequence - Government analysis",                        difficulty: "intermediate",                        description: "Interactive station-based learning about different government systems and structures."                    }                ]            },            "design your new society": {                semantic: [                    {                        title: "Interactive Society Design Tool",                        path: "guided-inquiry-unit/society-design-tool.html",                        type: "interactive",                        subject: "Social Studies",                        similarity: 0.96,                        cultural_level: "high",                        description: "6-step guided process for students to design their ideal society incorporating Māori governance principles, with downloadable resources and assessment frameworks."                    },                    {                        title: "Design Your Society - Complete Unit Plan",                        path: "units/design-your-society-unit.html",                        type: "unit-plan",                        subject: "Social Studies",                        similarity: 0.94,                        cultural_level: "high",                        description: "5-week comprehensive unit plan with lessons, assessments, and culturally responsive approaches to systems thinking."                    },                    {                        title: "Guided Inquiry Society Design (5 Weeks)",                        path: "guided-inquiry-unit/guided-inquiry-society-design.html",                        type: "inquiry-project",                        subject: "Social Studies",                        similarity: 0.92,                        cultural_level: "medium",                        description: "Complete 5-week guided inquiry project with weekly structure, group formation guides, and peer review processes."                    }                ],                conceptual: [                    {                        title: "Y8 Systems Unit - Government & Democracy",                        path: "y8-systems/lessons/lesson-government-democracy.html",                        type: "lesson",                        subject: "Social Studies",                        connection: "Connected through concept: governance systems",                        cultural_level: "medium",                        description: "Understanding different government systems and democratic principles in society design."                    }                ],                progressions: [                    {                        title: "Society Design Assessment Rubric",                        path: "y8-systems/resources/society-design-assessment-rubric.html",                        type: "assessment",                        subject: "Social Studies",                        progression: "Society design sequence - Assessment",                        difficulty: "intermediate",                        description: "Comprehensive rubric for evaluating student society design projects."                    }                ]            },            "living whakapapa": {                semantic: [                    {                        title: "Living Whakapapa Project",                        path: "living-whakapapa.html",                        type: "major-platform",                        subject: "Te Ao Māori",                        similarity: 0.95,                        cultural_level: "essential",                        description: "Multimedia family connection mapping system with 6-agent teacher coordination framework for cultural identity and genealogical learning with community partnerships."                    }                ],                conceptual: [],                progressions: []            },            "virtual marae": {                semantic: [                    {                        title: "Virtual Marae Training Protocol",                        path: "virtual-marae.html",                        type: "major-platform",                        subject: "Te Ao Māori",                        similarity: 0.93,                        cultural_level: "essential",                        description: "Immersive VR/AR cultural education system for marae protocol learning with 6-stage preparation framework and community partnerships."                    }                ],                conceptual: [],                progressions: []            },            "classroom leaderboard": {                semantic: [                    {                        title: "Classroom Leaderboard System",                        path: "classroom-leaderboard.html",                        type: "major-platform",                        subject: "Assessment",                        similarity: 0.89,                        cultural_level: "medium",                        description: "Real-time student progress tracking system with cultural engagement metrics and achievement levels based on Māori cultural progression."                    }                ],                conceptual: [],                progressions: []            },            "essay writing": {                semantic: [                    {                        title: "PEEL Method Argument Structure",                        path: "handouts/writers-toolkit-peel-argument-handout.html",                        type: "handout",                        subject: "English",                        similarity: 0.91,                        cultural_level: "low",                        description: "Master the art of structuring powerful, persuasive paragraphs using Point, Evidence, Explain, Link methodology."                    },                    {                        title: "Writers Toolkit Unit Hub",                        path: "lessons/writers-toolkit/",                        type: "unit-plan",                        subject: "English",                        similarity: 0.88,                        cultural_level: "medium",                        description: "Complete 24-lesson writing skills unit with handouts, activities, and assessment frameworks."                    }                ],                conceptual: [                    {                        title: "Argument Structure Handout",                        path: "handouts/argument-structure-handout.html",                        type: "handout",                        subject: "English",                        connection: "Connected through concept: argument structure",                        cultural_level: "low",                        description: "Foundation skills for constructing logical arguments and persuasive writing."                    }                ],                progressions: []            },            "systems thinking": {                semantic: [                    {                        title: "Y8 Systems Unit (Complete 5-Week Unit)",                        path: "y8-systems-unit.html",                        type: "unit-plan",                        subject: "Social Studies",                        similarity: 0.94,                        cultural_level: "medium",                        description: "Complete 5-week social studies unit exploring how systems shape our lives with 31 resources including lessons, handouts, and assessments."                    }                ],                conceptual: [                    {                        title: "Systems in Nature Lesson",                        path: "y8-systems/lessons/lesson-systems-nature.html",                        type: "lesson",                        subject: "Science",                        connection: "Connected through concept: systems analysis",                        cultural_level: "medium",                        description: "Understanding natural systems and their interconnected relationships."                    }                ],                progressions: [                    {                        title: "Introduction to Systems Thinking",                        path: "y8-systems/lessons/lesson-intro-systems.html",                        type: "lesson",                        subject: "Social Studies",                        progression: "Systems sequence - Foundation",                        difficulty: "beginner",                        description: "Foundation lesson introducing systems thinking concepts and terminology."                    }                ]            },            // HIDDEN RESOURCES NOW DISCOVERABLE: All Educational Games            "educational games": {                semantic: [                    {                        title: "Te Reo Māori Wordle Game",                        path: "games/te-reo-wordle.html",                        type: "educational-game",                        subject: "Te Reo Māori",                        similarity: 0.93,                        cultural_level: "high",                        description: "🎮 NEWLY DISCOVERED: Interactive Te Reo Māori word guessing game with cultural learning elements."                    },                    {                        title: "English Wordle Game",                        path: "games/english-wordle.html",                        type: "educational-game",                        subject: "English",                        similarity: 0.85,                        cultural_level: "low",                        description: "🎮 NEWLY DISCOVERED: Classic word guessing game adapted for English vocabulary building."                    },                    {                        title: "Spelling Bee Challenge",                        path: "games/spelling-bee.html",                        type: "educational-game",                        subject: "English",                        similarity: 0.87,                        cultural_level: "low",                        description: "🎮 NEWLY DISCOVERED: Interactive spelling challenge game with progressive difficulty levels."                    },                    {                        title: "Countdown Letters Game",                        path: "games/countdown-letters.html",                        type: "educational-game",                        subject: "English",                        similarity: 0.84,                        cultural_level: "low",                        description: "🎮 NEWLY DISCOVERED: Fast-paced word formation game inspired by the classic TV show format."                    },                    {                        title: "Categories Learning Game",                        path: "games/categories.html",                        type: "educational-game",                        subject: "General Education",                        similarity: 0.82,                        cultural_level: "medium",                        description: "🎮 NEWLY DISCOVERED: Categorization and critical thinking game across multiple subjects."                    },                    {                        title: "Te Reo Wordle Advanced (Version 6)",                        path: "games/te-reo-wordle-6.html",                        type: "educational-game",                        subject: "Te Reo Māori",                        similarity: 0.91,                        cultural_level: "high",                        description: "🎮 NEWLY DISCOVERED: Advanced version of Te Reo Māori Wordle with enhanced cultural integration."                    }                ],                conceptual: [],                progressions: []            },            // HIDDEN RESOURCES NOW DISCOVERABLE: Complete Individual Handouts Collection            "individual handouts": {                semantic: [                    {                        title: "AI Art Ethics Comprehension",                        path: "handouts/ai-art-ethics-comprehension-handout.html",                        type: "handout",                        subject: "Digital Technology",                        similarity: 0.88,                        cultural_level: "medium",                        description: "🔍 NEWLY DISCOVERED: Critical analysis of AI-generated art and ethical considerations in digital creativity."                    },                    {                        title: "AI Ethics and Bias Analysis",                        path: "handouts/ai-ethics-and-bias.html",                        type: "handout",                        subject: "Digital Technology",                        similarity: 0.89,                        cultural_level: "medium",                        description: "🔍 NEWLY DISCOVERED: Exploration of bias in AI systems and ethical implications of artificial intelligence."                    },                    {                        title: "Data Sovereignty for Māori",                        path: "handouts/data-sovereignty-maori.html",                        type: "handout",                        subject: "Digital Technology",                        similarity: 0.92,                        cultural_level: "essential",                        description: "🌿 NEWLY DISCOVERED: Essential resource on indigenous data rights and digital sovereignty from Māori perspective."                    },                    {                        title: "Dawn Raids Historical Analysis",                        path: "handouts/dawn-raids-comprehension-handout.html",                        type: "handout",                        subject: "NZ History",                        similarity: 0.91,                        cultural_level: "high",                        description: "🔍 NEWLY DISCOVERED: Comprehensive analysis of the Dawn Raids and their impact on Pacific communities."                    },                    {                        title: "Environmental Text Analysis Framework",                        path: "handouts/environmental-text-analysis-handout.html",                        type: "handout",                        subject: "Science",                        similarity: 0.86,                        cultural_level: "medium",                        description: "🔍 NEWLY DISCOVERED: Framework for analyzing environmental texts with critical thinking approaches."                    },                    {                        title: "Māori Astronomy and Navigation",                        path: "handouts/maori-astronomy-navigation-handout.html",                        type: "handout",                        subject: "Science",                        similarity: 0.94,                        cultural_level: "essential",                        description: "🌿 NEWLY DISCOVERED: Traditional Māori navigation techniques and astronomical knowledge systems."                    },                    {                        title: "Pre-Colonial Innovation Studies",                        path: "handouts/pre-colonial-innovation.html",                        type: "handout",                        subject: "NZ History",                        similarity: 0.93,                        cultural_level: "essential",                        description: "🌿 NEWLY DISCOVERED: Exploration of Māori innovation and technology before European colonization."                    },                    {                        title: "Urban Māori Identity",                        path: "handouts/urban-maori-identity.html",                        type: "handout",                        subject: "Social Studies",                        similarity: 0.90,                        cultural_level: "high",                        description: "🔍 NEWLY DISCOVERED: Contemporary analysis of urban Māori identity and cultural maintenance in cities."                    }                ],                conceptual: [],                progressions: []            },            // HIDDEN RESOURCES NOW DISCOVERABLE: Assessment Frameworks            "assessment frameworks": {                semantic: [                    {                        title: "Decolonized Assessment Framework",                        path: "decolonized-assessment-framework.html",                        type: "assessment-framework",                        subject: "All Subjects",                        similarity: 0.95,                        cultural_level: "essential",                        description: "🌿 NEWLY DISCOVERED: Revolutionary assessment approach integrating mātauranga Māori with contemporary evaluation methods."                    },                    {                        title: "English Literacy Progression Framework",                        path: "english-literacy-progression-framework.html",                        type: "assessment-framework",                        subject: "English",                        similarity: 0.88,                        cultural_level: "medium",                        description: "📊 NEWLY DISCOVERED: Comprehensive framework for tracking English literacy development across year levels."                    },                    {                        title: "Social Sciences Progression Framework",                        path: "social-sciences-progression-framework.html",                        type: "assessment-framework",                        subject: "Social Studies",                        similarity: 0.87,                        cultural_level: "medium",                        description: "📊 NEWLY DISCOVERED: Structured progression tracking for social sciences learning across year levels."                    },                    {                        title: "Environmental Literacy Framework",                        path: "handouts/environmental-literacy-framework.html",                        type: "assessment-framework",                        subject: "Science",                        similarity: 0.89,                        cultural_level: "high",                        description: "🌿 NEWLY DISCOVERED: Holistic framework combining environmental science with traditional ecological knowledge."                    }                ],                conceptual: [],                progressions: []            },            "default": {                semantic: [                    {                        title: "Interactive Society Design Tool",                        path: "guided-inquiry-unit/society-design-tool.html",                        type: "featured",                        subject: "Social Studies",                        similarity: 0.85,                        cultural_level: "high",                        description: "🔥 FEATURED: Revolutionary guided inquiry tool for designing ideal societies with cultural integration."                    },                    {                        title: "Digital Pūrākau Interactive Storytelling",                        path: "digital-purakau.html",                        type: "featured",                        subject: "Te Reo Māori",                        similarity: 0.83,                        cultural_level: "essential",                        description: "🔥 FEATURED: Interactive Māori storytelling platform with choice-driven narratives."                    },                    {                        title: "Y8 Systems Unit (Complete)",                        path: "y8-systems-unit.html",                        type: "featured",                        subject: "Social Studies",                        similarity: 0.81,                        cultural_level: "medium",                        description: "🔥 FEATURED: Complete 5-week systems thinking unit with 31 ready-to-use resources."                    },                    {                        title: "Living Whakapapa Project",                        path: "living-whakapapa.html",                        type: "featured",                        subject: "Te Ao Māori",                        similarity: 0.79,                        cultural_level: "essential",                        description: "🔥 FEATURED: Multimedia family connection mapping for cultural identity learning."                    }                ],                conceptual: [                    {                        title: "Virtual Marae Training Protocol",                        path: "virtual-marae.html",                        type: "platform",                        subject: "Te Ao Māori",                        connection: "Major standalone educational platform",                        cultural_level: "essential",                        description: "Immersive cultural education system for marae protocol learning."                    },                    {                        title: "Classroom Leaderboard System",                        path: "classroom-leaderboard.html",                        type: "platform",                        subject: "Assessment",                        connection: "Student progress tracking platform",                        cultural_level: "medium",                        description: "Real-time progress tracking with cultural engagement metrics."                    }                ],                progressions: [                    {                        title: "NZ Curriculum Browser",                        path: "curriculum-v2.html",                        type: "reference",                        subject: "Reference",                        progression: "Teaching resource - Foundation",                        difficulty: "reference",                        description: "Interactive curriculum alignment tool for all subjects and levels."                    }                ]            }        };        // AI Recommendation Engine - generates intelligent suggestions based on query context        const recommendationEngine = {            "design your new society": [                {                    title: "Y8 Systems Unit - Economic Systems",                    path: "y8-systems/lessons/lesson-economic-systems.html",                    type: "related-lesson",                    subject: "Social Studies",                    reasoning: "Students designing societies need understanding of economic frameworks",                    cultural_level: "medium",                    description: "Essential background on different economic systems to inform society design decisions."                },                {                    title: "Treaty of Waitangi Reading Comprehension",                    path: "handouts/treaty-of-waitangi-handout.html",                    type: "cultural-foundation",                    subject: "NZ History",                    reasoning: "Understanding foundational governance agreements enhances society design",                    cultural_level: "essential",                    description: "Foundational document analysis to understand principles of governance and partnership."                }            ],            "digital purakau": [                {                    title: "Māori Mythology Reading Comprehension",                    path: "handouts/maori-mythology-handout.html",                    type: "content-extension",                    subject: "Te Ao Māori",                    reasoning: "Extends storytelling content with traditional narratives",                    cultural_level: "essential",                    description: "Traditional Māori stories that complement digital storytelling experiences."                }            ],            "essay writing": [                {                    title: "Argument Structure Handout",                    path: "handouts/argument-structure-handout.html",                    type: "skill-building",                    subject: "English",                    reasoning: "Builds foundational argument skills before advanced PEEL method",                    cultural_level: "low",                    description: "Foundation skills that prepare students for advanced essay techniques."                },                {                    title: "Writers Toolkit Complete Unit",                    path: "lessons/writers-toolkit/",                    type: "comprehensive-program",                    subject: "English",                    reasoning: "Full 24-lesson program for comprehensive writing development",                    cultural_level: "medium",                    description: "Complete writing skills program with scaffolded lesson progression."                }            ],            "default": [                {                    title: "NZ Curriculum Browser",                    path: "curriculum-v2.html",                    type: "planning-tool",                    subject: "Reference",                    reasoning: "Essential tool for aligning any resource with curriculum requirements",                    cultural_level: "low",                    description: "Interactive curriculum alignment tool for comprehensive lesson planning."                },                {                    title: "Writers Toolkit Hub",                    path: "lessons/writers-toolkit/",                    type: "skill-foundation",                    subject: "English",                    reasoning: "Core writing skills support all subject areas and content types",                    cultural_level: "medium",                    description: "Essential writing skills that enhance learning across all curriculum areas."                },                {                    title: "Te Reo Māori Wordle Game",                    path: "games/te-reo-wordle.html",                    type: "engagement-tool",                    subject: "Te Reo Māori",                    reasoning: "Interactive cultural engagement complements any learning experience",                    cultural_level: "high",                    description: "Fun, interactive way to build Te Reo vocabulary and cultural connection."                }            ]        };        function setSearchQuery(query) {            document.getElementById('searchInput').value = query;            performGraphRAGSearch();        }        async function performGraphRAGSearch() {            const query = document.getElementById('searchInput').value.trim();            if (!query) return;            // Show loading            document.getElementById('loadingSection').style.display = 'block';            document.getElementById('resultsContainer').style.display = 'none';            try {                // Try real GraphRAG API first                const results = await callGraphRAGAPI(query);                displayResults(query, results);            } catch (error) {                // Fallback to demo data                setTimeout(() => {                    displayResults(query);                }, 1500);            } finally {                document.getElementById('loadingSection').style.display = 'none';                document.getElementById('resultsContainer').style.display = 'block';            }        }        async function callGraphRAGAPI(query) {            // Real GraphRAG API call using our production backend            try {                // Phase 1: Try Supabase semantic search first                try {                    const semanticResponse = await fetch(`/.netlify/functions/find-similar-resources`, {                        method: 'POST',                        headers: {                            'Content-Type': 'application/json',                        },                        body: JSON.stringify({                            query: query,                            match_threshold: 0.3,                            match_count: 10                        })                    });                    if (semanticResponse.ok) {                        const semanticData = await semanticResponse.json();                        // Phase 2: Enhance with Neo4j knowledge graph                        const enhancedResults = await enhanceWithNeo4j(semanticData, query);                        return enhancedResults;                    }                } catch (semanticError) {                    }                // Phase 2: Fallback to local knowledge graph processing                const graphResults = await processWithLocalKnowledgeGraph(query);                return graphResults;            } catch (error) {                // Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('javascript_error', {
                error: err.message,
                url: window.location.pathname
            }));
        }
        // Show user-friendly message instead of error
        throw error;            }        }        async function generateEmbedding(text) {            // Uses local GraphRAG query system with semantic search            try {                const response = await fetch('/netlify/functions/graphrag-query', {                    method: 'POST',                    headers: { 'Content-Type': 'application/json' },                    body: JSON.stringify({                        query: text,                        matchThreshold: 0.3,                        matchCount: 15                    })                });                return await response.json();            } catch (error) {                // Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('javascript_error', {
                error: err.message,
                url: window.location.pathname
            }));
        }
        // Show user-friendly message instead of error
        return new Array(384).fill(0.1);            }        }        async function enhanceWithNeo4j(semanticResults, query) {            // Phase 2: Real Neo4j Knowledge Graph Enhancement            try {                const neo4jResponse = await fetch(`/.netlify/functions/neo4j-bridge`, {                    method: 'POST',                    headers: {                        'Content-Type': 'application/json',                    },                    body: JSON.stringify({                        query: `                            MATCH (r:Resource)-[:CONTAINS]->(c:Concept)                            WHERE c.name CONTAINS $concept                            RETURN r.title, r.path, c.name, r.cultural_level                            LIMIT 20                        `,                        params: { concept: query.toLowerCase() }                    })                });                if (neo4jResponse.ok) {                    const neo4jData = await neo4jResponse.json();                    // Process Neo4j results                    const conceptualResources = neo4jData.records?.map(record => ({                        title: record.row[0],                        path: record.row[1],                        connection: `Connected through concept: ${record.row[2]}`,                        cultural_level: record.row[3]                    })) || [];                    return {                        semantic: semanticResults.resources || [],                        conceptual: conceptualResources,                        progressions: await findLearningProgressions(query),                        recommendations: await generateIntelligentRecommendations(query, semanticResults.resources || [])                    };                }            } catch (neo4jError) {                }            // Fallback to local processing            return await processWithLocalKnowledgeGraph(query);        }        async function processWithLocalKnowledgeGraph(query) {            // Process using our local knowledge graph (from te_kete_knowledge_graph.json)            const queryLower = query.toLowerCase();            const results = {                semantic: [],                conceptual: [],                progressions: [],                recommendations: []            };            // Intelligent keyword matching against our comprehensive resource database            for (const [key, resources] of Object.entries(comprehensiveResources)) {                if (queryLower.includes(key) || key.includes(queryLower.split(' ')[0])) {                    results.semantic = resources.semantic || [];                    results.conceptual = resources.conceptual || [];                    results.progressions = resources.progressions || [];                    break;                }            }            // Cultural context enhancement            if (queryLower.includes('māori') || queryLower.includes('cultural') || queryLower.includes('whakapapa')) {                results.conceptual.push({                    title: "Living Whakapapa Cultural Mapping",                    path: "experiences/digital-purakau.html",                    connection: "Connected through mātauranga Māori knowledge systems",                    cultural_level: "essential",                    subject_area: "Te Ao Māori",                    description: "Interactive cultural mapping connecting traditional knowledge with contemporary learning."                });                results.conceptual.push({                    title: "Virtual Marae Training Protocol",                    path: "experiences/virtual-marae.html",                    connection: "Connected through tikanga Māori practices",                    cultural_level: "essential",                    subject_area: "Te Ao Māori",                    description: "Immersive cultural education system for marae protocol learning."                });            }            // Add intelligent recommendations            results.recommendations = await generateIntelligentRecommendations(query, results.semantic);            return results;        }        async function findLearningProgressions(query) {            // Find learning progressions based on query context            const queryLower = query.toLowerCase();            const progressions = [];            if (queryLower.includes('writing') || queryLower.includes('essay')) {                progressions.push({                    title: "Writers Toolkit Complete Unit",                    path: "lessons/writers-toolkit/index.html",                    progression: "Writing skills sequence - Foundation to Advanced",                    difficulty: "progressive",                    subject_area: "English",                    description: "Complete writing skills development pathway with 12 interconnected lessons."                });            }            if (queryLower.includes('systems') || queryLower.includes('government')) {                progressions.push({                    title: "Y8 Systems Unit Complete",                    path: "y8-systems-unit.html",                    progression: "Systems thinking sequence - Foundational to Complex",                    difficulty: "intermediate",                    subject_area: "Social Studies",                    description: "5-week systems thinking unit with 31 resources and authentic assessment."                });            }            return progressions;        }        async function generateIntelligentRecommendations(query, semanticResults) {            // Generate AI-powered recommendations based on context            const queryLower = query.toLowerCase();            const recommendations = [];            // Context-aware recommendations            if (queryLower.includes('māori') || queryLower.includes('cultural')) {                recommendations.push({                    title: "Cultural Assessment Framework",                    path: "experiences/cultural-assessment.html",                    reasoning: "Understanding culturally responsive assessment enhances authentic Māori education",                    cultural_level: "essential",                    subject: "Assessment",                    description: "Comprehensive framework for assessing cultural learning authentically."                });            }            if (queryLower.includes('teach') || queryLower.includes('lesson')) {                recommendations.push({                    title: "Research Methods Handout",                    path: "handouts/research-methods-handout.html",                    reasoning: "Strong research skills support effective teaching and learning across all subjects",                    cultural_level: "medium",                    subject: "Cross-curricular",                    description: "Essential research methodology skills for students and educators."                });            }            // Add GraphRAG search recommendation            recommendations.push({                title: "Adaptive Learning Pathways",                path: "experiences/adaptive-pathways.html",                reasoning: "Personalized learning pathways enhance student engagement and cultural connection",                cultural_level: "high",                subject: "Pedagogy",                description: "AI-powered adaptive learning system that responds to individual student needs."            });            return recommendations;        }        function displayResults(query) {            // Intelligent search matching across comprehensive resources            const normalizedQuery = query.toLowerCase();            let matchedResults = null;            // Try exact key matches first            for (let key in comprehensiveResources) {                if (normalizedQuery.includes(key)) {                    matchedResults = comprehensiveResources[key];                    break;                }            }            // If no exact match, use fuzzy matching with EXPANDED CATEGORIES            if (!matchedResults) {                if (normalizedQuery.includes('society') || normalizedQuery.includes('design') || normalizedQuery.includes('government')) {                    matchedResults = comprehensiveResources["design your new society"];                } else if (normalizedQuery.includes('story') || normalizedQuery.includes('purakau') || normalizedQuery.includes('māori') || normalizedQuery.includes('culture')) {                    matchedResults = comprehensiveResources["digital purakau"];                } else if (normalizedQuery.includes('whakapapa') || normalizedQuery.includes('family') || normalizedQuery.includes('connection')) {                    matchedResults = comprehensiveResources["living whakapapa"];                } else if (normalizedQuery.includes('marae') || normalizedQuery.includes('protocol') || normalizedQuery.includes('virtual')) {                    matchedResults = comprehensiveResources["virtual marae"];                } else if (normalizedQuery.includes('writing') || normalizedQuery.includes('essay') || normalizedQuery.includes('peel')) {                    matchedResults = comprehensiveResources["essay writing"];                } else if (normalizedQuery.includes('system') || normalizedQuery.includes('thinking')) {                    matchedResults = comprehensiveResources["systems thinking"];                } else if (normalizedQuery.includes('leaderboard') || normalizedQuery.includes('tracking') || normalizedQuery.includes('assessment')) {                    matchedResults = comprehensiveResources["classroom leaderboard"];                } else if (normalizedQuery.includes('enhanced') || normalizedQuery.includes('climate') || normalizedQuery.includes('microplastic') || normalizedQuery.includes('probability') || normalizedQuery.includes('whakapapa math')) {                    matchedResults = comprehensiveResources["enhanced handouts"];                } else if (normalizedQuery.includes('do now') || normalizedQuery.includes('starter') || normalizedQuery.includes('warm up') || normalizedQuery.includes('panther') || normalizedQuery.includes('whakatauki')) {                    matchedResults = comprehensiveResources["do now activities"];                } else if (normalizedQuery.includes('video') || normalizedQuery.includes('multimedia') || normalizedQuery.includes('bastion point') || normalizedQuery.includes('sovereignty') || normalizedQuery.includes('documentary')) {                    matchedResults = comprehensiveResources["video activities"];                } else if (normalizedQuery.includes('y8') || normalizedQuery.includes('year 8') || normalizedQuery.includes('indigenous') || normalizedQuery.includes('tiriti') || normalizedQuery.includes('colonization')) {                    matchedResults = comprehensiveResources["y8 systems resources"];                } else if (normalizedQuery.includes('game') || normalizedQuery.includes('wordle') || normalizedQuery.includes('spelling') || normalizedQuery.includes('countdown') || normalizedQuery.includes('interactive')) {                    matchedResults = comprehensiveResources["educational games"];                } else if (normalizedQuery.includes('handout') || normalizedQuery.includes('ai ethics') || normalizedQuery.includes('data sovereignty') || normalizedQuery.includes('dawn raids') || normalizedQuery.includes('urban māori')) {                    matchedResults = comprehensiveResources["individual handouts"];                } else if (normalizedQuery.includes('framework') || normalizedQuery.includes('progression') || normalizedQuery.includes('decolonized assessment') || normalizedQuery.includes('literacy')) {                    matchedResults = comprehensiveResources["assessment frameworks"];                } else {                    // Default to featured resources                    matchedResults = comprehensiveResources["default"];                }            }            displaySemanticResults(matchedResults.semantic);            displayConceptualResults(matchedResults.conceptual);            displayProgressionResults(matchedResults.progressions);            displayRecommendations(query);        }        function displaySemanticResults(results) {            const container = document.getElementById('semanticResults');            const count = document.getElementById('semanticCount');            count.textContent = `${results.length} resources`;            container.innerHTML = '';            results.forEach(resource => {                const card = createResourceCard(resource, 'semantic');                container.appendChild(card);            });        }        function displayConceptualResults(results) {            const container = document.getElementById('conceptualResults');            const count = document.getElementById('conceptualCount');            count.textContent = `${results.length} resources`;            container.innerHTML = '';            results.forEach(resource => {                const card = createResourceCard(resource, 'conceptual');                container.appendChild(card);            });        }        function displayProgressionResults(results) {            const container = document.getElementById('progressionResults');            const count = document.getElementById('progressionCount');            count.textContent = `${results.length} resources`;            container.innerHTML = '';            results.forEach(resource => {                const card = createResourceCard(resource, 'progression');                container.appendChild(card);            });        }        function displayRecommendations(query) {            const container = document.getElementById('recommendationResults');            const count = document.getElementById('recommendationCount');            // Get recommendations based on query            const normalizedQuery = query.toLowerCase();            let recommendations = null;            // Try exact matches first            for (let key in recommendationEngine) {                if (normalizedQuery.includes(key)) {                    recommendations = recommendationEngine[key];                    break;                }            }            // Fallback to default recommendations            if (!recommendations) {                recommendations = recommendationEngine["default"];            }            count.textContent = `${recommendations.length} resources`;            container.innerHTML = '';            recommendations.forEach(resource => {                const card = createRecommendationCard(resource);                container.appendChild(card);            });        }        function createResourceCard(resource, type) {            const card = document.createElement('div');            card.className = 'resource-card';            let connectionInfo = '';            if (type === 'conceptual' && resource.connection) {                connectionInfo = `<div class="connection-info">🔗 ${resource.connection}</div>`;            } else if (type === 'progression' && resource.progression) {                connectionInfo = `<div class="connection-info">📈 ${resource.progression}</div>`;            }            let similarityScore = '';            if (type === 'semantic' && resource.similarity) {                const percentage = Math.round(resource.similarity * 100);                similarityScore = `<div class="similarity-score">${percentage}% Match</div>`;            }            let culturalIndicator = '';            if (resource.cultural_level === 'essential' || resource.cultural_level === 'high') {                culturalIndicator = `<div class="cultural-indicator">🌿 ${resource.cultural_level === 'essential' ? 'Essential' : 'High'} Cultural</div>`;            }            card.innerHTML = `                <div class="card-header">                    <div class="card-title">${resource.title}</div>                </div>                <div class="card-meta">                    <div class="meta-tag">${resource.type}</div>                    <div class="meta-tag">${resource.subject}</div>                    ${similarityScore}                    ${culturalIndicator}                </div>                ${connectionInfo}                <div class="card-description">${resource.description}</div>`;            const actions = document.createElement('div');actions.className = 'card-actions';const link = document.createElement('a');link.href = resource.path;link.className = 'btn btn-primary';link.target = '_blank';link.textContent = 'Open Resource';const button = document.createElement('button');button.className = 'btn btn-secondary';button.textContent = 'View Details';button.onclick = () => showResourceDetails(resource.title);actions.appendChild(link);actions.appendChild(button);card.appendChild(actions);            return card;        }        function createRecommendationCard(resource) {            const card = document.createElement('div');            card.className = 'resource-card';            card.style.borderLeft = '4px solid #667eea';            let culturalIndicator = '';            if (resource.cultural_level === 'essential' || resource.cultural_level === 'high') {                culturalIndicator = `<div class="cultural-indicator">🌿 ${resource.cultural_level === 'essential' ? 'Essential' : 'High'} Cultural</div>`;            }            card.innerHTML = `                <div class="card-header">                    <div class="card-title">${resource.title}</div>                </div>                <div class="card-meta">                    <div class="meta-tag">${resource.type}</div>                    <div class="meta-tag">${resource.subject}</div>                    ${culturalIndicator}                </div>                <div class="connection-info" style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); color: #667eea; ">                    🧠 AI Reasoning: ${resource.reasoning}                </div>                <div class="card-description">${resource.description}</div>`;            const actions = document.createElement('div');actions.className = 'card-actions';const link = document.createElement('a');link.href = resource.path;link.className = 'btn btn-primary';link.target = '_blank';link.textContent = 'Open Resource';const button = document.createElement('button');button.className = 'btn btn-secondary';button.textContent = 'View Details';button.onclick = () => showResourceDetails(resource.title);actions.appendChild(link);actions.appendChild(button);card.appendChild(actions);            return card;        }        function showResourceDetails(title) {            }        // Enable Enter key search        document.getElementById('searchInput').addEventListener('keypress', function(e) {            if (e.key === 'Enter') {                performGraphRAGSearch();            }        });        // Auto-focus search input        document.getElementById('searchInput').focus();    </script> <footer class="site-footer no-print"> <div class="footer-content"> <div class="footer-simple"> <div class="footer-brand"> <h3>🧺 Te Kete Ako</h3> <p>"Whaowhia te kete mātauranga" - Fill the basket of knowledge</p> </div> <div class="footer-links"> <span class="text-gray-500 italic" title="Link disabled: ../../../unit-plans.html">Unit Plans (Coming soon)</span> <span class="text-gray-500 italic" title="Link disabled: ../../../lessons.html">Lessons (Coming soon)</span> <span class="text-gray-500 italic" title="Link disabled: ../../../handouts.html">Handouts (Coming soon)</span> <span class="text-gray-500 italic" title="Link disabled: ../../../my-kete.html">My Kete (Coming soon)</span> <span class="text-gray-500 italic" title="Link disabled: ../../../sitemap.html">Sitemap (Coming soon)</span> <span class="text-gray-500 italic" title="Link disabled: ../../../orphans.html">Discover (Coming soon)</span> </div> </div> <div class="footer-bottom"> <span>© 2025 Te Kete Ako - Educational resources for Aotearoa New Zealand</span> </div> </div> </footer><!-- Load Supabase Client --><script src="js/supabase-client.js"></script><!-- Load Auth UI --><script src="js/auth-enhanced.js"></script><div class="mobile-nav-overlay"><div class="mobile-nav-header"><div class="mobile-nav-greeting">Nau mai, haere mai</div><div class="mobile-nav-translation">Welcome to Te Kete Ako</div></div><ul class="mobile-nav-list"><li class="mobile-nav-item"><a class="mobile-nav-link" href="learning-pathways.html"><span class="mobile-nav-icon">🌟</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">Learning Pathways</span><span class="mobile-nav-text-mi">Ngā Ara Ako</span></div></a></li><li class="mobile-nav-item"><a class="mobile-nav-link" href="subjects.html"><span class="mobile-nav-icon">📚</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">Subjects</span><span class="mobile-nav-text-mi">Ngā Marau</span></div></a></li><li class="mobile-nav-item"><a class="mobile-nav-link" href="unit-plans.html"><span class="mobile-nav-icon">📖</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">Unit Plans</span><span class="mobile-nav-text-mi">Ngā Waehere</span></div></a></li><li class="mobile-nav-item"><a class="mobile-nav-link" href="lessons.html"><span class="mobile-nav-icon">🎓</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">Lessons</span><span class="mobile-nav-text-mi">Ngā Akoranga</span></div></a></li><li class="mobile-nav-item"><a class="mobile-nav-link" href="handouts.html"><span class="mobile-nav-icon">📄</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">Handouts</span><span class="mobile-nav-text-mi">Ngā Rauemi</span></div></a></li><li class="mobile-nav-item"><a class="mobile-nav-link" href="games.html"><span class="mobile-nav-icon">🎮</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">Games</span><span class="mobile-nav-text-mi">Ngā Kēmu</span></div></a></li><li class="mobile-nav-item"><a class="mobile-nav-link" href="graphrag-search.html"><span class="mobile-nav-icon">🧠</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">AI Search</span><span class="mobile-nav-text-mi">Rapua AI</span></div></a></li><li class="mobile-nav-item"><a class="mobile-nav-link" href="teacher-dashboard-ai.html"><span class="mobile-nav-icon">🤖</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">AI Teacher Tools</span><span class="mobile-nav-text-mi">Taputapu AI</span></div></a></li><li class="mobile-nav-item"><a class="mobile-nav-link" href="interactive-learning-demo.html"><span class="mobile-nav-icon">⚡</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">Adaptive Learning</span><span class="mobile-nav-text-mi">Ako Tawhiti</span></div></a></li><li class="mobile-nav-item"><a class="mobile-nav-link" href="ai-hub.html"><span class="mobile-nav-icon">🎯</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">AI Hub</span><span class="mobile-nav-text-mi">Pū AI</span></div></a></li><li class="mobile-nav-item"><a class="mobile-nav-link" href="classroom-leaderboard.html"><span class="mobile-nav-icon">🏆</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">Leaderboard</span><span class="mobile-nav-text-mi">Papa Taumata</span></div></a></li><li class="mobile-nav-item auth-mobile-nav"><a class="mobile-nav-link" href="login.html"><span class="mobile-nav-icon">👤</span><div class="mobile-nav-text"><span class="mobile-nav-text-en">Login</span><span class="mobile-nav-text-mi">Uru mai</span></div></a></li></ul><button class="mobile-nav-close">Close Menu</button></div> <script src="/js/components.js"></script><!-- 🎨 ULTIMATE BEAUTY SYSTEM: Complete UX --><!-- Footer --><div id="footer-container"></div><script>  fetch('/components/footer.html').then(r=>r.text()).then(html=>{    document.getElementById('footer-container').innerHTML=html;  });</script><!-- Mobile Navigation --><div id="mobile-nav-bottom"></div><script>  fetch('/components/mobile-bottom-nav.html').then(r=>r.text()).then(html=>{    document.getElementById('mobile-nav-bottom').innerHTML=html;  });</script><!-- Floating Action Button (Help) --><div id="fab-quick-actions"></div><script>  fetch('/components/quick-actions-fab.html').then(r=>r.text()).then(html=>{    document.getElementById('fab-quick-actions').innerHTML=html;  });</script><!-- 🎨 ULTIMATE BEAUTY: Framer Cultural Gestures --><script defer="" src="/js/framer-cultural-gestures-ultimate.js"></script><!-- 📊 ULTIMATE BEAUTY: PostHog Analytics (Privacy-First) --><script defer="" src="/js/posthog-analytics.js"></script></body></link></link></link></link></link></meta></link></link></link></link></link></head></html>