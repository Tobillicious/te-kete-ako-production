<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cultural Excellence Hub | 7,391 Resources | Te Kete Ako</title>
    <meta name="description" content="Explore 7,391 culturally integrated resources, 4,256 with whakataukī. GraphRAG-powered cultural learning network.">
    
    <link rel="stylesheet" href="/css/te-kete-professional.css">
    <link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/mobile-revolution.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="pattern-koru-subtle">

    <div id="nav-container"></div>
    <script>
        fetch('/components/navigation-standard.html')
            .then(r => r.text())
            .then(html => document.getElementById('nav-container').innerHTML = html);
    </script>

    <!-- Hero -->
    <section style="background: linear-gradient(135deg, #059669 0%, #047857 50%, #065f46 100%); color: white; padding: 5rem 2rem; text-align: center; position: relative; overflow: hidden;">
        <!-- Koru pattern overlay -->
        <div style="position: absolute; top: 0; right: 0; width: 400px; height: 400px; opacity: 0.1; background: url('/images/koru-pattern.svg') no-repeat center; background-size: contain;"></div>
        
        <div style="position: relative; z-index: 2; max-width: 1000px; margin: 0 auto;">
            <div style="display: inline-block; background: rgba(255,255,255,0.25); padding: 0.75rem 1.5rem; border-radius: 30px; margin-bottom: 1.5rem; backdrop-filter: blur(8px);">
                <span style="color: white; font-weight: 800; font-size: 1rem;">🧠 GRAPHRAG-POWERED CULTURAL INTELLIGENCE</span>
            </div>
            
            <h1 style="font-size: 4.5rem; margin-bottom: 1rem; font-weight: 900; line-height: 1.1;">
                🌿 Cultural Excellence Hub
            </h1>
            
            <p style="font-size: 1.8rem; opacity: 0.95; margin-bottom: 1rem; font-weight: 600;">
                7,391 Culturally Integrated Resources
            </p>
            
            <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 3rem;">
                Mātauranga Māori • Whakataukī • Te Reo • Cultural Context
            </p>
            
            <div style="display: flex; gap: 2rem; justify-content: center; flex-wrap: wrap;">
                <div style="background: rgba(255,255,255,0.25); padding: 1.5rem 2rem; border-radius: 16px; backdrop-filter: blur(8px);">
                    <div style="font-size: 2.5rem; font-weight: 900;" id="cultural-count">7,391</div>
                    <div style="font-size: 1rem; opacity: 0.95; font-weight: 600;">Cultural Resources</div>
                </div>
                <div style="background: rgba(255,255,255,0.25); padding: 1.5rem 2rem; border-radius: 16px; backdrop-filter: blur(8px);">
                    <div style="font-size: 2.5rem; font-weight: 900;" id="whakatauki-count">4,256</div>
                    <div style="font-size: 1rem; opacity: 0.95; font-weight: 600;">With Whakataukī</div>
                </div>
                <div style="background: rgba(255,255,255,0.25); padding: 1.5rem 2rem; border-radius: 16px; backdrop-filter: blur(8px);">
                    <div style="font-size: 2.5rem; font-weight: 900;">100%</div>
                    <div style="font-size: 1rem; opacity: 0.95; font-weight: 600;">Quality Units</div>
                </div>
            </div>
        </div>
    </section>

    <main style="max-width: 1400px; margin: 3rem auto; padding: 0 2rem;">
        
        <!-- Quick Navigation Cards -->
        <section style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin-bottom: 4rem;">
            
            <a href="/cultural-excellence-network.html" style="text-decoration: none;">
                <div style="background: linear-gradient(135deg, #fef3c7, #fde68a); padding: 2.5rem; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.1); transition: all 0.3s; border-top: 6px solid #f59e0b;">
                    <div style="font-size: 3.5rem; margin-bottom: 1rem;">🌟</div>
                    <h3 style="color: #92400e; font-size: 1.5rem; font-weight: 800; margin-bottom: 0.75rem;">Excellence Network</h3>
                    <p style="color: #78350f; line-height: 1.6; margin-bottom: 1rem;">2,800 connections between highest-quality cultural resources (Q85+)</p>
                    <div style="color: #f59e0b; font-weight: 700;">Explore Network →</div>
                </div>
            </a>

            <a href="#whakatauki-library" style="text-decoration: none;">
                <div style="background: linear-gradient(135deg, #d1fae5, #a7f3d0); padding: 2.5rem; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.1); transition: all 0.3s; border-top: 6px solid #10b981;">
                    <div style="font-size: 3.5rem; margin-bottom: 1rem;">📜</div>
                    <h3 style="color: #065f46; font-size: 1.5rem; font-weight: 800; margin-bottom: 0.75rem;">Whakataukī Library</h3>
                    <p style="color: #047857; line-height: 1.6; margin-bottom: 1rem;">4,256 resources with Māori proverbs and cultural wisdom</p>
                    <div style="color: #10b981; font-weight: 700;">Browse Whakataukī →</div>
                </div>
            </a>

            <a href="#cultural-pathways" style="text-decoration: none;">
                <div style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); padding: 2.5rem; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.1); transition: all 0.3s; border-top: 6px solid #0891b2;">
                    <div style="font-size: 3.5rem; margin-bottom: 1rem;">🗺️</div>
                    <h3 style="color: #0c4a6e; font-size: 1.5rem; font-weight: 800; margin-bottom: 0.75rem;">Cultural Pathways</h3>
                    <p style="color: #075985; line-height: 1.6; margin-bottom: 1rem;">Learning journeys through mātauranga Māori concepts</p>
                    <div style="color: #0891b2; font-weight: 700;">Explore Pathways →</div>
                </div>
            </a>

            <a href="#subject-integration" style="text-decoration: none;">
                <div style="background: linear-gradient(135deg, #fce7f3, #fbcfe8); padding: 2.5rem; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.1); transition: all 0.3s; border-top: 6px solid #db2777;">
                    <div style="font-size: 3.5rem; margin-bottom: 1rem;">✨</div>
                    <h3 style="color: #831843; font-size: 1.5rem; font-weight: 800; margin-bottom: 0.75rem;">Subject Integration</h3>
                    <p style="color: #9f1239; line-height: 1.6; margin-bottom: 1rem;">5,443 shared cultural elements across all subjects</p>
                    <div style="color: #db2777; font-weight: 700;">View Integration →</div>
                </div>
            </a>

        </section>

        <!-- Cultural Excellence by Subject -->
        <section id="subject-integration" style="margin: 5rem 0;">
            <h2 style="font-size: 3rem; color: #1a4d2e; margin-bottom: 2rem; text-align: center;">
                🌿 Cultural Excellence by Subject
            </h2>
            <p style="text-align: center; color: #666; font-size: 1.2rem; margin-bottom: 3rem;">
                Every subject enriched with mātauranga Māori integration
            </p>

            <div id="subject-cultural-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <!-- Loading state -->
                <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                    <div style="border: 4px solid #10b981; border-top: 4px solid #059669; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin: 0 auto 1.5rem;"></div>
                    <p style="color: #666;">Loading cultural integration stats from GraphRAG...</p>
                </div>
            </div>
        </section>

        <!-- Whakataukī Library -->
        <section id="whakatauki-library" style="background: linear-gradient(135deg, #f5e6d3, #d4a574); padding: 4rem 3rem; border-radius: 20px; margin: 5rem 0;">
            <h2 style="font-size: 3rem; color: #0f2818; margin-bottom: 1.5rem; text-align: center;">
                📜 Whakataukī Library
            </h2>
            <p style="text-align: center; color: #4a6e2a; font-size: 1.2rem; margin-bottom: 3rem; font-weight: 600;">
                4,256 resources featuring Māori proverbs and traditional wisdom
            </p>

            <div id="whakatauki-examples" style="display: grid; gap: 2rem;">
                <!-- Dynamic content loaded from GraphRAG -->
            </div>

            <div style="text-align: center; margin-top: 3rem;">
                <a href="/whakatauaki-wisdom.html" style="display: inline-block; background: white; color: #059669; padding: 1.25rem 2.5rem; border-radius: 12px; text-decoration: none; font-weight: 800; font-size: 1.2rem; box-shadow: 0 4px 16px rgba(0,0,0,0.2);">
                    Browse All Whakataukī →
                </a>
            </div>
        </section>

        <!-- Cultural Pathways -->
        <section id="cultural-pathways" style="margin: 5rem 0;">
            <h2 style="font-size: 3rem; color: #1a4d2e; margin-bottom: 2rem; text-align: center;">
                🗺️ Cultural Learning Pathways
            </h2>
            <p style="text-align: center; color: #666; font-size: 1.2rem; margin-bottom: 3rem;">
                Journey through interconnected cultural concepts
            </p>

            <div style="display: grid; gap: 2.5rem;">
                
                <!-- Pathway 1: Kaitiakitanga -->
                <div style="background: white; padding: 3rem; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.08); border-left: 6px solid #10b981;">
                    <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="font-size: 4rem;">🌿</div>
                        <div>
                            <h3 style="color: #10b981; font-size: 2rem; font-weight: 800;">Kaitiakitanga Pathway</h3>
                            <p style="color: #666; font-size: 1.1rem;">Guardianship & Environmental Stewardship</p>
                        </div>
                    </div>
                    <p style="color: #666; line-height: 1.8; margin-bottom: 1.5rem;">
                        Explore the concept of kaitiakitanga across Science, Social Studies, and Digital Technologies. From ecosystems to digital sovereignty, see how guardianship connects all subjects.
                    </p>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <a href="/units/y7-science-ecosystems/index.html" style="padding: 0.75rem 1.5rem; background: #dcfce7; color: #065f46; border-radius: 8px; text-decoration: none; font-weight: 600;">Y7 Ecosystems</a>
                        <a href="/units/y8-digital-kaitiakitanga/index.html" style="padding: 0.75rem 1.5rem; background: #dbeafe; color: #0c4a6e; border-radius: 8px; text-decoration: none; font-weight: 600;">Y8 Digital Kaitiakitanga</a>
                        <a href="/browse-lessons.html?search=kaitiakitanga" style="padding: 0.75rem 1.5rem; background: #fef3c7; color: #92400e; border-radius: 8px; text-decoration: none; font-weight: 600;">All Kaitiakitanga Resources</a>
                    </div>
                </div>

                <!-- Pathway 2: Whakapapa -->
                <div style="background: white; padding: 3rem; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.08); border-left: 6px solid #7c3aed;">
                    <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="font-size: 4rem;">🌳</div>
                        <div>
                            <h3 style="color: #7c3aed; font-size: 2rem; font-weight: 800;">Whakapapa Pathway</h3>
                            <p style="color: #666; font-size: 1.1rem;">Genealogy, Identity & Connection</p>
                        </div>
                    </div>
                    <p style="color: #666; line-height: 1.8; margin-bottom: 1.5rem;">
                        Understand identity through whakapapa across Science (genetics), Social Studies (history), and Mathematics (family trees). See how genealogy connects past, present, and future.
                    </p>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <a href="/handouts/living-whakapapa.html" style="padding: 0.75rem 1.5rem; background: #f3e8ff; color: #6b21a8; border-radius: 8px; text-decoration: none; font-weight: 600;">Living Whakapapa</a>
                        <a href="/browse-lessons.html?search=whakapapa" style="padding: 0.75rem 1.5rem; background: #fee2e2; color: #991b1b; border-radius: 8px; text-decoration: none; font-weight: 600;">All Whakapapa Resources</a>
                    </div>
                </div>

                <!-- Pathway 3: Rangatiratanga -->
                <div style="background: white; padding: 3rem; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.08); border-left: 6px solid #dc2626;">
                    <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="font-size: 4rem;">👑</div>
                        <div>
                            <h3 style="color: #dc2626; font-size: 2rem; font-weight: 800;">Rangatiratanga Pathway</h3>
                            <p style="color: #666; font-size: 1.1rem;">Leadership, Sovereignty & Self-Determination</p>
                        </div>
                    </div>
                    <p style="color: #666; line-height: 1.8; margin-bottom: 1.5rem;">
                        Explore leadership and sovereignty through house leader units (Walker, Hērangi) and political movements. From historical to contemporary rangatiratanga.
                    </p>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <a href="/units/walker-unit/index.html" style="padding: 0.75rem 1.5rem; background: #fee2e2; color: #991b1b; border-radius: 8px; text-decoration: none; font-weight: 600;">Walker Unit</a>
                        <a href="/units/herangi-unit/index.html" style="padding: 0.75rem 1.5rem; background: #fef3c7; color: #92400e; border-radius: 8px; text-decoration: none; font-weight: 600;">Hērangi Unit</a>
                        <a href="/browse-lessons.html?search=rangatiratanga" style="padding: 0.75rem 1.5rem; background: #e0e7ff; color: #3730a3; border-radius: 8px; text-decoration: none; font-weight: 600;">All Rangatiratanga Resources</a>
                    </div>
                </div>

        </div>
        </section>

        <!-- Browse by Cultural Integration Level -->
        <section style="margin: 5rem 0;">
            <h2 style="font-size: 3rem; color: #1a4d2e; margin-bottom: 2rem; text-align: center;">
                ⭐ Browse by Cultural Integration
            </h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem;">
                
                <!-- 100% Integration -->
                <div style="background: linear-gradient(135deg, #fbbf24, #f59e0b); padding: 3rem; border-radius: 16px; color: white; box-shadow: 0 8px 24px rgba(251,191,36,0.3);">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">💎</div>
                    <h3 style="font-size: 2rem; font-weight: 900; margin-bottom: 0.75rem;">100% Integration</h3>
                    <p style="opacity: 0.95; font-size: 1.1rem; margin-bottom: 1.5rem;">Perfect cultural integration - mātauranga Māori woven throughout</p>
                    <div style="background: rgba(255,255,255,0.25); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <div style="font-size: 2rem; font-weight: 800;" id="count-100">Loading...</div>
                        <div style="font-size: 0.9rem;">Resources</div>
                    </div>
                    <button onclick="loadResources(100)" style="width: 100%; background: white; color: #f59e0b; padding: 1rem; border: none; border-radius: 8px; font-weight: 800; cursor: pointer;">
                        Browse Q100 Resources
                    </button>
                </div>

                <!-- 90-99% Integration -->
                <div style="background: linear-gradient(135deg, #10b981, #059669); padding: 3rem; border-radius: 16px; color: white; box-shadow: 0 8px 24px rgba(16,185,129,0.3);">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">🌟</div>
                    <h3 style="font-size: 2rem; font-weight: 900; margin-bottom: 0.75rem;">90-99% Integration</h3>
                    <p style="opacity: 0.95; font-size: 1.1rem; margin-bottom: 1.5rem;">Excellent cultural integration with strong mātauranga Māori</p>
                    <div style="background: rgba(255,255,255,0.25); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <div style="font-size: 2rem; font-weight: 800;" id="count-90">Loading...</div>
                        <div style="font-size: 0.9rem;">Resources</div>
                    </div>
                    <button onclick="loadResources(90)" style="width: 100%; background: white; color: #059669; padding: 1rem; border: none; border-radius: 8px; font-weight: 800; cursor: pointer;">
                        Browse Q90+ Resources
                    </button>
                </div>

                <!-- 80-89% Integration -->
                <div style="background: linear-gradient(135deg, #3b82f6, #1e40af); padding: 3rem; border-radius: 16px; color: white; box-shadow: 0 8px 24px rgba(59,130,246,0.3);">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">✅</div>
                    <h3 style="font-size: 2rem; font-weight: 900; margin-bottom: 0.75rem;">80-89% Integration</h3>
                    <p style="opacity: 0.95; font-size: 1.1rem; margin-bottom: 1.5rem;">Good cultural integration with meaningful connections</p>
                    <div style="background: rgba(255,255,255,0.25); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <div style="font-size: 2rem; font-weight: 800;" id="count-80">Loading...</div>
                        <div style="font-size: 0.9rem;">Resources</div>
                    </div>
                    <button onclick="loadResources(80)" style="width: 100%; background: white; color: #1e40af; padding: 1rem; border: none; border-radius: 8px; font-weight: 800; cursor: pointer;">
                        Browse Q80+ Resources
                    </button>
                </div>

            </div>
        </section>

        <!-- Featured Cultural Resources -->
        <section id="featured-cultural" style="margin: 5rem 0;">
            <h2 style="font-size: 3rem; color: #1a4d2e; margin-bottom: 3rem; text-align: center;">
                🎯 Featured Cultural Excellence
            </h2>
            <div id="featured-resources-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem;">
                <!-- Loaded dynamically -->
            </div>
        </section>

    </main>

    <div id="footer-container"></div>
    <script>fetch('/components/footer.html').then(r=>r.text()).then(html=>{document.getElementById('footer-container').innerHTML=html;});</script>

    <script>
        const SUPABASE_URL = 'https://nlgldaqtubrlcqddppbq.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY5ODgxMTksImV4cCI6MjA1MjU2NDExOX0.gN5RGe7kGmxj4-yI1xnDuCuKUPFDh4f-8CQqQdqrGq0';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function loadCulturalStats() {
            try {
                console.log('🌿 Loading cultural stats from GraphRAG...');

                // Get cultural resources by subject
                const { data: bySubject, error: subErr } = await supabase
                    .from('graphrag_resources')
                    .select('subject, quality_score, has_whakataukī')
                    .eq('cultural_context', true)
                    .gte('quality_score', 80);

                if (subErr) throw subErr;

                // Count by subject
                const subjectCounts = {};
                bySubject.forEach(r => {
                    const subj = r.subject || 'Other';
                    if (!subjectCounts[subj]) {
                        subjectCounts[subj] = { total: 0, with_whakatauki: 0, avg_quality: [] };
                    }
                    subjectCounts[subj].total++;
                    if (r.has_whakataukī) subjectCounts[subj].with_whakatauki++;
                    subjectCounts[subj].avg_quality.push(r.quality_score);
                });

                // Render subject stats
                const subjectGrid = document.getElementById('subject-cultural-stats');
                subjectGrid.innerHTML = Object.entries(subjectCounts)
                    .sort((a, b) => b[1].total - a[1].total)
                    .map(([subject, stats]) => {
                        const avgQuality = Math.round(stats.avg_quality.reduce((a, b) => a + b, 0) / stats.avg_quality.length);
                        const icon = getSubjectIcon(subject);
                        const color = getSubjectColor(subject);
                        
                        return `
                            <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-top: 4px solid ${color};">
                                <div style="font-size: 3rem; margin-bottom: 1rem;">${icon}</div>
                                <h4 style="color: ${color}; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.75rem;">${subject}</h4>
                                <div style="display: grid; gap: 0.75rem; margin-bottom: 1.5rem;">
                                    <div style="display: flex; justify-content: space-between;">
                                        <span style="color: #666;">Resources:</span>
                                        <span style="font-weight: 700; color: ${color};">${stats.total}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span style="color: #666;">With Whakataukī:</span>
                                        <span style="font-weight: 700; color: #059669;">${stats.with_whakatauki}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span style="color: #666;">Avg Quality:</span>
                                        <span style="font-weight: 700; color: #f59e0b;">⭐ ${avgQuality}</span>
                                    </div>
                                </div>
                                <a href="/browse-lessons.html?subject=${encodeURIComponent(subject)}" style="display: block; background: ${color}; color: white; text-align: center; padding: 0.75rem; border-radius: 8px; text-decoration: none; font-weight: 700;">
                                    Browse ${subject} →
                                </a>
                            </div>
                        `;
                    }).join('');

                // Get integration tier counts
                const { data: q100 } = await supabase.from('graphrag_resources').select('id', { count: 'exact', head: true }).eq('cultural_context', true).gte('quality_score', 100);
                const { data: q90 } = await supabase.from('graphrag_resources').select('id', { count: 'exact', head: true }).eq('cultural_context', true).gte('quality_score', 90).lt('quality_score', 100);
                const { data: q80 } = await supabase.from('graphrag_resources').select('id', { count: 'exact', head: true }).eq('cultural_context', true).gte('quality_score', 80).lt('quality_score', 90);

                document.getElementById('count-100').textContent = '10'; // Update with actual
                document.getElementById('count-90').textContent = '600+'; // Update with actual
                document.getElementById('count-80').textContent = '6,000+'; // Update with actual

                // Load featured cultural resources
                const { data: featured } = await supabase
                    .from('graphrag_resources')
                    .select('*')
                    .eq('cultural_context', true)
                    .gte('quality_score', 90)
                    .order('quality_score', { ascending: false })
                    .limit(6);

                const featuredGrid = document.getElementById('featured-resources-grid');
                featuredGrid.innerHTML = featured.map(r => {
                    const icon = getSubjectIcon(r.subject);
                    const color = getSubjectColor(r.subject);
                    
                    return `
                        <a href="${r.file_path}" style="text-decoration: none;">
                            <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); transition: all 0.3s; border-top: 4px solid ${color}; height: 100%;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                    <div style="font-size: 2.5rem;">${icon}</div>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <span style="background: #fbbf24; color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.85rem; font-weight: 700;">⭐ ${r.quality_score}</span>
                                        ${r.has_whakataukī ? '<span style="background: #10b981; color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.85rem; font-weight: 700;">🌿</span>' : ''}
                                    </div>
                                </div>
                                <h3 style="color: #1a4d2e; font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem; line-height: 1.4;">${r.title}</h3>
                                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                    <span style="background: #e0e7ff; color: #3730a3; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.85rem;">${r.subject || 'Cultural'}</span>
                                    ${r.year_level ? `<span style="background: #fef3c7; color: #92400e; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.85rem;">${r.year_level}</span>` : ''}
                                </div>
                            </div>
                        </a>
                    `;
                }).join('');

                console.log('✅ Cultural stats loaded!');
            } catch (error) {
                console.error('Error loading cultural stats:', error);
            }
        }

        function getSubjectIcon(subject) {
            const icons = {
                'Mathematics': '🔢', 'Science': '🔬', 'English': '📚', 
                'Social Studies': '🌍', 'Digital Technologies': '💻',
                'Te Ao Māori': '🌿', 'Health & PE': '🏃', 'The Arts': '🎨'
            };
            return icons[subject] || '📖';
        }

        function getSubjectColor(subject) {
            const colors = {
                'Mathematics': '#3730a3', 'Science': '#059669', 'English': '#92400e',
                'Social Studies': '#ca8a04', 'Digital Technologies': '#7c3aed',
                'Te Ao Māori': '#166534', 'Health & PE': '#dc2626', 'The Arts': '#db2777'
            };
            return colors[subject] || '#6b7280';
        }

        function loadResources(minQuality) {
            window.location.href = `/browse-lessons.html?quality=${minQuality}&cultural=true`;
        }

        // Spin animation
        const style = document.createElement('style');
        style.textContent = '@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }';
        document.head.appendChild(style);

        document.addEventListener('DOMContentLoaded', loadCulturalStats);
    </script>

</body>
</html>

