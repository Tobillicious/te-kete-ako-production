<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Teacher Dashboard | Te Kete Ako</title>
<meta content="Manage your classes, students, and teaching resources" name="description"/>
<!-- UNIFIED DESIGN SYSTEM -->
<link rel="stylesheet" href="/css/te-kete-unified-design-system.css" />
<link rel="stylesheet" href="/css/component-library.css" />
<link rel="stylesheet" href="/css/animations-professional.css" />
<link rel="stylesheet" href="/css/information-dense.css" />

<style id="critical-css">/* CRITICAL CSS - Above-the-fold styles for faster first paint */
/* Inlined in <head> for immediate rendering */

/* CSS Variables - Must load first */
:root {
  --color-primary-500: #1a4d2e;
  --color-primary-700: #0f2818;
  --color-secondary-500: #f5e6d3;
  --color-accent-500: #d4a574;
  --color-surface: #ffffff;
  --color-text: #2c3e50;
  --color-text-secondary: #546e7a;
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
}

/* Reset & Base - Critical only */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, sans-serif;
  line-height: 1.6;
  color: var(--color-text);
  background-color: var(--color-surface);
}

/* Header - Above fold, critical */
header,
nav {
  background-color: var(--color-primary-700);
  color: white;
  position: sticky;
  top: 0;
  z-index: 1000;
  box-shadow: var(--shadow-md);
}

/* Navigation container */
.nav-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 72px;
}

/* Logo/Branding */
.site-logo {
  font-size: 1.5rem;
  font-weight: 700;
  color: white;
  text-decoration: none;
}

/* Main content container */
main {
  max-width: 1200px;
  margin: 2rem auto;
  padding: 0 2rem;
}

/* Typography - Critical headings only */
h1 {
  font-size: 2.5rem;
  color: var(--color-primary-500);
  margin-bottom: 1rem;
  font-weight: 700;
}

h2 {
  font-size: 2rem;
  color: var(--color-primary-700);
  margin-bottom: 0.75rem;
}

/* Loading state - Critical for UX */
.loading {
  text-align: center;
  padding: 4rem;
  color: var(--color-text-secondary);
}

/* Skip to main content - Accessibility */
.skip-to-main {
  position: absolute;
  left: -9999px;
  top: 0;
  background: var(--color-accent-500);
  color: white;
  padding: 1rem;
  text-decoration: none;
  z-index: 9999;
}

.skip-to-main:focus {
  left: 0;
}

/* Critical button styles */
.btn {
  display: inline-block;
  padding: 0.75rem 1.5rem;
  background-color: var(--color-primary-500);
  color: white;
  text-decoration: none;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: background-color 0.2s ease;
}

.btn:hover {
  background-color: var(--color-primary-700);
}

/* Container - Critical layout */
.container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

/* Mobile - Critical breakpoint only */
@media (max-width: 768px) {
  .nav-container {
    padding: 0 1rem;
  }

  h1 {
    font-size: 2rem;
  }

  .container,
  main {
    padding: 0 1rem;
  }
}
</style><link href="/css/te-kete-unified-design-system.css" media="print" onload="this.media='all'" rel="stylesheet"/>
<link href="/css/component-library.css" media="print" onload="this.media='all'" rel="stylesheet"/>
<link href="/css/beautiful-navigation.css" media="print" onload="this.media='all'" rel="stylesheet"/>
<link href="/css/print.css" media="print" rel="stylesheet">
<!-- Supabase Auth -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script defer="" src="/js/teacher-dashboard.js"></script>
</link></head>
<body data-auth-required="true" data-page="teacher-dashboard" data-role-required="teacher">
<!-- Navigation -->
<div id="navigation-container"></div>
<script>
        fetch('/navigation-header.html')
            .then(r => r.text())
            .then(html => document.getElementById('navigation-container').innerHTML = html);
    </script>
<!-- Loading State -->
<div id="loading" style="text-align: center; padding: 4rem;">
<div style="font-size: 3rem;">‚è≥</div>
<p style="font-size: 1.2rem; color: var(--color-neutral-600);">Loading your dashboard...</p>
</div>
<!-- Main Dashboard (Hidden until loaded) -->
<main class="container" id="dashboard" style="display: none; max-width: 1400px; margin: 2rem auto; padding: 0 2rem;">
<!-- Welcome Header -->
<div class="dashboard-header" style="margin-bottom: 3rem;">
<div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 2rem;">
<div>
<h1 style="font-size: 2.5rem; color: var(--color-primary-500); margin-bottom: 0.5rem;">
                        Kia ora, <span id="teacherName">Teacher</span>! üëã
                    </h1>
<p id="teacherSchool" style="font-size: 1.1rem; color: var(--color-neutral-600);">
                        Loading...
                    </p>
</div>
<div style="display: flex; gap: 1rem;">
<button class="btn btn-primary" onclick="showCreateClassModal()">
                        ‚ûï Create New Class
                    </button>
<button class="btn btn-secondary" id="kamarSyncBtn" onclick="syncKAMAR()">
                        üîÑ Sync KAMAR
                    </button>
</div>
</div>
</div>
<!-- Enhanced Resource Discovery Section -->
<section class="resource-discovery" style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 2rem; border-radius: 12px; margin-bottom: 3rem; border: 1px solid rgba(148, 163, 184, 0.1);">
    <header style="text-align: center; margin-bottom: 2rem;">
        <h2 style="color: var(--color-primary); margin-bottom: 0.5rem;">üîç Discover Resources</h2>
        <p style="color: var(--color-text-secondary); max-width: 600px; margin: 0 auto;">Search and filter through our comprehensive collection of culturally-integrated educational resources</p>
    </header>

    <div class="search-container" style="max-width: 600px; margin: 0 auto; position: relative; margin-bottom: 1.5rem;">
        <input type="search" class="search-input" id="resource-search" placeholder="Search resources, units, lessons, handouts..." aria-label="Search resources" style="width: 100%; padding: 1rem 3rem 1rem 1rem; border: 2px solid #e2e8f0; border-radius: 50px; font-size: 1.1rem; transition: all 0.3s ease; background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); color: #64748b; width: 1.5rem; height: 1.5rem;" aria-hidden="true">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
        </svg>
    </div>

    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; justify-content: center;">
        <button class="filter-btn active" data-filter="all" tabindex="0">All Resources</button>
        <button class="filter-btn" data-filter="units" tabindex="0">Units</button>
        <button class="filter-btn" data-filter="lessons" tabindex="0">Lessons</button>
        <button class="filter-btn" data-filter="handouts" tabindex="0">Handouts</button>
        <button class="filter-btn" data-filter="cultural" tabindex="0">Cultural</button>
        <button class="filter-btn" data-filter="featured" tabindex="0">Featured</button>
    </div>

    <div class="results-count" id="resource-results-count" style="text-align: center; color: #64748b; margin-bottom: 1rem; font-weight: 500;">
        Showing all resources
    </div>

    <div class="resource-grid" id="resource-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
        <!-- Featured Resources -->
        <div class="resource-card" data-type="units" data-category="featured" data-topics="units mƒÅori integration curriculum planning">
            <div class="resource-icon" style="font-size: 2rem; margin-bottom: 1rem;">üìö</div>
            <h3>Unit Plans Collection</h3>
            <p>Complete curriculum-aligned units integrating mƒÅtauranga MƒÅori</p>
            <div class="resource-meta">
                <span class="resource-count">16 units</span>
                <span class="resource-type">Featured</span>
            </div>
            <a href="/units/" class="btn btn-primary">Browse Units</a>
        </div>

        <div class="resource-card" data-type="lessons" data-category="featured" data-topics="lessons mƒÅori leadership rangatira social studies">
            <div class="resource-icon" style="font-size: 2rem; margin-bottom: 1rem;">üéì</div>
            <h3>MƒÅori Leadership Lessons</h3>
            <p>Interactive lessons exploring MƒÅori rangatira and leadership</p>
            <div class="resource-meta">
                <span class="resource-count">8 lessons</span>
                <span class="resource-type">Featured</span>
            </div>
            <a href="/lessons/" class="btn btn-primary">View Lessons</a>
        </div>

        <div class="resource-card" data-type="handouts" data-category="featured" data-topics="handouts mƒÅori mathematics english science cultural">
            <div class="resource-icon" style="font-size: 2rem; margin-bottom: 1rem;">üìÑ</div>
            <h3>AI-Generated Resources</h3>
            <p>47 high-quality resources with mƒÅtauranga MƒÅori integration</p>
            <div class="resource-meta">
                <span class="resource-count">47 resources</span>
                <span class="resource-type">Featured</span>
            </div>
            <a href="/generated-resources-alpha/" class="btn btn-primary">Explore Resources</a>
        </div>

        <div class="resource-card" data-type="cultural" data-category="cultural" data-topics="cultural mƒÅori tikanga kaupapa whƒÅnau">
            <div class="resource-icon" style="font-size: 2rem; margin-bottom: 1rem;">üåø</div>
            <h3>Cultural Integration</h3>
            <p>Resources honoring Te Ao MƒÅori and tikanga in education</p>
            <div class="resource-meta">
                <span class="resource-count">25+ resources</span>
                <span class="resource-type">Cultural</span>
            </div>
            <a href="/cultural-integration.html" class="btn btn-primary">Cultural Resources</a>
        </div>
    </div>

    <div class="loading-spinner" id="resource-loading-spinner" style="display: none; text-align: center; padding: 2rem;">
        <div class="spinner" style="width: 40px; height: 40px; border: 3px solid #e2e8f0; border-top: 3px solid var(--color-primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
        <p style="margin-top: 1rem; color: var(--color-text-secondary);">Searching resources...</p>
    </div>

    <div class="no-results" id="resource-no-results" style="display: none; text-align: center; padding: 3rem; color: #64748b;">
        <div style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;">üîç</div>
        <h3>No resources found</h3>
        <p>Try adjusting your search terms or filters</p>
    </div>
</section>

<!-- Quick Stats Cards -->
<div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
<div class="stat-card" style="background: linear-gradient(135deg, #2C5F41, #3b5b23); color: white; padding: 2rem; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
<div style="font-size: 1rem; opacity: 0.9; margin-bottom: 0.5rem;">Total Classes</div>
<div id="totalClasses" style="font-size: 3rem; font-weight: 700;">0</div>
<div style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">Across all year levels</div>
</div>
<div class="stat-card" style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; padding: 2rem; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
<div style="font-size: 1rem; opacity: 0.9; margin-bottom: 0.5rem;">Total Students</div>
<div id="totalStudents" style="font-size: 3rem; font-weight: 700;">0</div>
<div style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">Across all your classes</div>
</div>
<div class="stat-card" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 2rem; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
<div style="font-size: 1rem; opacity: 0.9; margin-bottom: 0.5rem;">Resources Assigned</div>
<div id="resourcesAssigned" style="font-size: 3rem; font-weight: 700;">0</div>
<div style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">This week</div>
</div>
<div class="stat-card" style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 2rem; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
<div style="font-size: 1rem; opacity: 0.9; margin-bottom: 0.5rem;">Avg. Progress</div>
<div id="avgProgress" style="font-size: 3rem; font-weight: 700;">0%</div>
<div style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">Student completion rate</div>
</div>
</div>
<!-- Main Content Tabs -->
<div class="dashboard-tabs" style="margin-bottom: 2rem;">
<div style="border-bottom: 2px solid var(--color-neutral-200); display: flex; gap: 2rem;">
<button class="tab-btn active" data-tab="classes" onclick="switchTab('classes')">
                    üìö My Classes
                </button>
<button class="tab-btn" data-tab="students" onclick="switchTab('students')">
                    üë• All Students
                </button>
<button class="tab-btn" data-tab="resources" onclick="switchTab('resources')">
                    üìñ Resource Library
                </button>
<button class="tab-btn" data-tab="timetable" onclick="switchTab('timetable')">
                    üìÖ Timetable
                </button>
<button class="tab-btn" data-tab="reports" onclick="switchTab('reports')">
                    üìä Reports
                </button>
</div>
</div>
<!-- Tab: My Classes -->
<div class="tab-content active" id="tab-classes">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
<h2 style="font-size: 2rem; color: var(--color-primary-500);">My Classes</h2>
<input placeholder="Search classes..." style="padding: 0.75rem; border: 2px solid var(--color-neutral-300); border-radius: 8px; width: 300px;" type="search"/>
</div>
<div class="classes-grid" id="classesList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 2rem;">
<!-- Classes will be loaded here by JavaScript -->
<div style="grid-column: 1/-1; text-align: center; padding: 4rem; color: var(--color-neutral-500);">
                    Loading your classes...
                </div>
</div>
</div>
<!-- Tab: All Students -->
<div class="tab-content" id="tab-students" style="display: none;">
<h2 style="font-size: 2rem; color: var(--color-primary-500); margin-bottom: 2rem;">All Students</h2>
<div id="studentsList">
<p style="color: var(--color-neutral-600);">Loading students...</p>
</div>
</div>
<!-- Tab: Resource Library -->
<div class="tab-content" id="tab-resources" style="display: none;">
<h2 style="font-size: 2rem; color: var(--color-primary-500); margin-bottom: 2rem;">Resource Library</h2>
<div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
<select id="filterSubject" style="padding: 0.75rem; border: 2px solid var(--color-neutral-300); border-radius: 8px;">
<option value="">All Subjects</option>
<option value="English">English</option>
<option value="Mathematics">Mathematics</option>
<option value="Science">Science</option>
<option value="Social Studies">Social Studies</option>
<option value="Te Reo MƒÅori">Te Reo MƒÅori</option>
</select>
<select id="filterLevel" style="padding: 0.75rem; border: 2px solid var(--color-neutral-300); border-radius: 8px;">
<option value="">All Year Levels</option>
<option value="7">Year 7</option>
<option value="8">Year 8</option>
<option value="9">Year 9</option>
<option value="10">Year 10</option>
<option value="11">Year 11</option>
<option value="12">Year 12</option>
<option value="13">Year 13</option>
</select>
</div>
<div id="resourcesList">
<p style="color: var(--color-neutral-600);">Loading resources...</p>
</div>
</div>
<!-- Tab: Timetable -->
<div class="tab-content" id="tab-timetable" style="display: none;">
<h2 style="font-size: 2rem; color: var(--color-primary-500); margin-bottom: 2rem;">Weekly Timetable</h2>
<div id="timetableView">
<p style="color: var(--color-neutral-600);">Your timetable will appear here.</p>
<p style="color: var(--color-neutral-500); margin-top: 1rem;">
<strong>KAMAR Integration:</strong> If your school uses KAMAR, click "Sync KAMAR" to import your timetable automatically.
                </p>
</div>
</div>
<!-- Tab: Reports -->
<div class="tab-content" id="tab-reports" style="display: none;">
<h2 style="font-size: 2rem; color: var(--color-primary-500); margin-bottom: 2rem;">Student Progress Reports</h2>
<div id="reportsView">
<p style="color: var(--color-neutral-600);">Generate and view student progress reports.</p>
</div>
</div>
</main>
<!-- Modal: Create Class -->
<div class="modal" id="createClassModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
<div class="modal-content" style="background: white; padding: 3rem; border-radius: 16px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
<h2 style="margin-bottom: 2rem; color: var(--color-primary-500);">Create New Class</h2>
<form id="createClassForm">
<div class="form-group">
<label for="classCode">Class Code *</label>
<input id="classCode" placeholder="e.g., 10MAT1" required="" type="text"/>
</div>
<div class="form-group">
<label for="className">Class Name *</label>
<input id="className" placeholder="e.g., Year 10 Mathematics" required="" type="text"/>
</div>
<div class="form-group">
<label for="classYearLevel">Year Level *</label>
<select id="classYearLevel" required="">
<option value="">-- Select year level --</option>
<option value="7">Year 7</option>
<option value="8">Year 8</option>
<option value="9">Year 9</option>
<option value="10">Year 10</option>
<option value="11">Year 11</option>
<option value="12">Year 12</option>
<option value="13">Year 13</option>
</select>
</div>
<div class="form-group">
<label for="classSubject">Subject *</label>
<select id="classSubject" required="">
<option value="">-- Select subject --</option>
<option value="English">English</option>
<option value="Mathematics">Mathematics</option>
<option value="Science">Science</option>
<option value="Social Studies">Social Studies</option>
<option value="Te Reo MƒÅori">Te Reo MƒÅori</option>
<option value="Digital Technologies">Digital Technologies</option>
<option value="Health &amp; PE">Health &amp; PE</option>
<option value="The Arts">The Arts</option>
</select>
</div>
<div class="form-group">
<label for="classRoom">Room</label>
<input id="classRoom" placeholder="e.g., Room 12" type="text"/>
</div>
<div class="form-group">
<label for="classDescription">Description</label>
<textarea id="classDescription" placeholder="Optional notes about this class" rows="3"></textarea>
</div>
<div style="display: flex; gap: 1rem; margin-top: 2rem;">
<button class="btn btn-primary" style="flex: 1;" type="submit">Create Class</button>
<button class="btn btn-secondary" onclick="closeCreateClassModal()" type="button">Cancel</button>
</div>
</form>
</div>
</div>
<style>
        /* Tab Styling */
        .tab-btn {
            padding: 1rem 1.5rem;
            border: none;
            background: none;
            color: var(--color-neutral-600);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
        }
        
        .tab-btn:hover {
            color: var(--color-primary-500);
        }
        
        .tab-btn.active {
            color: var(--color-primary-500);
            border-bottom-color: var(--color-primary-500);
        }
        
        /* Form Styling */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            color: var(--color-neutral-700);
            margin-bottom: 0.5rem;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--color-neutral-300);
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--color-primary-500);
        }
        
        /* Modal */
        .modal {
            display: none;
        }
        
        .modal.show {
            display: flex !important;
        }
        
        /* Class Card */
        .class-card {
            background: white;
            border: 1px solid var(--color-neutral-200);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .class-card:hover {
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            transform: translateY(-4px);
        }
    </style>

    <!-- Density Toggle Button -->
    <button class="density-toggle" id="densityToggle" onclick="toggleDensity()">
        <span id="densityIcon">üìä</span>
        <span id="densityText">Compact View</span>
    </button>

    <script>
        // Density Toggle Functionality
        function toggleDensity() {
            const body = document.body;
            const icon = document.getElementById('densityIcon');
            const text = document.getElementById('densityText');
            
            if (body.classList.contains('compact-mode')) {
                body.classList.remove('compact-mode');
                icon.textContent = 'üìä';
                text.textContent = 'Compact View';
                localStorage.setItem('viewMode', 'comfortable');
            } else {
                body.classList.add('compact-mode');
                icon.textContent = 'üìê';
                text.textContent = 'Comfortable View';
                localStorage.setItem('viewMode', 'compact');
            }
        }

        // Restore saved view mode
        window.addEventListener('DOMContentLoaded', () => {
            const savedMode = localStorage.getItem('viewMode');
            if (savedMode === 'compact') {
                document.body.classList.add('compact-mode');
                document.getElementById('densityIcon').textContent = 'üìê';
                document.getElementById('densityText').textContent = 'Comfortable View';
            }
        });
    </script>

<script src="/js/teacher-dashboard.js"></script>
<!-- COMPACT VIEW TOGGLE (User requested more information density!) -->
<button class="density-toggle" onclick="toggleDensity()" aria-label="Toggle view density">
    <span class="toggle-icon">üìä</span>
    <span class="toggle-text">Compact View</span>
</button>

<script>
// Information Density Toggle - Function over Form!
function toggleDensity() {
    const body = document.body;
    const button = document.querySelector('.density-toggle');
    const icon = button.querySelector('.toggle-icon');
    const text = button.querySelector('.toggle-text');
    
    if (body.classList.contains('compact-mode')) {
        // Switch to comfortable
        body.classList.remove('compact-mode');
        icon.textContent = 'üìä';
        text.textContent = 'Compact View';
        localStorage.setItem('viewDensity', 'comfortable');
    } else {
        // Switch to compact (information dense)
        body.classList.add('compact-mode');
        icon.textContent = 'üìã';
        text.textContent = 'Comfortable View';
        localStorage.setItem('viewDensity', 'compact');
    }
}

// Load saved preference
document.addEventListener('DOMContentLoaded', function() {
    const savedDensity = localStorage.getItem('viewDensity');
    if (savedDensity === 'compact') {
        document.body.classList.add('compact-mode');
        const button = document.querySelector('.density-toggle');
        if (button) {
            button.querySelector('.toggle-icon').textContent = 'üìã';
            button.querySelector('.toggle-text').textContent = 'Comfortable View';
        }
    }
});
</script>

</body>
</html>
