<!DOCTYPE html><!-- =================================================================INTELLIGENT SIDEBAR - GraphRAG-Powered Context NavigationUses GraphRAG relationships to show related resources dynamicallyBased on legacy sidebar patterns + GraphRAG intelligence================================================================= --><aside class="left-sidebar no-print">    <!-- UNIT NAVIGATION WIDGET -->    <div class="sidebar-widget">        <h3 class="sidebar-widget-title">ğŸ“š Unit Navigation</h3>        <ul id="sidebar-unit-nav">            <li><a href="#" id="sidebar-unit-overview">â† Unit Overview</a></li>            <li><a href="#" id="sidebar-prev-lesson">Previous Lesson</a></li>            <li><strong id="sidebar-current">Current Lesson</strong></li>            <li><a href="#" id="sidebar-next-lesson">Next Lesson</a></li>        </ul>    </div>    <!-- TODAY'S WHAKATAUKÄª - Cultural Integration -->    <div class="sidebar-widget">        <h3 class="sidebar-widget-title">ğŸŒ¿ Today's WhakataukÄ«</h3>        <p style="font-style: italic; color: var(--cultural-primary, #059669); font-size: 0.95rem; line-height: 1.4;" id="sidebar-whakatauki">            "NÄu te rourou, nÄku te rourou, ka ora ai te iwi"        </p>        <p style="font-size: 0.85rem; color: #6b7280; margin-top: 0.5rem;" id="sidebar-whakatauki-translation">            With your food basket and my food basket, the people will thrive.        </p>        <p style="font-size: 0.85rem; color: #374151; margin-top: 0.5rem;" id="sidebar-whakatauki-context">            Collaboration and sharing lead to collective success.        </p>    </div>    <!-- RELATED RESOURCES - GraphRAG Powered -->    <div class="sidebar-widget">        <h3 class="sidebar-widget-title">ğŸ”— Related Resources</h3>        <ul id="sidebar-related-resources">            <!-- Dynamically populated by GraphRAG -->            <li><a href="#">ğŸ“„ Loading...</a></li>        </ul>    </div>    <!-- QUICK ACTIONS -->    <div class="sidebar-widget">        <h3 class="sidebar-widget-title">âš¡ Quick Actions</h3>        <ul>            <li><a href="/handouts/">ğŸ“„ All Handouts</a></li>            <li><a href="/games/">ğŸ® Educational Games</a></li>            <li><a href="/teacher-dashboard-ai.html">ğŸ§‘â€ğŸ« Teacher Tools</a></li>            <li><a href="/units/">ğŸ“š Browse All Units</a></li>        </ul>    </div>    <!-- EXTERNAL RESOURCES - Curated Logic -->    <div class="sidebar-widget">        <h3 class="sidebar-widget-title">ğŸŒ External Resources</h3>        <ul id="sidebar-external-resources">            <!-- Dynamically populated based on subject -->            <li><a href="https://www.tewhanake.maori.nz/index.php" target="_blank" rel="noopener">ğŸ“– Te Aka MÄori Dictionary</a></li>            <li><a href="https://nzcurriculum.tki.org.nz/" target="_blank" rel="noopener">ğŸ“‹ NZ Curriculum</a></li>        </ul>    </div>    <!-- PRINT THIS LESSON -->    <div class="sidebar-widget" style="border-top: 2px solid #e5e7eb; padding-top: 1rem;">        <button onclick="window.print()" style="width: 100%; padding: 0.75rem; background: var(--cultural-primary, #059669); color: white; border: none; border-radius: 0.5rem; cursor: pointer; font-weight: 600; font-size: 0.95rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">            ğŸ–¨ï¸ Print This Lesson        </button>        <p style="font-size: 0.75rem; color: #6b7280; margin-top: 0.5rem; text-align: center;">            Optimized for A4 Canon printers        </p>    </div></aside><!-- INTELLIGENT SIDEBAR JAVASCRIPT --><script>/** * Intelligent Sidebar System * Populates sidebar with context-aware resources using GraphRAG */class IntelligentSidebar {    constructor() {        this.currentPath = window.location.pathname;        this.init();    }    init() {        this.detectContext();        this.loadRelatedResources();        this.loadExternalResources();        this.setupNavigation();    }    detectContext() {        // Detect if we're in a lesson, unit, or handout        this.context = {            isLesson: this.currentPath.includes('/lessons/'),            isUnit: this.currentPath.includes('/units/'),            isHandout: this.currentPath.includes('/handouts/'),            yearLevel: this.extractYearLevel(),            subject: this.extractSubject()        };    }    extractYearLevel() {        const match = this.currentPath.match(/y(\d+)/i);        return match ? `Y${match[1]}` : null;    }    extractSubject() {        if (this.currentPath.includes('science')) return 'science';        if (this.currentPath.includes('math')) return 'mathematics';        if (this.currentPath.includes('english')) return 'english';        if (this.currentPath.includes('digital')) return 'digital-tech';        if (this.currentPath.includes('maori') || this.currentPath.includes('mÄori')) return 'te-ao-maori';        return 'general';    }    async loadRelatedResources() {        const container = document.getElementById('sidebar-related-resources');        if (!container) return;        try {            // In production, this would query GraphRAG            // For now, show contextual links            const resources = this.getContextualResources();            container.innerHTML = resources.map(r =>                `<li><a href="${r.url}">${r.icon} ${r.title}</a></li>`            ).join('');        } catch (error) {            console.error('Error loading related resources:', error);            container.innerHTML = '<li style="color: #6b7280;">No related resources found</li>';        }    }    getContextualResources() {        // Return context-appropriate resources        const resources = [];        if (this.context.isLesson) {            resources.push(                { url: '../', icon: 'ğŸ“š', title: 'Unit Overview' },                { url: '../resources/', icon: 'ğŸ“¦', title: 'Unit Resources' }            );        }        if (this.context.yearLevel) {            resources.push({                url: `/units/`,                icon: 'ğŸ“',                title: `More ${this.context.yearLevel} Units`            });        }        if (this.context.subject === 'science') {            resources.push(                { url: '/units/y9-science-ecology/', icon: 'ğŸ”¬', title: 'Y9 Ecology Unit' },                { url: '/units/y7-science-ecosystems/', icon: 'ğŸŒ¿', title: 'Y7 Ecosystems Unit' }            );        } else if (this.context.subject === 'mathematics') {            resources.push(                { url: '/units/y7-maths-algebra/', icon: 'ğŸ“', title: 'Y7 Algebra Unit' },                { url: '/units/mathematics-maori-games/', icon: 'ğŸ²', title: 'MÄori Games Unit' }            );        }        return resources;    }    loadExternalResources() {        const container = document.getElementById('sidebar-external-resources');        if (!container) return;        const external = [            { url: 'https://www.tewhanake.maori.nz/index.php', title: 'ğŸ“– Te Aka MÄori Dictionary' },            { url: 'https://nzcurriculum.tki.org.nz/', title: 'ğŸ“‹ NZ Curriculum' }        ];        // Add subject-specific external resources        if (this.context.subject === 'science') {            external.push(                { url: 'https://www.sciencelearn.org.nz/', title: 'ğŸ”¬ NZ Science Learning Hub' }            );        } else if (this.context.subject === 'mathematics') {            external.push(                { url: 'https://nzmaths.co.nz/', title: 'ğŸ“Š NZMaths' }            );        }        container.innerHTML = external.map(r =>            `<li><a href="${r.url}" target="_blank" rel="noopener">${r.title}</a></li>`        ).join('');    }    setupNavigation() {        // Setup unit navigation links        // This would be populated from actual unit structure in production        const unitOverview = document.getElementById('sidebar-unit-overview');        const prevLesson = document.getElementById('sidebar-prev-lesson');        const nextLesson = document.getElementById('sidebar-next-lesson');        const current = document.getElementById('sidebar-current');        if (current && this.context.isLesson) {            const lessonMatch = this.currentPath.match(/lesson-(\d+)/);            if (lessonMatch) {                current.textContent = `Lesson ${lessonMatch[1]} (Current)`;            }        }    }}// Initialize when DOM is readyif (document.readyState === 'loading') {    document.addEventListener('DOMContentLoaded', () => new IntelligentSidebar());} else {    new IntelligentSidebar();}</script><!-- SIDEBAR STYLES --><style>.left-sidebar {    width: 280px;    position: sticky;    top: 80px;    max-height: calc(100vh - 100px);    overflow-y: auto;    padding: 1.5rem;    background: #ffffff;    border-right: 1px solid #e5e7eb;}.sidebar-widget {    margin-bottom: 2rem;    padding-bottom: 1.5rem;    border-bottom: 1px solid #e5e7eb;}.sidebar-widget:last-child {    border-bottom: none;}.sidebar-widget-title {    font-size: 1rem;    font-weight: 600;    color: var(--cultural-primary, #059669);    margin: 0 0 0.75rem 0;    font-family: var(--font-primary, 'Inter', sans-serif);}.sidebar-widget ul {    list-style: none;    padding: 0;    margin: 0;}.sidebar-widget li {    margin-bottom: 0.5rem;}.sidebar-widget a {    color: #374151;    text-decoration: none;    font-size: 0.9rem;    transition: color 0.2s ease;    display: block;    padding: 0.25rem 0;}.sidebar-widget a:hover {    color: var(--cultural-primary, #059669);    text-decoration: underline;}/* Print optimization */@media print {    .left-sidebar {        display: none !important;    }}/* Mobile responsiveness */@media (max-width: 768px) {    .left-sidebar {        display: none;    }}</style><!-- USAGE INSTRUCTIONS:1. Include this file in lesson pages: <div id="sidebar-container"></div>2. Load via: fetch('/components/sidebar-intelligent.html').then(r => r.text()).then(html => document.getElementById('sidebar-container').innerHTML = html)3. Sidebar auto-detects context (lesson/unit/subject/year)4. Populates related resources from GraphRAG (placeholder for now)5. Shows external resources based on subject6. Includes Print button optimized for A4 Canon printers7. Hidden on mobile and when printing-->