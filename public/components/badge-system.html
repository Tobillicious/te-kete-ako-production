<!DOCTYPE html>
<!-- BADGE SYSTEM COMPONENT - Te Kete Ako Professional Polish -->
<!-- Agent-9 (Kaitiaki Whakawhitinga) - October 15, 2025 -->

<style>
/* Badge System Styles */
.resource-badges {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin: 0.75rem 0;
}

.badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.375rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

/* Status Badges */
.badge-new {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);
}

.badge-new::before {
    content: "‚ú®";
    font-size: 0.9rem;
}

.badge-popular {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    box-shadow: 0 2px 4px rgba(245, 158, 11, 0.3);
}

.badge-popular::before {
    content: "üî•";
    font-size: 0.9rem;
}

.badge-updated {
    background: linear-gradient(135deg, #3b82f6, #2563eb);
    color: white;
    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
}

.badge-updated::before {
    content: "üîÑ";
    font-size: 0.9rem;
}

.badge-cultural {
    background: linear-gradient(135deg, #7a6b1f, #5a4b0f);
    color: white;
    box-shadow: 0 2px 4px rgba(122, 107, 31, 0.3);
}

.badge-cultural::before {
    content: "üåø";
    font-size: 0.9rem;
}

/* Year Level Badges */
.badge-year {
    background: var(--color-gray-200, #f3f4f6);
    color: var(--color-gray-700, #374151);
    border: 1px solid var(--color-gray-300, #d1d5db);
}

.badge-y7 { background: #dbeafe; color: #1e40af; border-color: #93c5fd; }
.badge-y8 { background: #dcfce7; color: #166534; border-color: #86efac; }
.badge-y9 { background: #fef3c7; color: #92400e; border-color: #fde047; }
.badge-y10 { background: #fce7f3; color: #9f1239; border-color: #fbcfe8; }
.badge-y11 { background: #f3e8ff; color: #6b21a8; border-color: #d8b4fe; }
.badge-y12 { background: #ffe4e6; color: #be123c; border-color: #fecdd3; }
.badge-y13 { background: #e0f2fe; color: #075985; border-color: #7dd3fc; }

/* Subject Badges */
.badge-mathematics { background: #dbeafe; color: #1e40af; border-color: #3b82f6; }
.badge-science { background: #d1fae5; color: #065f46; border-color: #10b981; }
.badge-english { background: #f3e8ff; color: #6b21a8; border-color: #8b5cf6; }
.badge-social-studies { background: #fed7aa; color: #92400e; border-color: #f59e0b; }
.badge-te-reo { background: #fef3c7; color: #78350f; border-color: #7a6b1f; }
.badge-arts { background: #fce7f3; color: #9f1239; border-color: #ec4899; }
.badge-technology { background: #cffafe; color: #0e7490; border-color: #06b6d4; }

/* Type Badges */
.badge-lesson { background: #e0e7ff; color: #3730a3; }
.badge-handout { background: #fed7aa; color: #92400e; }
.badge-activity { background: #fce7f3; color: #9f1239; }
.badge-assessment { background: #f0fdf4; color: #166534; }
.badge-game { background: #fef3c7; color: #92400e; }

/* Interactive Badges with Hover */
.badge:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

/* Duration Badges */
.badge-duration {
    background: var(--color-gray-100, #f9fafb);
    color: var(--color-gray-600, #4b5563);
    border: 1px solid var(--color-gray-200, #e5e7eb);
}

.badge-duration::before {
    content: "‚è±Ô∏è";
    font-size: 0.9rem;
}

/* Difficulty Badges */
.badge-easy { background: #d1fae5; color: #065f46; }
.badge-medium { background: #fed7aa; color: #92400e; }
.badge-hard { background: #fee2e2; color: #991b1b; }

/* Quality Badges */
.badge-featured { background: linear-gradient(135deg, #f59e0b, #eab308); color: white; }
.badge-featured::before { content: "‚≠ê"; }

.badge-verified { background: #d1fae5; color: #065f46; }
.badge-verified::before { content: "‚úì"; }

/* Responsive */
@media (max-width: 640px) {
    .badge {
        font-size: 0.7rem;
        padding: 0.3rem 0.6rem;
    }
}

/* Print - Hide Badges */
@media print {
    .resource-badges,
    .badge {
        display: none !important;
    }
}
</style>

<script>
/**
 * Badge System JavaScript
 * Automatically adds badges based on content metadata
 */

window.BadgeSystem = {
    /**
     * Add badges to a resource card
     * @param {HTMLElement} card - The card element
     * @param {Object} metadata - Resource metadata
     */
    addBadges: function(card, metadata) {
        if (!card || !metadata) return;
        
        let badgesContainer = card.querySelector('.resource-badges');
        if (!badgesContainer) {
            badgesContainer = document.createElement('div');
            badgesContainer.className = 'resource-badges';
            card.prepend(badgesContainer);
        }
        
        // Clear existing badges
        badgesContainer.innerHTML = '';
        
        // Add status badges
        if (metadata.isNew) {
            badgesContainer.innerHTML += '<span class="badge badge-new">New</span>';
        }
        if (metadata.isPopular) {
            badgesContainer.innerHTML += '<span class="badge badge-popular">Popular</span>';
        }
        if (metadata.isUpdated) {
            badgesContainer.innerHTML += '<span class="badge badge-updated">Updated</span>';
        }
        if (metadata.isCultural) {
            badgesContainer.innerHTML += '<span class="badge badge-cultural">Cultural</span>';
        }
        if (metadata.isFeatured) {
            badgesContainer.innerHTML += '<span class="badge badge-featured">Featured</span>';
        }
        
        // Add year level badge
        if (metadata.year) {
            badgesContainer.innerHTML += `<span class="badge badge-year badge-y${metadata.year}">Y${metadata.year}</span>`;
        }
        
        // Add subject badge
        if (metadata.subject) {
            const subjectClass = metadata.subject.toLowerCase().replace(/\s+/g, '-');
            badgesContainer.innerHTML += `<span class="badge badge-${subjectClass}">${metadata.subject}</span>`;
        }
        
        // Add type badge
        if (metadata.type) {
            badgesContainer.innerHTML += `<span class="badge badge-${metadata.type.toLowerCase()}">${metadata.type}</span>`;
        }
        
        // Add duration badge
        if (metadata.duration) {
            badgesContainer.innerHTML += `<span class="badge badge-duration">${metadata.duration}</span>`;
        }
    },
    
    /**
     * Auto-detect and add badges to all resource cards on page
     */
    autoDetect: function() {
        const cards = document.querySelectorAll('.resource-card, .lesson-card, .unit-card, .content-card');
        
        cards.forEach(card => {
            const metadata = this.extractMetadata(card);
            if (metadata) {
                this.addBadges(card, metadata);
            }
        });
    },
    
    /**
     * Extract metadata from card element
     * @param {HTMLElement} card
     * @returns {Object} metadata
     */
    extractMetadata: function(card) {
        const metadata = {};
        
        // Try to extract from data attributes
        metadata.year = card.dataset.year || null;
        metadata.subject = card.dataset.subject || null;
        metadata.type = card.dataset.type || null;
        metadata.duration = card.dataset.duration || null;
        metadata.isNew = card.dataset.new === 'true';
        metadata.isPopular = card.dataset.popular === 'true';
        metadata.isUpdated = card.dataset.updated === 'true';
        metadata.isCultural = card.dataset.cultural === 'true';
        metadata.isFeatured = card.dataset.featured === 'true';
        
        // Try to extract from URL or title
        const title = card.querySelector('h2, h3, .card-title')?.textContent || '';
        const link = card.querySelector('a')?.href || '';
        
        // Detect year level from URL or title
        const yearMatch = (link + title).match(/y(\d{1,2})|year[- ](\d{1,2})/i);
        if (yearMatch && !metadata.year) {
            metadata.year = yearMatch[1] || yearMatch[2];
        }
        
        // Detect subject from URL or title
        const subjects = ['mathematics', 'science', 'english', 'social-studies', 'te-reo', 'arts', 'technology'];
        for (const subject of subjects) {
            if ((link + title).toLowerCase().includes(subject)) {
                metadata.subject = subject.charAt(0).toUpperCase() + subject.slice(1).replace('-', ' ');
                break;
            }
        }
        
        return metadata;
    }
};

// Auto-initialize on page load
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => window.BadgeSystem.autoDetect());
} else {
    window.BadgeSystem.autoDetect();
}
</script>

