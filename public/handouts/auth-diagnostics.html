<!DOCTYPE html><html lang="en"><head>
    <title>Authentication Diagnostics | Te Kete Ako</title>

<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>



<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>


    <meta content="te-ao-maori-integrated" name="cultural-context"/>
    <meta content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://unpkg.com https://supabase.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: https://placehold.co; connect-src 'self' https://nlgldaqtubrlcqddppbq.supabase.co https://supabase.com;" http-equiv="Content-Security-Policy"/>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Te Kete Ako - Award-winning educational platform integrating mātauranga Māori with contemporary learning" name="description"/>
    <meta content="education, māori, indigenous, ai, learning, new zealand" name="keywords"/>
    <meta content="Te Kete Ako" name="author"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ⭐ PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link rel="stylesheet" href="/css/professionalization-system.css">

<!-- ⭐ THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link rel="stylesheet" href="/css/te-kete-professional.css"/>
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"/>

<!-- ⭐ COMPONENT STYLES -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/navigation-standard.css">
    <link rel="stylesheet" href="/css/mobile-revolution.css">
    <link rel="stylesheet" href="/css/mobile-first-classroom-tablets.css"/>

<!-- ⭐ PRINT STYLES (media="print" = only for printing) -->
    <link rel="stylesheet" href="/css/print.css" media="print"/>
<link rel="stylesheet" href="/css/print-professional.css" media="print"/>

<!-- ⭐ TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link rel="stylesheet" href="/css/tailwind.css">

<!-- ⭐ CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link rel="stylesheet" href="/css/cascade-fix.css"><body class="pattern-koru-subtle"><!-- Professional Mega Menu Navigation --><script>        fetch('/components/navigation-mega-menu.html')            .then(r => r.text())            .then(html => {                const div = document.createElement('div');                div.innerHTML = html;                document.body.insertBefore(div.firstElementChild, document.body.firstChild);            });    </script><div id="header-component"></div><div class="mobile-nav-overlay" id="mobileNavOverlay"></div><nav class="breadcrumb-nav"><div class="container"><a href="/">Home</a><span class="breadcrumb-separator">/</span><a href="/Users/">Users</a><span class="breadcrumb-separator">/</span><span class="breadcrumb-current">Authentication Diagnostics | Te Kete Ako</span></div></nav><header class="site-header no-print"><div class="nav-container"><a class="nav-brand" href="../index.html">Te Kete Ako</a><nav class="main-nav"><ul><li><a href="../unit-plans.html"><span class="nav-icon">📚</span><span class="nav-text-en">Unit Plans</span><span class="nav-text-mi" lang="mi">Ngā Waehere</span></a></li><li><a href="../teachers/index.html"><span class="nav-icon">🧑‍🏫</span><span class="nav-text-en">Teachers</span><span class="nav-text-mi" lang="mi">Ngā Kaiako</span></a></li><li><a href="../lessons.html"><span class="nav-icon">🎓</span><span class="nav-text-en">Lessons</span><span class="nav-text-mi" lang="mi">Ngā Akoranga</span></a></li><li><a href="../handouts.html"><span class="nav-icon">📄</span><span class="nav-text-en">Handouts</span><span class="nav-text-mi" lang="mi">Ngā Rauemi</span></a></li><li><a href="../games.html"><span class="nav-icon">🎮</span><span class="nav-text-en">Games</span><span class="nav-text-mi" lang="mi">Ngā Kēmu</span></a></li><li class="auth-nav my-kete-link" style="display: none;"><a href="../my-kete.html"><span class="nav-icon">🧺</span>                            My Kete                        </a></li><li class="auth-nav"><a class="login-btn" href="../login.html"><span class="nav-icon">👤</span>                            Login                        </a></li><li class="auth-nav" style="display: none;"><a class="register-btn" href="../register-simple.html"><span class="nav-icon">📝</span>                            Register                        </a></li></ul></nav><nav aria-label="Breadcrumb" class="breadcrumbs no-print"><ol class="breadcrumbs-list" id="breadcrumbs"></ol></nav></div></header><section class="learning-objectives" style="margin: 2rem 0; "><h2 style="color: var(--color-primary); margin-top: 0; align-items: center; gap: 0.5rem;"><span>📚</span><span>Ngā Whāinga Ako | Learning Objectives</span></h2><div ><p style="color: var(--color-text-secondary); font-size: 0.95rem;"><strong>NZ Curriculum:</strong> Phase 4-5 (Years 9-10) | <strong>Adaptable for:</strong> Years 7-10            </p></div><div class="walt-section" ><h3 style="color: var(--color-primary); margin-top: 0;">                WALT (We Are Learning To) | Ngā Whāinga:            </h3><ul class="m-0" style="margin: 0.5rem 0 0;"<li><em>[Teacher: Customize based on your class focus and curriculum objectives]</em></li><li><em>Suggested: Connect to specific Achievement Objectives from NZ Curriculum</em></li></ul></div><div class="sc-section" ><h3 style="color: var(--color-primary); margin-top: 0;">                Success Criteria (WILF - What I'm Looking For) | Ngā Paearu:            </h3><ul class="m-0" style="margin: 0.5rem 0 0;"<li><em>[Teacher: Define what success looks like for your ākonga]</em></li><li><em>Consider: Different success criteria for different learners</em></li></ul></div><div class="differentiation-note" style="background: rgba(59, 130, 246, 0.1); margin-top: 1rem; "><p style="color: var(--color-text-secondary);"><strong>💡 Differentiation:</strong> Look for related resources at different NZ Curriculum phases to provide appropriate scaffolding for diverse ākonga. Consider creating learning pathways that connect resources at increasing complexity.            </p></div></section><div class="mobile-nav-overlay" id="mobileNavOverlay" onclick="closeMobileNav()"></div>    <!-- Professional Mega Menu Navigation -->
    <div id="beautiful-nav-container"></div>
    <script>
        fetch('/components/navigation-standard.html')
            .then(r => r.text())
            .then(html => {
                const div = document.createElement('div');
                div.innerHTML = html;
                document.body.insertBefore(div.firstElementChild, document.body.firstChild);
            });
    </script>
    <main class="main-content" role="main"><div class="diagnostic-container"><h1 class="wiley-hero-title">🔍 Authentication Diagnostics</h1><p>This page helps diagnose and fix authentication issues.</p><div id="diagnosticResults"><p>Running diagnostics...</p></div><div class="fix-instructions"><h2 class="wiley-section-title">🔧 How to Fix Authentication</h2><p><strong>Root Cause:</strong> Mismatched Supabase project URL and API keys</p><h3>Current Configuration:</h3><div class="code-block">                    URL: https://nlgldaqtubrlcqddppbq.supabase.co (✅ CORRECT)<br/>                    API Key: From project "kpawkfxdqzhrhumlutjw" (❌ WRONG PROJECT)                </div><h3>Solution Steps:</h3><ol><li>Go to <a href="https://supabase.com/dashboard" target="_blank">Supabase Dashboard</a></li><li>Select the <strong>nlgldaqtubrlcqddppbq</strong> project</li><li>Go to Settings → API</li><li>Copy the <strong>anon/public</strong> key</li><li>Update the API key in <code>js/env-config.js</code> line 19</li></ol><h3>Expected API Key Format:</h3><div class="code-block">                    Should start with: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIi...                </div><p><em>Notice "nlgldaqtubrlcqddppbq" in the decoded payload instead of "kpawkfxdqzhrhumlutjw"</em></p></div><button onclick="window.location.reload()" class="p-4" style="background: #2E8B57; color: white; padding: 1rem 2rem; border: none; cursor: pointer; "                🔄 Re-run Diagnostics            </button></div></main><script>        async function runDiagnostics() {            const results = document.getElementById('diagnosticResults');            let html = '<h2 class="wiley-section-title">🔍 Diagnostic Results</h2>';            // Check environment configuration            html += '<div class="status-card status-success">';            html += '<h3>✅ Environment Configuration</h3>';            html += `<p>Supabase URL: ${window.ENV.SUPABASE_URL}</p>`;            html += `<p>Environment: ${window.ENV.NODE_ENV}</p>`;            html += '</div>            // Check API key format            const apiKey = window.ENV.SUPABASE_ANON_KEY;            if (apiKey && apiKey !== 'ENVIRONMENT_VARIABLE_REQUIRED') {                try {                    // Decode JWT payload                    const payload = JSON.parse(atob(apiKey.split('.')[1]));                    const projectRef = payload.ref;                    if (projectRef === 'nlgldaqtubrlcqddppbq') {                        html += '<div class="status-card status-success">';                        html += '<h3>✅ API Key Project Match</h3>';                        html += `<p>API key is for correct project: ${projectRef}</p>`;                        html += '</div>                    } else {                        html += '<div class="status-card status-error">';                        html += '<h3>❌ API Key Project Mismatch</h3>';                        html += `<p>API key is for project: <strong>${projectRef}</strong></p>`;                        html += `<p>But trying to connect to: <strong>nlgldaqtubrlcqddppbq</strong></p>`;                        html += '<p><strong>This is why authentication fails!</strong></p>';                        html += '</div>                    }                } catch (e) {                    html += '<div class="status-card status-error">';                    html += '<h3>❌ Invalid API Key Format</h3>';                    html += '<p>API key is not a valid JWT token</p>';                    html += '</div>                }            } else {                html += '<div class="status-card status-error">';                html += '<h3>❌ Missing API Key</h3>';                html += '<p>No API key configured</p>';                html += '</div>            }            // Test Supabase connection            try {                const { data, error } = await supabase.auth.getSession();                if (error) {                    html += '<div class="status-card status-error">';                    html += '<h3>❌ Supabase Connection Failed</h3>';                    html += `<p>Error: ${error.message}</p>`;                    html += '</div>                } else {                    html += '<div class="status-card status-success">';                    html += '<h3>✅ Supabase Connection Working</h3>';                    html += '<p>Successfully connected to Supabase</p>';                    html += '</div>                }            } catch (error) {                html += '<div class="status-card status-error">';                html += '<h3>❌ Supabase Client Error</h3>';                html += `<p>Error: ${error.message}</p>`;                html += '</div>            }            results.innerHTML = html;        }        // Run diagnostics when page loads        document.addEventListener('DOMContentLoaded', runDiagnostics);    </script><!-- Standard auth script includes --><script defer="" src="vendor/supabase.min.js"></script><script defer="" src="js/env-config.js"></script><script defer="" src="js/supabase-client.js"></script><script defer="" src="js/auth-enhanced.js"></script><script defer="" src="js/auth-diagnostics.js"></script><section class="teacher-resources no-print" style="margin: 3rem 0; "><h2 style="color: var(--color-primary); margin-top: 0; align-items: center; gap: 0.5rem;"><span>👨‍🏫</span><span>Teacher Resources | Ngā Rauemi Kaiako</span></h2><div class="resource-tabs" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1.5rem;"><!-- Implementation Guide --><div class="resource-card" ><h3 style="color: var(--color-primary); margin-top: 0;">📋 Implementation Guide</h3><ul class="m-0" style="margin: 0.5rem 0;"<li><strong>Preparation:</strong> 15-20 minutes</li><li><strong>Materials:</strong> [List specific materials needed]</li><li><strong>Room Setup:</strong> [Describe ideal arrangement]</li><li><strong>Prior Knowledge:</strong> [What students should know]</li></ul></div><!-- Answer Keys --><div class="resource-card" ><h3 style="color: var(--color-primary); margin-top: 0;">🔑 Answer Keys</h3><p class="m-0" style="margin: 0.5rem 0;"<em>[Teacher: Complete answer keys for all activities and questions will be added in next enhancement pass]</em></p><p style="font-size: 0.85rem; color: var(--color-text-secondary); ">Include model answers, common mistakes, extension responses</p></div><!-- Assessment Suite --><div class="resource-card" ><h3 style="color: var(--color-primary); margin-top: 0;">📊 Assessment Suite</h3><details ><summary style="cursor: pointer; ">7 Assessment Types Available</summary><ul class="m-0" style="margin: 0.5rem 0; font-size: 0.85rem;"<li>✅ Formative (exit tickets, quick checks)</li><li>✅ Summative (tests, projects)</li><li>✅ Self-assessment rubrics</li><li>✅ Peer assessment protocols</li><li>✅ Portfolio evidence guides</li><li>✅ Practical demonstrations</li><li>✅ Guided social inquiry projects</li></ul></details></div><!-- Differentiation --><div class="resource-card" ><h3 style="color: var(--color-primary); margin-top: 0;">🎯 Differentiation</h3><ul class="m-0" style="margin: 0.5rem 0;"<li><strong>Support:</strong> Simplified tasks, visual aids, sentence starters</li><li><strong>Core:</strong> Standard activities as presented</li><li><strong>Extension:</strong> Open-ended challenges, research tasks</li></ul></div></div><!-- Guided Inquiry Project (if applicable) --><div class="cultural-note" style="background: rgba(241, 143, 1, 0.1); margin-top: 1.5rem; "><p ><strong>🌿 Cultural Note:</strong> When implementing, consider authentic Māori pedagogical approaches (ako, tuakana-teina, wānanga) and ensure cultural safety throughout.            </p></div></section><section class="cultural-integration" style="margin: 2rem 0; "><h2 style="color: var(--color-primary); margin-top: 0; align-items: center; gap: 0.5rem;"><span>🌿</span><span>Cultural Context | Horopaki Ahurea</span></h2><div class="whakatauaki-section" style="margin-bottom: 1.5rem; "><h3 class="m-0" style="color: var(--color-text-secondary); margin: 0 0 0.5rem; text-transform: uppercase; letter-spacing: 1px;"Whakataukī</h3><p class="m-0" style="color: var(--color-primary); margin: 0.5rem 0; font-weight: 500;""Whāia te iti kahurangi"</p><p class="m-0" style="color: var(--color-text-secondary); margin: 0.5rem 0;""Seek the treasure you value most dearly"</p></div><div class="house-values" ><h3 style="color: var(--color-primary); margin-top: 0;">🏛️ Connection to Mangakōtukutuku College Values</h3><div style="background: rgba(241, 143, 1, 0.1); "><p style="font-size: 0.95rem;"><strong style="color: var(--color-accent); text-transform: capitalize;">Whaiora:</strong> Wellbeing - Caring for collective health and prosperity                </p><p class="m-0" style="margin: 0.75rem 0 0; color: var(--color-text-secondary);"                    This learning connects to the value of <strong>whaiara</strong> by encouraging students to engage with content in ways that embody this value.                </p></div></div><div class="cultural-safety" style="background: rgba(27, 67, 50, 0.05); margin-top: 1rem;"><h4 class="m-0" style="font-size: 0.95rem; color: var(--color-primary); margin: 0 0 0.5rem;"🛡️ Cultural Safety Considerations</h4><ul style="color: var(--color-text-secondary);"><li>Approach Māori content with respect and openness</li><li>Recognize students' diverse cultural backgrounds and experiences</li><li>Create space for Māori students to share their perspectives</li><li>Consult with whānau and local iwi for culturally sensitive topics</li></ul></div></section><section class="assessment-tools no-print" style="margin: 3rem 0; "><h2 style="color: var(--color-primary); margin-top: 0; align-items: center; gap: 0.5rem;"><span>📊</span><span>Assessment Tools | Ngā Taputapu Aromatawai</span></h2><div class="assessment-grid" style="gap: 1.5rem; margin-top: 1.5rem;"><!-- Formative Assessment --><div class="assessment-card" ><h3 style="color: var(--color-primary); margin-top: 0;">✅ Formative Assessment (During Learning)</h3><div ><p class="m-0" style="margin: 0.5rem 0;"<strong>Exit Ticket:</strong></p><ul class="m-0" style="margin: 0.5rem 0;"<li>What is one thing you learned today?</li><li>What is one question you still have?</li><li>How does this connect to your own experience?</li></ul><p class="m-0" style="margin: 0.5rem 0;"<strong>Quick Check:</strong> Thumbs up/sideways/down for understanding</p></div></div><!-- Self-Assessment --><div class="assessment-card" ><h3 style="color: var(--color-primary); margin-top: 0;">🎯 Self-Assessment Rubric</h3><table style="font-size: 0.85rem; border-collapse: collapse;"><tr style="background: var(--color-gray-100);"><th >Criteria</th><th >Not Yet</th><th >Getting There</th><th >Got It!</th></tr><tr><td >I understand the key concepts</td><td >☐</td><td >☐</td><td >☐</td></tr><tr style="background: var(--color-gray-50);"><td >I can explain it to others</td><td >☐</td><td >☐</td><td >☐</td></tr><tr><td >I can apply it to new situations</td><td >☐</td><td >☐</td><td >☐</td></tr></table></div><!-- Peer Assessment --><div class="assessment-card" ><h3 style="color: var(--color-primary); margin-top: 0;">👥 Peer Assessment Protocol</h3><div ><p class="m-0" style="margin: 0.5rem 0;"<strong>Tuakana-Teina Approach:</strong></p><ol class="m-0" style="margin: 0.5rem 0;"<li>Two stars: What did they do well?</li><li>One wish: What could be improved?</li><li>Connection: How does this relate to our learning?</li></ol><p class="m-0" style="margin: 0.5rem 0; color: var(--color-text-secondary);"Encourage manaakitanga (respect) in all feedback</p></div></div><!-- Portfolio Evidence --><div class="assessment-card" ><h3 style="color: var(--color-primary); margin-top: 0;">📁 Portfolio Evidence</h3><div ><p class="m-0" style="margin: 0.5rem 0;"<strong>Collect:</strong></p><ul class="m-0" style="margin: 0.5rem 0;"<li>Completed activities/worksheets</li><li>Reflection journal entries</li><li>Photos of practical work</li><li>Peer feedback received</li></ul><p class="m-0" style="margin: 0.5rem 0;"<strong>Reflection Prompt:</strong> How does this work show your growth as a learner?</p></div></div></div><div class="summative-assessment" style="background: rgba(239, 68, 68, 0.1); margin-top: 1.5rem; "><h3 style="color: var(--color-primary); margin-top: 0;">📝 Summative Assessment Options</h3><div style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; "><div><h4 class="m-0" style="font-size: 0.95rem; margin: 0 0 0.5rem;"Written Test</h4><p style="font-size: 0.85rem;">Multiple choice, short answer, extended response</p></div><div><h4 class="m-0" style="font-size: 0.95rem; margin: 0 0 0.5rem;"Project</h4><p style="font-size: 0.85rem;">Research, create, present findings</p></div><div><h4 class="m-0" style="font-size: 0.95rem; margin: 0 0 0.5rem;"Presentation</h4><p style="font-size: 0.85rem;">Oral, visual, or multimedia</p></div><div><h4 class="m-0" style="font-size: 0.95rem; margin: 0 0 0.5rem;"Practical Demo</h4><p style="font-size: 0.85rem;">Skills demonstration, performance task</p></div></div></div></section><div id="footer-component"></div><script defer="" src="/js/te-kete-professional.js"></script><section class="external-resources no-print" style="margin: 3rem 0; "><h2 style="color: var(--color-primary); margin-top: 0;"><span>🔗</span> <span>External Resources</span></h2><div style="gap: 1rem;"><div ><h4 class="m-0" style="margin: 0 0 0.5rem; color: var(--color-primary);"📚 Learning Resources</h4><ul style="font-size: 0.95rem;"><li><a href="https://www.tki.org.nz/" target="_blank">TKI - Te Kete Ipurangi</a></li><li><a href="https://teara.govt.nz/" target="_blank">Te Ara Encyclopedia</a></li><li><a href="https://natlib.govt.nz/" target="_blank">National Library NZ</a></li></ul></div></div></section><script src="/js/components.js"></script><script defer="" src="/js/loading-toast-system.js"></script>    <!-- 🎨 ULTIMATE BEAUTY SYSTEM: Complete UX -->

    <!-- Footer -->
    <div id="footer-container"></div>
    <script>
        fetch('/components/footer.html').then(r=>r.text()).then(html=>{
            document.getElementById('footer-container').innerHTML=html;
        });
    </script>

    <!-- Mobile Navigation -->
    <div id="mobile-nav-bottom"></div>
    <script>
        fetch('/components/mobile-bottom-nav.html').then(r=>r.text()).then(html=>{
            document.getElementById('mobile-nav-bottom').innerHTML=html;
        });
    </script>

    <!-- Floating Action Button (Help) -->
    <div id="fab-quick-actions"></div>
    <script>
        fetch('/components/quick-actions-fab.html').then(r=>r.text()).then(html=>{
            document.getElementById('fab-quick-actions').innerHTML=html;
        });
    </script>

    <!-- 🎨 ULTIMATE BEAUTY: Framer Cultural Gestures -->
    <script src="/js/framer-cultural-gestures-ultimate.js" defer></script>

    <!-- 📊 ULTIMATE BEAUTY: PostHog Analytics (Privacy-First) -->
    <script src="/js/posthog-analytics.js" defer></script>
</body></html>