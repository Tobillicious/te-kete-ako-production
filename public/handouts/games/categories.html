<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://unpkg.com https://supabase.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: https://placehold.co; connect-src 'self' https://nlgldaqtubrlcqddppbq.supabase.co https://supabase.com;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Te Kete Ako - Award-winning educational platform integrating mÄtauranga MÄori with contemporary learning">
    <meta name="keywords" content="education, mÄori, indigenous, ai, learning, new zealand">
    <meta name="author" content="Te Kete Ako">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Categories Challenge | Te Kete Ako Games</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                                                    <link rel="stylesheet" href="/css/te-kete-professional.css">
    <link rel="stylesheet" href="/css/print.css" media="print"/>
</head>
<body>
    <div id="header-component"></div>
    <div class="mobile-nav-overlay" id="mobileNavOverlay"></div>

    <nav class="breadcrumb-nav">
      <div class="container">
        <a href="/">Home</a>
        <span class="breadcrumb-separator">/</span>
        <a href="/Users/">Users</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-current">Categories Challenge | Te Kete Ako Games</span>
      </div>
    </nav>
  
    <a href="../games.html" class="back-link">â† Back to Games</a>
    
    <div class="game-container">
                            <header class="site-header no-print">
        <div class="nav-container">
            <a href="../../index.html" class="nav-brand">Te Kete Ako</a>
            <nav class="main-nav">
                <ul>
                    <li>
                        <a href="../../unit-plans.html">
                            <span class="nav-icon">ğŸ“š</span>
                            <span class="nav-text-en">Unit Plans</span>
                            <span class="nav-text-mi" lang="mi">NgÄ Waehere</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../teachers/index.html">
                            <span class="nav-icon">ğŸ§‘â€ğŸ«</span>
                            <span class="nav-text-en">Teachers</span>
                            <span class="nav-text-mi" lang="mi">NgÄ Kaiako</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../lessons.html">
                            <span class="nav-icon">ğŸ“</span>
                            <span class="nav-text-en">Lessons</span>
                            <span class="nav-text-mi" lang="mi">NgÄ Akoranga</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../handouts.html">
                            <span class="nav-icon">ğŸ“„</span>
                            <span class="nav-text-en">Handouts</span>
                            <span class="nav-text-mi" lang="mi">NgÄ Rauemi</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../games.html">
                            <span class="nav-icon">ğŸ®</span>
                            <span class="nav-text-en">Games</span>
                            <span class="nav-text-mi" lang="mi">NgÄ KÄ“mu</span>  
                        </a>
                    </li>
                    <li class="auth-nav my-kete-link" style="display: none;">
                        <a href="../../my-kete.html">
                            <span class="nav-icon">ğŸ§º</span>
                            My Kete
                        </a>
                    </li>
                    <li class="auth-nav">
                        <a href="../../login.html" class="login-btn">
                            <span class="nav-icon">ğŸ‘¤</span>
                            Login
                        </a>
                    </li>
                    <li class="auth-nav" style="display: none;">
                        <a href="../../register-simple.html" class="register-btn">
                            <span class="nav-icon">ğŸ“</span>
                            Register
                        </a>
                    </li>
                </ul>
            </nav>
            <nav class="breadcrumbs no-print" aria-label="Breadcrumb">
                <ol id="breadcrumbs" class="breadcrumbs-list"></ol>
            </nav>
        </div>
    </header>

    <section class="learning-objectives" style="background: linear-gradient(135deg, #f0f8f0, #e8f5e9); padding: 2rem; border-radius: 12px; margin: 2rem 0; border-left: 4px solid var(--color-pounamu); box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h2 style="color: var(--color-primary); margin-top: 0; display: flex; align-items: center; gap: 0.5rem;">
            <span>ğŸ“š</span>
            <span>NgÄ WhÄinga Ako | Learning Objectives</span>
        </h2>
        
        <div style="background: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
            <p style="margin: 0; color: var(--color-text-secondary); font-size: 0.95rem;">
                <strong>NZ Curriculum:</strong> Phase 4-5 (Years 9-10) | <strong>Adaptable for:</strong> Years 7-10
            </p>
        </div>
        
        <div class="walt-section" style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
            <h3 style="font-size: 1.1rem; color: var(--color-primary); margin-top: 0;">
                WALT (We Are Learning To) | NgÄ WhÄinga:
            </h3>
            <ul style="margin: 0.5rem 0 0;">
                <li><em>[Teacher: Customize based on your class focus and curriculum objectives]</em></li>
                <li><em>Suggested: Connect to specific Achievement Objectives from NZ Curriculum</em></li>
            </ul>
        </div>
        
        <div class="sc-section" style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
            <h3 style="font-size: 1.1rem; color: var(--color-primary); margin-top: 0;">
                Success Criteria (WILF - What I'm Looking For) | NgÄ Paearu:
            </h3>
            <ul style="margin: 0.5rem 0 0;">
                <li><em>[Teacher: Define what success looks like for your Äkonga]</em></li>
                <li><em>Consider: Different success criteria for different learners</em></li>
            </ul>
        </div>

        <div class="maori-pedagogy" style="background: rgba(241, 143, 1, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 3px solid var(--color-accent);">
            <h3 style="font-size: 1.1rem; color: var(--color-primary); margin-top: 0;">
                ğŸŒ¿ NgÄ Tikanga Ako | MÄori Pedagogical Approaches
            </h3>
            <p style="margin: 0.5rem 0; font-size: 0.95rem;">This resource lends itself to authentic MÄori pedagogical practices:</p>
            <ul style="margin: 0.5rem 0 0; font-size: 0.95rem;">
                <li><strong>Ako:</strong> Reciprocal teaching and learning - students and teachers learn together</li>
                <li><strong>Tuakana-teina:</strong> Peer teaching with more experienced students supporting others</li>
                <li><strong>WÄnanga:</strong> Deep collaborative discussion and knowledge sharing</li>
                <li><strong>Mahi tahi:</strong> Working together towards shared understanding</li>
            </ul>
            <p style="margin: 1rem 0 0; font-size: 0.9rem; font-style: italic; color: var(--color-text-secondary);">
                ğŸ’¡ Teacher: Consider how these approaches can be authentically integrated into your lesson delivery.
            </p>
        </div>

        <div class="differentiation-note" style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; margin-top: 1rem; border-left: 3px solid var(--color-info);">
            <p style="margin: 0; font-size: 0.9rem; color: var(--color-text-secondary);">
                <strong>ğŸ’¡ Differentiation:</strong> Look for related resources at different NZ Curriculum phases to provide appropriate scaffolding for diverse Äkonga. Consider creating learning pathways that connect resources at increasing complexity.
            </p>
        </div>
    </section>

    <div class="mobile-nav-overlay" id="mobileNavOverlay" onclick="closeMobileNav()"></div>
        
        <main role="main" class="game-content">
            <!-- Achievement Feedback Container -->
            <div id="achievement-feedback"></div>
        
            
            <!-- Game Setup Phase -->
            <div id="setup-phase" class="game-setup">
                <h2 class="wiley-section-title">ğŸ¯ Game Setup</h2>
                <p style="margin-bottom: 2rem;">Set up your teams and get ready for the Categories Challenge!</p>
                
                <div>
                    <label for="num-teams">Number of Teams:</label>
                    <select id="num-teams" style="margin-left: 1rem; padding: 0.5rem; border-radius: 4px;">
                        <option value="2">2 Teams</option>
                        <option value="3">3 Teams</option>
                        <option value="4">4 Teams</option>
                        <option value="5">5 Teams</option>
                        <option value="6">6 Teams</option>
                    </select>
                </div>
                
                <div class="team-setup" id="team-setup">
                    <!-- Team inputs will be generated here -->
                </div>
                
                <div class="controls">
                    <button class="game-btn" id="start-game">Start Game</button>
                </div>
            </div>
            
            <!-- Round Display Phase -->
            <div id="round-phase" class="hidden">
                <div class="round-display">
                    <div class="round-number" id="round-number">Round 1</div>
                    <div>Category: <span id="current-category"></span></div>
                </div>
                
                <div class="category-display">
                    <div class="category-text" id="category-text">Get Ready!</div>
                    <div class="timer-display" id="timer">60</div>
                </div>
                
                <div class="teams-section" id="teams-display">
                    <!-- Team cards will be generated here -->
                </div>
                
                <div class="controls">
                    <button class="game-btn" id="start-round">Start Round</button>
                    <button class="game-btn hidden" id="end-round">End Round</button>
                    <button class="game-btn hidden" id="next-round">Next Round</button>
                    <button class="game-btn" id="new-game">New Game</button>
                </div>
            </div>
            
            <!-- Answer Input Phase -->
            <div id="answer-phase" class="hidden">
                <div class="round-display">
                    <div>Current Team: <span id="current-team-name"></span></div>
                    <div>Category: <span id="answer-category"></span></div>
                </div>
                
                <div class="answer-input-section">
                    <h3>Enter your answers (one at a time):</h3>
                    <input type="text" id="answer-input" class="answer-input" placeholder="Type an answer and press Enter">
                    <div style="margin-bottom: 1rem;">
                        <label>
                            <input type="checkbox" id="cultural-bonus"> 
                            This is a Te Reo MÄori term (double points!)
                        </label>
                    </div>
                    <button class="game-btn" id="add-answer">Add Answer</button>
                    
                    <div class="answers-list" id="answers-list">
                        <!-- Answers will be displayed here -->
                    </div>
                    
                    <div class="controls" style="margin-top: 2rem;">
                        <button class="game-btn" id="finish-team">Finish Team Answers</button>
                    </div>
                </div>
            </div>
            
            <!-- Results Phase -->
            <div id="results-phase" class="hidden">
                <div class="results-section">
                    <h2 class="wiley-section-title">ğŸ† Round Results</h2>
                    <div class="team-results" id="results-display">
                        <!-- Results will be displayed here -->
                    </div>
                </div>
            </div>
            
            <!-- Game Achievements Widget -->
            <div class="game-achievements-widget" id="achievements-widget">
                <h4>Your Progress</h4>
                <div class="quick-stats" id="quick-stats">
                    <div class="quick-stat">
                        <span class="quick-stat-number" id="games-played">0</span>
                        <div class="quick-stat-label">Games Played</div>
                    </div>
                    <div class="quick-stat">
                        <span class="quick-stat-number" id="total-score">0</span>
                        <div class="quick-stat-label">Total Score</div>
                    </div>
                    <div class="quick-stat">
                        <span class="quick-stat-number" id="current-streak">0</span>
                        <div class="quick-stat-label">Day Streak</div>
                    </div>
                </div>
                <div class="recent-achievements" id="recent-achievements">
                    <!-- Recent achievements will be shown here -->
                </div>
            </div>
        </main>
    </div>
    
    <script src="../js/shared-components.js"></script>
    <script src="../js/gamification-system.js"></script>
    <script>
        /**
         * Categories Challenge Game - Full Implementation
         * Educational team-based vocabulary and critical thinking game
         */
        class CategoriesChallenge {
            constructor() {
                this.teams = [];
                this.currentRound = 1;
                this.currentTeamIndex = 0;
                this.currentCategory = '';
                this.timeLeft = 60;
                this.timer = null;
                this.gamePhase = 'setup'; // setup, round, answer, results
                this.roundAnswers = {}; // Store answers for current round
                this.totalScore = 0;
                this.gamesPlayed = 0;
                
                // Educational categories with cultural integration
                this.categories = {
                    'Te Ao MÄori': [
                        'MÄori gods and goddesses',
                        'Parts of a marae',
                        'Traditional MÄori foods',
                        'MÄori greetings and phrases',
                        'Traditional MÄori crafts',
                        'MÄori place names in NZ',
                        'MÄori legends and stories',
                        'Traditional MÄori games'
                    ],
                    'Aotearoa Geography': [
                        'New Zealand cities',
                        'North Island landmarks',
                        'South Island mountains',
                        'New Zealand rivers',
                        'New Zealand beaches',
                        'National parks in NZ',
                        'New Zealand islands',
                        'Famous NZ tourist attractions'
                    ],
                    'Science & Nature': [
                        'Animals found in New Zealand',
                        'Types of rocks and minerals',
                        'Parts of the human body',
                        'Weather phenomena',
                        'Types of energy',
                        'States of matter',
                        'Chemical elements',
                        'Planets in our solar system'
                    ],
                    'History & Social Studies': [
                        'World War II events',
                        'Ancient civilizations',
                        'Famous historical figures',
                        'Types of government',
                        'Human rights',
                        'Important historical documents',
                        'Colonial period events',
                        'Indigenous peoples worldwide'
                    ],
                    'English & Literature': [
                        'Types of poetry',
                        'Literary devices',
                        'Famous authors',
                        'Book genres',
                        'Parts of speech',
                        'Writing techniques',
                        'Character types in stories',
                        'Figures of speech'
                    ],
                    'Mathematics': [
                        'Types of angles',
                        'Mathematical operations',
                        '2D shapes',
                        '3D shapes',
                        'Units of measurement',
                        'Statistical terms',
                        'Number types',
                        'Mathematical tools'
                    ],
                    'Arts & Creativity': [
                        'Art mediums and materials',
                        'Types of musical instruments',
                        'Art movements',
                        'Colors',
                        'Types of dance',
                        'Elements of art',
                        'Types of sculptures',
                        'Famous artists'
                    ],
                    'General Knowledge': [
                        'Things in a classroom',
                        'Kitchen utensils',
                        'Types of transportation',
                        'Clothing items',
                        'Food categories',
                        'School subjects',
                        'Jobs and occupations',
                        'Household items'
                    ]
                };
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.generateTeamInputs();
                this.loadGameStats();
                this.displayCurrentStats();
            }
            
            setupEventListeners() {
                // Setup phase
                document.getElementById('num-teams').addEventListener('change', () => {
                    this.generateTeamInputs();
                });
                
                document.getElementById('start-game').addEventListener('click', () => {
                    this.startGame();
                });
                
                // Round phase
                document.getElementById('start-round').addEventListener('click', () => {
                    this.startRound();
                });
                
                document.getElementById('end-round').addEventListener('click', () => {
                    this.endRound();
                });
                
                document.getElementById('next-round').addEventListener('click', () => {
                    this.nextRound();
                });
                
                document.getElementById('new-game').addEventListener('click', () => {
                    this.newGame();
                });
                
                // Answer phase
                document.getElementById('answer-input').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.addAnswer();
                    }
                });
                
                document.getElementById('add-answer').addEventListener('click', () => {
                    this.addAnswer();
                });
                
                document.getElementById('finish-team').addEventListener('click', () => {
                    this.finishTeamAnswers();
                });
            }
            
            generateTeamInputs() {
                const numTeams = parseInt(document.getElementById('num-teams').value);
                const teamSetup = document.getElementById('team-setup');
                
                teamSetup.innerHTML = '';
                
                for (let i = 1; i <= numTeams; i++) {
                    const teamDiv = document.createElement('div');
                    teamDiv.className = 'team-input';
                    teamDiv.innerHTML = `
                        <h4>Team ${i}</h4>
                        <input type="text" class="team-name-input" placeholder="Enter team name" value="Team ${i}" data-team="${i}">
                        <div class="team-score">0 points</div>
                    `;
                    teamSetup.appendChild(teamDiv);
                }
            }
            
            startGame() {
                // Collect team names
                this.teams = [];
                const teamInputs = document.querySelectorAll('.team-name-input');
                
                teamInputs.forEach((input, index) => {
                    this.teams.push({
                        id: index + 1,
                        name: input.value.trim() || `Team ${index + 1}`,
                        score: 0,
                        roundScore: 0,
                        answers: []
                    });
                });
                
                if (this.teams.length < 2) {
                    return;
                }
                
                // Initialize game state
                this.currentRound = 1;
                this.currentTeamIndex = 0;
                this.roundAnswers = {};
                
                this.teams.forEach(team => {
                    this.roundAnswers[team.id] = [];
                });
                
                // Select random category
                this.selectRandomCategory();
                
                // Switch to round phase
                this.gamePhase = 'round';
                this.showPhase('round-phase');
                this.updateRoundDisplay();
                this.generateTeamsDisplay();
            }
            
            selectRandomCategory() {
                const categoryKeys = Object.keys(this.categories);
                const randomCategoryKey = categoryKeys[Math.floor(Math.random() * categoryKeys.length)];
                const categoryOptions = this.categories[randomCategoryKey];
                const randomCategory = categoryOptions[Math.floor(Math.random() * categoryOptions.length)];
                
                this.currentCategory = randomCategory;
                document.getElementById('current-category').textContent = randomCategory;
                document.getElementById('category-text').textContent = randomCategory;
            }
            
            generateTeamsDisplay() {
                const teamsDisplay = document.getElementById('teams-display');
                teamsDisplay.innerHTML = '';
                
                this.teams.forEach(team => {
                    const teamCard = document.createElement('div');
                    teamCard.className = 'team-card';
                    teamCard.innerHTML = `
                        <h3>${team.name}</h3>
                        <div class="team-score">${team.score}</div>
                        <div style="font-size: 0.8rem;">Round: ${team.roundScore}</div>
                    `;
                    teamsDisplay.appendChild(teamCard);
                });
            }
            
            updateRoundDisplay() {
                document.getElementById('round-number').textContent = `Round ${this.currentRound}`;
                document.getElementById('current-category').textContent = this.currentCategory;
                document.getElementById('category-text').textContent = this.currentCategory;
            }
            
            startRound() {
                document.getElementById('start-round').classList.add('hidden');
                document.getElementById('end-round').classList.remove('hidden');
                
                // Start with first team
                this.currentTeamIndex = 0;
                this.showAnswerPhase();
            }
            
            showAnswerPhase() {
                if (this.currentTeamIndex >= this.teams.length) {
                    this.showResults();
                    return;
                }
                
                const currentTeam = this.teams[this.currentTeamIndex];
                
                // Update UI for current team
                this.showPhase('answer-phase');
                document.getElementById('current-team-name').textContent = currentTeam.name;
                document.getElementById('answer-category').textContent = this.currentCategory;
                
                // Clear previous answers
                document.getElementById('answer-input').value = '';
                document.getElementById('cultural-bonus').checked = false;
                document.getElementById('answers-list').innerHTML = '';
                
                // Focus on input
                document.getElementById('answer-input').focus();
            }
            
            addAnswer() {
                const input = document.getElementById('answer-input');
                const answer = input.value.trim();
                const isCultural = document.getElementById('cultural-bonus').checked;
                
                if (!answer) return;
                
                const currentTeam = this.teams[this.currentTeamIndex];
                
                // Check for duplicates
                const existingAnswers = this.roundAnswers[currentTeam.id].map(a => a.text.toLowerCase());
                if (existingAnswers.includes(answer.toLowerCase())) {
                    return;
                }
                
                // Add answer
                const answerObj = {
                    text: answer,
                    cultural: isCultural,
                    points: isCultural ? 2 : 1
                };
                
                this.roundAnswers[currentTeam.id].push(answerObj);
                
                // Display answer
                this.displayAnswer(answerObj);
                
                // Clear input
                input.value = '';
                document.getElementById('cultural-bonus').checked = false;
                input.focus();
            }
            
            displayAnswer(answerObj) {
                const answersList = document.getElementById('answers-list');
                const answerDiv = document.createElement('div');
                answerDiv.className = `answer-item ${answerObj.cultural ? 'cultural' : ''}`;
                answerDiv.innerHTML = `
                    <span>${answerObj.text} ${answerObj.cultural ? '(Te Reo - 2pts)' : '(1pt)'}</span>
                    <button class="remove-answer" onclick="this.parentElement.remove()">Ã—</button>
                `;
                answersList.appendChild(answerDiv);
            }
            
            finishTeamAnswers() {
                // Calculate team score for this round
                const currentTeam = this.teams[this.currentTeamIndex];
                const teamAnswers = this.roundAnswers[currentTeam.id];
                
                let roundScore = 0;
                let culturalBonus = 0;
                
                teamAnswers.forEach(answer => {
                    roundScore += answer.points;
                    if (answer.cultural) culturalBonus++;
                });
                
                currentTeam.roundScore = roundScore;
                currentTeam.score += roundScore;
                
                // Move to next team
                this.currentTeamIndex++;
                
                if (this.currentTeamIndex < this.teams.length) {
                    // Show next team
                    this.showAnswerPhase();
                } else {
                    // All teams finished, show results
                    this.showResults();
                }
            }
            
            showResults() {
                this.showPhase('results-phase');
                
                // Sort teams by round score
                const sortedTeams = [...this.teams].sort((a, b) => b.roundScore - a.roundScore);
                
                const resultsDisplay = document.getElementById('results-display');
                resultsDisplay.innerHTML = '';
                
                sortedTeams.forEach((team, index) => {
                    const teamCard = document.createElement('div');
                    teamCard.className = `team-result-card ${index === 0 ? 'winner' : ''}`;
                    
                    const teamAnswers = this.roundAnswers[team.id];
                    const culturalAnswers = teamAnswers.filter(a => a.cultural).length;
                    
                    teamCard.innerHTML = `
                        <h3>${index === 0 ? 'ğŸ† ' : ''}${team.name}</h3>
                        <div style="font-size: 2rem; font-weight: bold; margin: 1rem 0;">${team.roundScore} points</div>
                        <div>Total Score: ${team.score}</div>
                        <div>Answers: ${teamAnswers.length}</div>
                        ${culturalAnswers > 0 ? `<div>ğŸŒŸ Te Reo MÄori: ${culturalAnswers}</div>
                    `;
                    resultsDisplay.appendChild(teamCard);
                });
                
                // Show next round button
                document.getElementById('end-round').classList.add('hidden');
                document.getElementById('next-round').classList.remove('hidden');
                
                // Update total score and report to gamification system
                this.updateTotalScore();
            }
            
            updateTotalScore() {
                const roundTotal = this.teams.reduce((sum, team) => sum + team.roundScore, 0);
                this.totalScore += roundTotal;
                
                // Report to gamification system
                if (window.reportGameCompletion) {
                    const culturalAnswers = Object.values(this.roundAnswers)
                        .flat()
                        .filter(answer => answer.cultural).length;
                    
                    const result = window.reportGameCompletion(
                        'categories',
                        roundTotal,
                        300, // 5 minutes estimated time
                        culturalAnswers > 0,
                        this.teams.length // collaboration score
                    );
                    
                    if (result && result.newAchievements && result.newAchievements.length > 0) {
                        this.showAchievementNotification(result);
                    }
                }
                
                this.displayCurrentStats();
            }
            
            showAchievementNotification(result) {
                const feedback = document.getElementById('achievement-feedback');
                if (!feedback) return;
                
                let message = `Great round! You scored ${this.teams.reduce((sum, team) => sum + team.roundScore, 0)} points.`;
                
                if (result.streak > 1) {
                    message += ` ${result.streak} day streak! ğŸ”¥`;
                }
                
                if (result.newAchievements.length > 0) {
                    message += ` New achievement unlocked! ğŸ‰`;
                }
                
                feedback.innerHTML = `
                    <div class="feedback-message success">
                        <span class="feedback-icon">ğŸ‰</span>
                        <p>${message}</p>
                    </div>
                `;
                
                setTimeout(() => {
                    feedback.innerHTML = '';
                }, 4000);
            }
            
            nextRound() {
                // Reset for next round
                this.currentRound++;
                this.currentTeamIndex = 0;
                this.roundAnswers = {};
                
                this.teams.forEach(team => {
                    team.roundScore = 0;
                    this.roundAnswers[team.id] = [];
                });
                
                // Select new category
                this.selectRandomCategory();
                
                // Return to round phase
                this.showPhase('round-phase');
                this.updateRoundDisplay();
                this.generateTeamsDisplay();
                
                // Show start round button
                document.getElementById('start-round').classList.remove('hidden');
                document.getElementById('next-round').classList.add('hidden');
            }
            
            endRound() {
                if (confirm('Are you sure you want to end the current round?')) {
                    // Force finish current team's answers
                    this.finishTeamAnswers();
                }
            }
            
            newGame() {
                if (confirm('Start a new game? Current progress will be lost.')) {
                    this.teams = [];
                    this.currentRound = 1;
                    this.currentTeamIndex = 0;
                    this.currentCategory = '';
                    this.roundAnswers = {};
                    
                    // Increment games played
                    this.gamesPlayed++;
                    this.saveGameStats();
                    this.displayCurrentStats();
                    
                    this.showPhase('setup-phase');
                    this.generateTeamInputs();
                }
            }
            
            showPhase(phaseId) {
                // Hide all phases
                document.querySelectorAll('#setup-phase, #round-phase, #answer-phase, #results-phase')
                    .forEach(phase => phase.classList.add('hidden'));
                
                // Show selected phase
                document.getElementById(phaseId).classList.remove('hidden');
            }
            
            loadGameStats() {
                const saved = localStorage.getItem('categories_game_stats');
                if (saved) {
                    const stats = JSON.parse(saved);
                    this.gamesPlayed = stats.gamesPlayed || 0;
                    this.totalScore = stats.totalScore || 0;
                }
            }
            
            saveGameStats() {
                const stats = {
                    gamesPlayed: this.gamesPlayed,
                    totalScore: this.totalScore,
                    lastPlayed: new Date().toISOString()
                };
                localStorage.setItem('categories_game_stats', JSON.stringify(stats));
            }
            
            displayCurrentStats() {
                document.getElementById('games-played').textContent = this.gamesPlayed;
                document.getElementById('total-score').textContent = this.totalScore;
                
                // Get current streak from gamification system
                if (window.teKeteAkoGamification) {
                    const summary = window.teKeteAkoGamification.getProgressSummary();
                    document.getElementById('current-streak').textContent = summary.currentStreak;
                }
            }
        }
        
        // Initialize game when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.categoriesGame = new CategoriesChallenge();
        });
    </script>
    
    <!-- External Resources Section - Added by Te Kete Ako Content Enrichment -->
    <section class="external-resources-section no-print" style="border-left: 4px solid var(--color-maori-red, #CC0000); background: linear-gradient(135deg, #f0f8f4 0%, #e8f5e8 100%); padding: 1.5rem; margin: 2rem 0; border-radius: 12px;">
        <h3 style="margin: 0 0 1rem 0; color: var(--color-primary, #2E8B57); display: flex; align-items: center; gap: 0.5rem;">
            <span style="font-size: 1.5rem;">ğŸŒ¿</span>
            Nga Rauemi Tauwehe - External Resources
        </h3>
        <p style="margin: 0 0 1.5rem 0; color: var(--color-text-secondary, #666); font-size: 0.9rem;">
            High-quality resources from official New Zealand education sites to extend and enrich this learning content.
        </p>
        <div class="external-resources-list">
            
            <div class="external-resource-item" style="margin: 1rem 0; padding: 1rem; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <h4 style="margin: 0 0 0.5rem 0; color: var(--color-primary, #2E8B57);">
                    <a href="https://tahurangi.education.govt.nz/" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                        TÄhÅ«rangi - Te Reo MÄori Education Hub
                    </a>
                </h4>
                <p style="margin: 0.5rem 0; color: var(--color-text-secondary, #666); font-size: 0.9rem; line-height: 1.4;">
                    Official NZ government hub for te reo MÄori resources, guidance, and teaching support
                </p>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <span style="background: var(--color-accent, #DAA520); color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem;">
                            Years: 7-13
                        </span>
                        <span style="background: var(--color-secondary, #FF6B35); color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem;">
                            30% Match
                        </span>
                        <span style="background: var(--color-primary, #2E8B57); color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem;">  
                            Official NZ Resource
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #ddd; font-size: 0.8rem; color: var(--color-text-muted, #888);">
            <p style="margin: 0;">
                ğŸ¤– <em>These resources were automatically curated by Te Kete Ako's AI system to complement this content. 
                All external links lead to official New Zealand educational and government websites.</em>
            </p>
        </div>
    </section>

    <section class="cultural-integration" style="background: linear-gradient(135deg, #fff7ed, #ffedd5); padding: 2rem; border-radius: 12px; margin: 2rem 0; border-left: 4px solid var(--color-accent); box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h2 style="color: var(--color-primary); margin-top: 0; display: flex; align-items: center; gap: 0.5rem;">
            <span>ğŸŒ¿</span>
            <span>Cultural Context | Horopaki Ahurea</span>
        </h2>
        
        <div class="whakatauaki-section" style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; text-align: center; border: 2px solid var(--color-accent);">
            <h3 style="font-size: 0.9rem; color: var(--color-text-secondary); margin: 0 0 0.5rem; text-transform: uppercase; letter-spacing: 1px;">WhakataukÄ«</h3>
            <p style="font-size: 1.3rem; font-style: italic; color: var(--color-primary); margin: 0.5rem 0; font-weight: 500;">"WhÄia te iti kahurangi"</p>
            <p style="font-size: 1rem; color: var(--color-text-secondary); margin: 0.5rem 0;">"Seek the treasure you value most dearly"</p>
        </div>
        
        <div class="house-values" style="background: white; padding: 1.5rem; border-radius: 8px;">
            <h3 style="font-size: 1rem; color: var(--color-primary); margin-top: 0;">ğŸ›ï¸ Connection to MangakÅtukutuku College Values</h3>
            <div style="background: rgba(241, 143, 1, 0.1); padding: 1rem; border-radius: 6px; border-left: 3px solid var(--color-accent);">
                <p style="margin: 0; font-size: 0.95rem;">
                    <strong style="color: var(--color-accent); text-transform: capitalize;">Whaiora:</strong> Wellbeing - Caring for collective health and prosperity
                </p>
                <p style="margin: 0.75rem 0 0; font-size: 0.9rem; color: var(--color-text-secondary);">
                    This learning connects to the value of <strong>whaiora</strong> by encouraging students to [engage with content in ways that embody this value].
                </p>
            </div>
        </div>
        
        <div class="cultural-safety" style="background: rgba(27, 67, 50, 0.05); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
            <h4 style="font-size: 0.95rem; color: var(--color-primary); margin: 0 0 0.5rem;">ğŸ›¡ï¸ Cultural Safety Considerations</h4>
            <ul style="font-size: 0.9rem; margin: 0; color: var(--color-text-secondary);">
                <li>Approach MÄori content with respect and openness</li>
                <li>Recognize students' diverse cultural backgrounds and experiences</li>
                <li>Create space for MÄori students to share their perspectives</li>
                <li>Consult with whÄnau and local iwi for culturally sensitive topics</li>
            </ul>
        </div>
    </section>

                    <footer class="site-footer no-print">
        <div class="footer-content">
            <div class="footer-simple">
                <div class="footer-brand">
                    <h3>ğŸ§º Te Kete Ako</h3>
                    <p>"Whaowhia te kete mÄtauranga" - Fill the basket of knowledge</p>
                </div>
                <div class="footer-links">
                    <a href="../../unit-plans.html">Unit Plans</a>
                    <a href="../../lessons.html">Lessons</a>
                    <a href="../../handouts.html">Handouts</a>
                    <a href="../../my-kete.html">My Kete</a>
                    <a href="../../sitemap.html">Sitemap</a>
                    <a href="../../orphans.html">Discover</a>
                </div>
            </div>
            <div class="footer-bottom">
                <span>Â© 2025 Te Kete Ako - Educational resources for Aotearoa New Zealand</span>
            </div>
        </div>
    </footer>


    <!-- Load Supabase Client -->
    <script src="../js/supabase-client.js"></script>
    <!-- Load Auth UI -->
    <script src="../js/auth-enhanced.js"></script>
    

    <section class="teacher-resources no-print" style="background: linear-gradient(135deg, #fff7ed, #ffedd5); padding: 2rem; border-radius: 12px; margin: 3rem 0; border-left: 4px solid var(--color-accent); box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h2 style="color: var(--color-primary); margin-top: 0; display: flex; align-items: center; gap: 0.5rem;">
            <span>ğŸ‘¨â€ğŸ«</span>
            <span>Teacher Resources | NgÄ Rauemi Kaiako</span>
        </h2>
        
        <div class="resource-tabs" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
            
            <!-- Implementation Guide -->
            <div class="resource-card" style="background: white; padding: 1.5rem; border-radius: 8px;">
                <h3 style="font-size: 1rem; color: var(--color-primary); margin-top: 0;">ğŸ“‹ Implementation Guide</h3>
                <ul style="font-size: 0.9rem; margin: 0.5rem 0;">
                    <li><strong>Preparation:</strong> 15-20 minutes</li>
                    <li><strong>Materials:</strong> [List specific materials needed]</li>
                    <li><strong>Room Setup:</strong> [Describe ideal arrangement]</li>
                    <li><strong>Prior Knowledge:</strong> [What students should know]</li>
                </ul>
            </div>
            
            <!-- Answer Keys -->
            <div class="resource-card" style="background: white; padding: 1.5rem; border-radius: 8px;">
                <h3 style="font-size: 1rem; color: var(--color-primary); margin-top: 0;">ğŸ”‘ Answer Keys</h3>
                <p style="font-size: 0.9rem; margin: 0.5rem 0;"><em>[Teacher: Complete answer keys for all activities and questions will be added in next enhancement pass]</em></p>
                <p style="font-size: 0.85rem; color: var(--color-text-secondary); margin: 0;">Include model answers, common mistakes, extension responses</p>
            </div>
            
            <!-- Assessment Suite -->
            <div class="resource-card" style="background: white; padding: 1.5rem; border-radius: 8px;">
                <h3 style="font-size: 1rem; color: var(--color-primary); margin-top: 0;">ğŸ“Š Assessment Suite</h3>
                <details style="font-size: 0.9rem;">
                    <summary style="cursor: pointer; font-weight: 600; margin-bottom: 0.5rem;">7 Assessment Types Available</summary>
                    <ul style="margin: 0.5rem 0; font-size: 0.85rem;">
                        <li>âœ… Formative (exit tickets, quick checks)</li>
                        <li>âœ… Summative (tests, projects)</li>
                        <li>âœ… Self-assessment rubrics</li>
                        <li>âœ… Peer assessment protocols</li>
                        <li>âœ… Portfolio evidence guides</li>
                        <li>âœ… Practical demonstrations</li>
                        <li>âœ… Guided social inquiry projects</li>
                    </ul>
                </details>
            </div>
            
            <!-- Differentiation -->
            <div class="resource-card" style="background: white; padding: 1.5rem; border-radius: 8px;">
                <h3 style="font-size: 1rem; color: var(--color-primary); margin-top: 0;">ğŸ¯ Differentiation</h3>
                <ul style="font-size: 0.9rem; margin: 0.5rem 0;">
                    <li><strong>Support:</strong> Simplified tasks, visual aids, sentence starters</li>
                    <li><strong>Core:</strong> Standard activities as presented</li>
                    <li><strong>Extension:</strong> Open-ended challenges, research tasks</li>
                </ul>
            </div>
            
        </div>
        
        <!-- Guided Inquiry Project (if applicable) -->

        <div class="cultural-note" style="background: rgba(241, 143, 1, 0.1); padding: 1rem; border-radius: 8px; margin-top: 1.5rem; border-left: 3px solid var(--color-accent);">
            <p style="margin: 0; font-size: 0.9rem;">
                <strong>ğŸŒ¿ Cultural Note:</strong> When implementing, consider authentic MÄori pedagogical approaches (ako, tuakana-teina, wÄnanga) and ensure cultural safety throughout.
            </p>
        </div>
    </section>



    <section class="assessment-tools no-print" style="background: linear-gradient(135deg, #eff6ff, #dbeafe); padding: 2rem; border-radius: 12px; margin: 3rem 0; border-left: 4px solid var(--color-info); box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h2 style="color: var(--color-primary); margin-top: 0; display: flex; align-items: center; gap: 0.5rem;">
            <span>ğŸ“Š</span>
            <span>Assessment Tools | NgÄ Taputapu Aromatawai</span>
        </h2>
        
        <div class="assessment-grid" style="display: grid; gap: 1.5rem; margin-top: 1.5rem;">
            
            <!-- Formative Assessment -->
            <div class="assessment-card" style="background: white; padding: 1.5rem; border-radius: 8px; border-left: 3px solid var(--color-success);">
                <h3 style="font-size: 1.1rem; color: var(--color-primary); margin-top: 0;">âœ… Formative Assessment (During Learning)</h3>
                <div style="font-size: 0.9rem;">
                    <p style="margin: 0.5rem 0;"><strong>Exit Ticket:</strong></p>
                    <ul style="margin: 0.5rem 0;">
                        <li>What is one thing you learned today?</li>
                        <li>What is one question you still have?</li>
                        <li>How does this connect to your own experience?</li>
                    </ul>
                    <p style="margin: 0.5rem 0;"><strong>Quick Check:</strong> Thumbs up/sideways/down for understanding</p>
                </div>
            </div>
            
            <!-- Self-Assessment -->
            <div class="assessment-card" style="background: white; padding: 1.5rem; border-radius: 8px; border-left: 3px solid var(--color-secondary);">
                <h3 style="font-size: 1.1rem; color: var(--color-primary); margin-top: 0;">ğŸ¯ Self-Assessment Rubric</h3>
                <table style="width: 100%; font-size: 0.85rem; border-collapse: collapse;">
                    <tr style="background: var(--color-gray-100);">
                        <th style="padding: 0.5rem; text-align: left;">Criteria</th>
                        <th style="padding: 0.5rem; text-align: center;">Not Yet</th>
                        <th style="padding: 0.5rem; text-align: center;">Getting There</th>
                        <th style="padding: 0.5rem; text-align: center;">Got It!</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;">I understand the key concepts</td>
                        <td style="padding: 0.5rem; text-align: center;">â˜</td>
                        <td style="padding: 0.5rem; text-align: center;">â˜</td>
                        <td style="padding: 0.5rem; text-align: center;">â˜</td>
                    </tr>
                    <tr style="background: var(--color-gray-50);">
                        <td style="padding: 0.5rem;">I can explain it to others</td>
                        <td style="padding: 0.5rem; text-align: center;">â˜</td>
                        <td style="padding: 0.5rem; text-align: center;">â˜</td>
                        <td style="padding: 0.5rem; text-align: center;">â˜</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;">I can apply it to new situations</td>
                        <td style="padding: 0.5rem; text-align: center;">â˜</td>
                        <td style="padding: 0.5rem; text-align: center;">â˜</td>
                        <td style="padding: 0.5rem; text-align: center;">â˜</td>
                    </tr>
                </table>
            </div>
            
            <!-- Peer Assessment -->
            <div class="assessment-card" style="background: white; padding: 1.5rem; border-radius: 8px; border-left: 3px solid var(--color-pounamu);">
                <h3 style="font-size: 1.1rem; color: var(--color-primary); margin-top: 0;">ğŸ‘¥ Peer Assessment Protocol</h3>
                <div style="font-size: 0.9rem;">
                    <p style="margin: 0.5rem 0;"><strong>Tuakana-Teina Approach:</strong></p>
                    <ol style="margin: 0.5rem 0;">
                        <li>Two stars: What did they do well?</li>
                        <li>One wish: What could be improved?</li>
                        <li>Connection: How does this relate to our learning?</li>
                    </ol>
                    <p style="margin: 0.5rem 0; font-style: italic; color: var(--color-text-secondary);">Encourage manaakitanga (respect) in all feedback</p>
                </div>
            </div>
            
            <!-- Portfolio Evidence -->
            <div class="assessment-card" style="background: white; padding: 1.5rem; border-radius: 8px; border-left: 3px solid var(--color-accent);">
                <h3 style="font-size: 1.1rem; color: var(--color-primary); margin-top: 0;">ğŸ“ Portfolio Evidence</h3>
                <div style="font-size: 0.9rem;">
                    <p style="margin: 0.5rem 0;"><strong>Collect:</strong></p>
                    <ul style="margin: 0.5rem 0;">
                        <li>Completed activities/worksheets</li>
                        <li>Reflection journal entries</li>
                        <li>Photos of practical work</li>
                        <li>Peer feedback received</li>
                    </ul>
                    <p style="margin: 0.5rem 0;"><strong>Reflection Prompt:</strong> How does this work show your growth as a learner?</p>
                </div>
            </div>
            
        </div>
        
        <div class="summative-assessment" style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 8px; margin-top: 1.5rem; border-left: 3px solid var(--color-error);">
            <h3 style="color: var(--color-primary); margin-top: 0;">ğŸ“ Summative Assessment Options</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; font-size: 0.9rem;">
                <div>
                    <h4 style="font-size: 0.95rem; margin: 0 0 0.5rem;">Written Test</h4>
                    <p style="margin: 0; font-size: 0.85rem;">Multiple choice, short answer, extended response</p>
                </div>
                <div>
                    <h4 style="font-size: 0.95rem; margin: 0 0 0.5rem;">Project</h4>
                    <p style="margin: 0; font-size: 0.85rem;">Research, create, present findings</p>
                </div>
                <div>
                    <h4 style="font-size: 0.95rem; margin: 0 0 0.5rem;">Presentation</h4>
                    <p style="margin: 0; font-size: 0.85rem;">Oral, visual, or multimedia</p>
                </div>
                <div>
                    <h4 style="font-size: 0.95rem; margin: 0 0 0.5rem;">Practical Demo</h4>
                    <p style="margin: 0; font-size: 0.85rem;">Skills demonstration, performance task</p>
                </div>
            </div>
        </div>
    </section>

<div id="footer-component"></div>
      <script src="/js/te-kete-professional.js" defer></script>
</body>
</html>