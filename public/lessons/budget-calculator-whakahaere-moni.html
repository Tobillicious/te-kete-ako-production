<!DOCTYPE html>
<html lang="en">
<head>
    <title>Budget Calculator - Whakahaere Moni | Te Kete Ako</title>

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ‚≠ê PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link rel="stylesheet" href="/css/professionalization-system.css">

<!-- ‚≠ê THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link rel="stylesheet" href="/css/te-kete-professional.css"/>
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"/>

<!-- ‚≠ê COMPONENT STYLES -->
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/navigation-standard.css">
<link rel="stylesheet" href="/css/mobile-revolution.css">
<link rel="stylesheet" href="/css/mobile-first-classroom-tablets.css"/>

<!-- ‚≠ê PRINT STYLES (media="print" = only for printing) -->
<link rel="stylesheet" href="/css/print.css" media="print"/>
<link rel="stylesheet" href="/css/print-professional.css" media="print"/>

<!-- ‚≠ê TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link rel="stylesheet" href="/css/tailwind.css">

<!-- ‚≠ê CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link rel="stylesheet" href="/css/cascade-fix.css">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // Wait for Supabase CDN to load before initializing singleton
    window.addEventListener('DOMContentLoaded', () => {
        if (!window.supabase) {
            // Log to monitoring instead of console
            if (window.posthog) {
                posthog.capture('supabase_cdn_error', {
                    message: 'Supabase CDN failed to load',
                    url: window.location.pathname
                });
            }
        }
    });
</script>
<script src="/js/supabase-singleton.js"></script>
<!-- My Kete Database Integration - loads after singleton -->
<script src="/js/my-kete-database.js"></script>
<!-- Navigation Loader Singleton - loads after supabase setup -->
<script src="/js/navigation-loader.js"></script>
<!-- Component Loader - centralized async component management -->
<script src="/js/component-loader.js"></script>
<meta name="mobile-web-app-capable" content="yes"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<meta content="Te Kete Ako" name="apple-mobile-web-app-title"/>
<link href="/icons/icon-192x192.png" rel="apple-touch-icon"/>
<!-- ENHANCED SEARCH -->
<script src="/js/enhanced-search.js" defer></script>
<!-- MOBILE PERFORMANCE OPTIMIZER -->
<script src="/js/mobile-performance-optimizer.js" defer></script>
<!-- TOUCH TARGET AUDITOR -->
<script src="/js/touch-target-auditor.js" defer></script>
<!-- üé® ULTIMATE CULTURAL GESTURES - Framer Motion System -->
<script src="/js/framer-cultural-gestures-ultimate.js" defer></script>
<!-- Service Worker Registration -->
<script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('‚úÖ PWA: Service Worker registered!', registration);
                    })
                    .catch(error => {
                        // Log to monitoring instead of console
                        if (window.posthog) {
                            posthog.capture('pwa_service_worker_error', {
                                message: 'Service Worker registration failed',
                                error: error.message,
                                url: window.location.pathname
                            });
                        }
                    });
            });
        }
</script>

<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>



<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="theme-color" content="#1a4d2e"/>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color"/>

<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ‚≠ê PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link rel="stylesheet" href="/css/professionalization-system.css">

<!-- ‚≠ê THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link rel="stylesheet" href="/css/te-kete-professional.css"/>
<link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css"/>

<!-- ‚≠ê COMPONENT STYLES -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/navigation-standard.css">
    <link rel="stylesheet" href="/css/mobile-revolution.css">
    <link rel="stylesheet" href="/css/mobile-first-classroom-tablets.css"/>

<!-- ‚≠ê PRINT STYLES (media="print" = only for printing) -->
    <link rel="stylesheet" href="/css/print.css" media="print"/>
<link rel="stylesheet" href="/css/print-professional.css" media="print"/>

<!-- ‚≠ê TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link rel="stylesheet" href="/css/tailwind.css">

<!-- ‚≠ê CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link rel="stylesheet" href="/css/cascade-fix.css">
<body>
    <script src="/components/lesson-handout-pairing.js" defer></script>
    <header class="site-header">
        <div class="nav-container"><a href="/index.html" class="nav-brand">Te Kete Ako</a></div>
    </header>
    <main class="container">
        <h1>Whakahaere Moni - Budget Calculator</h1>
        <section class="cultural-integration" style="background: #fff7ed; p-8  rounded-xl  margin: 2rem 0;">
            <p class="italic" >"Kotahi te k≈çhao o te ngira"</p>
            <p style="text-center ">"There is but one eye of the needle" - Working together with resources</p>
        </section>
        <h2>Learning Objectives</h2>
        <ul>
            <li>Calculate income and expenses for budgeting</li>
            <li>Understand financial literacy concepts</li>
            <li>Make informed financial decisions</li>
            <li>Connect to MƒÅori economic principles (tikanga ≈çhanga)</li>
        </ul>
        <div class="budget-form">
            <h2>üí∞ Personal Budget Planner</h2>
            <div class="form-section">
                <h3>Income / Moni Whiwhi</h3>
                <div class="input-row">
                    <label>Weekly pocket money/allowance:</label>
                    <input type="number" id="pocketMoney" value="20" min="0" step="0.01">
                </div>
                <div class="input-row">
                    <label>Part-time job earnings (weekly):</label>
                    <input type="number" id="jobEarnings" value="0" min="0" step="0.01">
                </div>
                <div class="input-row">
                    <label>Other income (weekly):</label>
                    <input type="number" id="otherIncome" value="0" min="0" step="0.01">
                </div>
            </div>
            <div class="form-section">
                <h3>Expenses / NgƒÅ Utu</h3>
                <div class="input-row">
                    <label>Transport/petrol:</label>
                    <input type="number" id="transport" value="10" min="0" step="0.01">
                </div>
                <div class="input-row">
                    <label>Food/snacks:</label>
                    <input type="number" id="food" value="15" min="0" step="0.01">
                </div>
                <div class="input-row">
                    <label>Entertainment/hobbies:</label>
                    <input type="number" id="entertainment" value="20" min="0" step="0.01">
                </div>
                <div class="input-row">
                    <label>Phone/data:</label>
                    <input type="number" id="phone" value="10" min="0" step="0.01">
                </div>
                <div class="input-row">
                    <label>Savings goal:</label>
                    <input type="number" id="savings" value="10" min="0" step="0.01">
                </div>
                <div class="input-row">
                    <label>Other expenses:</label>
                    <input type="number" id="other" value="5" min="0" step="0.01">
                </div>
            </div>
            <button class="calculate-btn" onclick="calculateBudget()">üìä Calculate Budget</button>
        </div>
        <div id="results" class="result-section">
            <h2>Your Budget Summary</h2>
            <div style="grid  grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div>
                    <h3>Total Income:</h3>
                    <div class="big-number" id="totalIncome">$0</div>
                </div>
                <div>
                    <h3>Total Expenses:</h3>
                    <div class="big-number" id="totalExpenses">$0</div>
                </div>
            </div>
            <div style="text-center  margin: 2rem 0;">
                <h3>Balance:</h3>
                <div class="big-number" id="balance">$0</div>
                <p id="status" style="text-lg  font-weight: bold;"></p>
            </div>
            <div class="chart-container" style="height: 400px; margin: 2rem 0;">
                <canvas id="budgetChart"></canvas>
            </div>
            <div id="recommendations" class="bg-white$1"></div>
        </div>
        <h2>Tikanga ≈åhanga - MƒÅori Economic Principles</h2>
        <div class="activity-card">
            <ul>
                <li><strong>Manaakitanga:</strong> Generosity and reciprocity - supporting whƒÅnau</li>
                <li><strong>Kaitiakitanga:</strong> Guardianship of resources</li>
                <li><strong>Whanaungatanga:</strong> Collective wellbeing over individual wealth</li>
                <li><strong>Aroha:</strong> Compassion in financial decisions</li>
            </ul>
            <p><em>Traditional MƒÅori economics emphasized sustainable resource management and collective prosperity.</em></p>
        </div>
        <h2>Assessment</h2>
        <ol>
            <li>Create a realistic budget for yourself for 4 weeks</li>
            <li>Identify areas where you could reduce expenses</li>
            <li>Set a savings goal and plan how to reach it</li>
            <li>Explain how tikanga ≈çhanga applies to modern budgeting</li>
        </ol>
    </main>
    <footer class="site-footer"><p>¬© 2025 Te Kete Ako</p></footer>
    <script>
        let budgetChart;
        function calculateBudget() {
            const income = {
                pocketMoney: parseFloat(document.getElementById('pocketMoney').value) || 0,
                jobEarnings: parseFloat(document.getElementById('jobEarnings').value) || 0,
                otherIncome: parseFloat(document.getElementById('otherIncome').value) || 0
            };
            const expenses = {
                transport: parseFloat(document.getElementById('transport').value) || 0,
                food: parseFloat(document.getElementById('food').value) || 0,
                entertainment: parseFloat(document.getElementById('entertainment').value) || 0,
                phone: parseFloat(document.getElementById('phone').value) || 0,
                savings: parseFloat(document.getElementById('savings').value) || 0,
                other: parseFloat(document.getElementById('other').value) || 0
            };
            const totalIncome = Object.values(income).reduce((a, b) => a + b, 0);
            const totalExpenses = Object.values(expenses).reduce((a, b) => a + b, 0);
            const balance = totalIncome - totalExpenses;
            document.getElementById('totalIncome').textContent = '$' + totalIncome.toFixed(2);
            document.getElementById('totalExpenses').textContent = '$' + totalExpenses.toFixed(2);
            document.getElementById('balance').textContent = '$' + balance.toFixed(2);
            const statusEl = document.getElementById('status');
            if (balance > 0) {
                statusEl.textContent = '‚úÖ Budget Surplus - Ka pai!';
                statusEl.className = 'status-positive';
            } else if (balance === 0) {
                statusEl.textContent = '‚öñÔ∏è Balanced Budget';
                statusEl.style.color = '#f59e0b';
            } else {
                statusEl.textContent = '‚ö†Ô∏è Budget Deficit - Review expenses';
                statusEl.className = 'status-negative';
            }
            document.getElementById('results').classList.add('show');
            
            // Chart
            const ctx = document.getElementById('budgetChart').getContext('2d');
            if (budgetChart) budgetChart.destroy();
            budgetChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Transport', 'Food', 'Entertainment', 'Phone', 'Savings', 'Other'],
                    datasets: [{
                        data: Object.values(expenses),
                        backgroundColor: ['#ef4444', '#f59e0b', '#10b981', '#3b82f6', '#8b5cf6', '#6b7280']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { title: { display: true, text: 'Expense Breakdown' }, legend: { position: 'bottom' } }
                }
            });
            
            // Recommendations
            const recEl = document.getElementById('recommendations');
            let recs = '<h4>üí° Budget Tips:</h4><ul>';
            if (balance < 0) {
                recs += '<li>‚ö†Ô∏è You\'re spending more than you earn! Consider cutting back.</li>';
            }
            if (expenses.entertainment > totalIncome * 0.3) {
                recs += '<li>Entertainment is over 30% of income - could you reduce this?</li>';
            }
            if (expenses.savings < totalIncome * 0.1) {
                recs += '<li>Try to save at least 10% of your income!</li>';
            }
            if (balance > totalIncome * 0.5) {
                recs += '<li>Great surplus! Consider increasing your savings goal.</li>';
            }
            recs += '<li>üå± Remember kaitiakitanga - be a good guardian of your resources!</li>';
            recs += '</ul>';
            recEl.innerHTML = recs;
        }
    </script>

<!-- üîó GraphRAG Similar Resources Component -->
<div id="similar-resources" data-resource-path="/public/lessons/budget-calculator-whakahaere-moni.html"></div>


<!-- PARALLEL COMPONENT LOADING - No more 2-3s delay! -->
<script>
    // Load all components in parallel for instant page display
    // PARALLEL COMPONENT LOADING - No more 2-3s delay!
Promise.all([
    // Components will be loaded here
]).then(() => {
    console.log('‚úÖ All components loaded in parallel');
}).catch(err => {
    if (window.posthog) {
        posthog.capture('component_loading_error', {
            message: err.message,
            url: window.location.pathname
        });
    }
});
        }
        // Show user-friendly message instead of error
        });
</script>
</body>
</html>

