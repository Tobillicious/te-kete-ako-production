<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algebra Pattern Explorer | Te Kete Ako</title>
    <link rel="stylesheet" href="/css/te-kete-professional.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        .pattern-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(60px, 1fr)); gap: 10px; margin: 2rem 0; }
        .pattern-block { width: 60px; height: 60px; border: 2px solid var(--color-primary); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; background: white; }
        .koru-pattern { background: linear-gradient(135deg, #ecfdf5, #d1fae5) !important; }
        .input-row { display: grid; grid-template-columns: 1fr 2fr; gap: 1rem; align-items: center; margin: 1rem 0; }
        .calc-btn { background: var(--color-primary); color: white; padding: 1rem 2rem; border: none; border-radius: 6px; cursor: pointer; margin: 1rem 0; }
        .result-box { background: #e0f2fe; padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0; display: none; }
        .result-box.show { display: block; }
    </style>
    <script src="/js/css-safeguard.js" defer></script>
</head>
<body>
    <header class="site-header">
        <div class="nav-container"><a href="/index.html" class="nav-brand">Te Kete Ako</a></div>
    </header>
    <main class="container">
        <h1>Algebra Pattern Explorer: Tukutuku & Sequences</h1>
        
        <section style="background: #fff7ed; padding: 2rem; border-radius: 12px; margin: 2rem 0; text-align: center;">
            <p style="font-style: italic; font-size: 1.2rem;">"He aha te mea nui? He tangata!"</p>
            <p>Patterns connect us to traditional MƒÅori art and modern mathematics</p>
        </section>
        
        <h2>Visual Pattern Exploration</h2>
        <div class="activity-card">
            <h3>Pattern 1: Growing Squares (Tukutuku Pattern)</h3>
            <div id="pattern1Container"></div>
            <p><strong>How many blocks in pattern 5?</strong> <span id="pattern1Answer"></span></p>
            <button class="calc-btn" onclick="showPattern(1, 5)">Show Pattern 5</button>
        </div>
        
        <h2>Sequence Calculator</h2>
        <div class="calculator-box">
            <h3>üìê Arithmetic Sequence Calculator</h3>
            <p><strong>Formula:</strong> a‚Çô = a‚ÇÅ + (n-1)d</p>
            
            <div class="input-row">
                <label>First term (a‚ÇÅ):</label>
                <input type="number" id="firstTerm" value="3">
            </div>
            <div class="input-row">
                <label>Common difference (d):</label>
                <input type="number" id="difference" value="4">
            </div>
            <div class="input-row">
                <label>Which term (n):</label>
                <input type="number" id="nthTerm" value="10" min="1">
            </div>
            
            <button class="calc-btn" onclick="calculateSequence()">Calculate nth Term</button>
            
            <div id="seqResult" class="result-box">
                <h4>Results:</h4>
                <p style="font-size: 2rem; font-weight: bold;" id="termValue"></p>
                <p><strong>Sequence:</strong> <span id="sequenceDisplay"></span></p>
                <p><strong>Working:</strong> <span id="working"></span></p>
            </div>
        </div>
        
        <h2>Visual Sequence Graph</h2>
        <div class="activity-card">
            <div class="chart-container">
                <canvas id="sequenceChart"></canvas>
            </div>
            <button class="calc-btn" onclick="graphSequence()">Graph Current Sequence</button>
        </div>
        
        <h2>Tukutuku Patterns in Algebra</h2>
        <div class="activity-card">
            <p>Traditional MƒÅori tukutuku (lattice work) panels follow mathematical patterns:</p>
            <ul>
                <li><strong>PƒÅtikitiki:</strong> Flounder pattern (diamond sequences)</li>
                <li><strong>Niho taniwha:</strong> Taniwha teeth (triangular patterns)</li>
                <li><strong>Purapura whetu:</strong> Seeds of stars (star patterns)</li>
            </ul>
            <p>Each pattern can be described algebraically!</p>
        </div>
        
        <h2>Challenge Problems</h2>
        <div class="activity-card">
            <ol>
                <li>A koru pattern grows: 1, 3, 5, 7... What's the 20th term?</li>
                <li>Tukutuku pattern: 2, 5, 8, 11... Write the formula for the nth term</li>
                <li>If pattern continues for 50 terms, what's the total number of blocks?</li>
            </ol>
        </div>
    </main>
    <footer class="site-footer"><p>¬© 2025 Te Kete Ako</p></footer>
    <script>
        let seqChart;
        
        function showPattern(patternNum, n) {
            const container = document.getElementById('pattern1Container');
            container.innerHTML = '';
            const grid = document.createElement('div');
            grid.className = 'pattern-grid';
            grid.style.gridTemplateColumns = `repeat(${n}, 60px)`;
            
            for (let i = 0; i < n * n; i++) {
                const block = document.createElement('div');
                block.className = 'pattern-block koru-pattern';
                block.textContent = i < n ? 'üåø' : '';
                grid.appendChild(block);
            }
            container.appendChild(grid);
            document.getElementById('pattern1Answer').textContent = `${n * n} blocks`;
        }
        
        function calculateSequence() {
            const a1 = parseFloat(document.getElementById('firstTerm').value);
            const d = parseFloat(document.getElementById('difference').value);
            const n = parseInt(document.getElementById('nthTerm').value);
            
            const an = a1 + (n - 1) * d;
            
            // Generate sequence
            let sequence = [];
            for (let i = 1; i <= Math.min(n, 10); i++) {
                sequence.push(a1 + (i - 1) * d);
            }
            if (n > 10) sequence.push('...' + an);
            
            document.getElementById('termValue').textContent = `Term ${n} = ${an}`;
            document.getElementById('sequenceDisplay').textContent = sequence.join(', ');
            document.getElementById('working').innerHTML = `
                a<sub>${n}</sub> = ${a1} + (${n}-1) √ó ${d}<br>
                a<sub>${n}</sub> = ${a1} + ${n-1} √ó ${d}<br>
                a<sub>${n}</sub> = ${a1} + ${(n-1)*d}<br>
                a<sub>${n}</sub> = <strong>${an}</strong>
            `;
            
            document.getElementById('seqResult').classList.add('show');
        }
        
        function graphSequence() {
            const a1 = parseFloat(document.getElementById('firstTerm').value);
            const d = parseFloat(document.getElementById('difference').value);
            const n = parseInt(document.getElementById('nthTerm').value);
            
            const terms = Math.min(n, 20);
            const labels = [];
            const data = [];
            
            for (let i = 1; i <= terms; i++) {
                labels.push(`n=${i}`);
                data.push(a1 + (i - 1) * d);
            }
            
            const ctx = document.getElementById('sequenceChart').getContext('2d');
            if (seqChart) seqChart.destroy();
            
            seqChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Sequence Values',
                        data: data,
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0,
                        fill: true,
                        pointRadius: 5,
                        pointBackgroundColor: '#10b981'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { title: { display: true, text: 'Arithmetic Sequence Visualization' } },
                    scales: { y: { title: { display: true, text: 'Term Value' } } }
                }
            });
        }
        
        showPattern(1, 3);
    </script>

<!-- üîó GraphRAG Similar Resources Component -->
<div id="similar-resources" data-resource-path="/public/lessons/algebra-pattern-explorer-interactive.html"></div>
<script src="/components/graphrag-similar-resources.html"></script>

</body>
</html>

