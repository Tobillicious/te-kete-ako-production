<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Subject Dashboard | Te Kete Ako</title>    <meta name="description" content="Browse resources by canonical subject across Te Kete Ako, powered by GraphRAG."><link rel="stylesheet" href="/css/te-kete-professional.css"><link rel="stylesheet" href="/css/te-kete-ultimate-beauty-system.css">    <link rel="stylesheet" href="/css/main.css">    <link rel="stylesheet" href="/css/mobile-revolution.css">    <link rel="stylesheet" href="/css/print.css" media="print">    <script src="https://cdn.tailwindcss.com"></script>    <script src="/tailwind.config.ultimate.js"></script></head><body class="pattern-koru-subtle">    <div id="nav-container"></div>    <script>fetch('/components/navigation-standard.html').then(r => r.text()).then(html => document.getElementById('nav-container').innerHTML = html);</script>    <section class="hero" style="text-align: center; padding: 3rem 1rem;">        <h1 class="wiley-hero-title" style="font-size: 3rem; color: #1a4d2e;">ğŸ“š Subject Dashboard</h1>        <p style="font-size: 1.1rem; color: #546e7a; max-width: 900px; margin: 0.75rem auto;">Explore Te Kete Ako by canonical subject. Counts and resources are live from GraphRAG.</p>        <div style="margin-top: 1rem; display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap;">            <a href="/generated-resources-alpha/" class="btn" style="background:#f59e0b;color:white;padding:0.75rem 1.25rem;border-radius:10px;text-decoration:none;font-weight:700;">âœ¨ Excellence Alpha</a>            <a href="/handouts/index.html" class="btn" style="background:#10b981;color:white;padding:0.75rem 1.25rem;border-radius:10px;text-decoration:none;font-weight:700;">ğŸ“„ Handouts</a>            <a href="/lessons.html" class="btn" style="background:#3b82f6;color:white;padding:0.75rem 1.25rem;border-radius:10px;text-decoration:none;font-weight:700;">ğŸ“ Lessons</a>        </div>    </section>    <main style="max-width: 1200px; margin: 0 auto; padding: 0 1.25rem 3rem;">        <section class="glass-card" style="padding:1rem 1.25rem;border-left:4px solid #059669;margin-bottom:1.25rem;">            <strong style="color:#065f46;">Subjects</strong>            <div id="subject-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:0.75rem;margin-top:0.75rem;"></div>        </section>        <section>            <h2 style="font-size:1.5rem;color:#1f2937;margin:1.25rem 0;">Top Resources</h2>            <div id="resource-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;"></div>        </section>    </main>    <div id="footer-container"></div>    <script>fetch('/components/footer.html').then(r=>r.text()).then(html=>{document.getElementById('footer-container').innerHTML=html;});</script>    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>    <script>const SUPABASE_URL='https://nlgldaqtubrlcqddppbq.supabase.co';const SUPABASE_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY5ODgxMTksImV4cCI6MjA1MjU2NDExOX0.gN5RGe7kGmxj4-yI1xnDuCuKUPFDh4f-8CQqQdqrGq0';const supabase=window.supabase.createClient(SUPABASE_URL,SUPABASE_KEY);const CANON_ORDER=['Mathematics','Science','English','Social Studies','Digital Technologies','Te Ao MÄori','Arts','Health & PE','Languages','Cross-Curricular','Platform Infrastructure'];async function loadSubjects(){const { data: records, error }=await supabase.from('graphrag_subject_counts').select('*');if(error){console.error(error);return;}records.sort((a,b)=>CANON_ORDER.indexOf(a.canonical_subject)-CANON_ORDER.indexOf(b.canonical_subject));const grid=document.getElementById('subject-grid');grid.innerHTML=records.map(r=>`<button class="subject-chip" onclick="loadTop('${(r.canonical_subject||'Unmapped').replace(/'/g,"\\'")}')" style="display:flex;justify-content:space-between;align-items:center;background:white;border:1px solid #e5e7eb;border-radius:10px;padding:0.75rem 1rem;font-weight:700;color:#1f2937;">${r.canonical_subject||'Unmapped'}<span style="background:#ecfdf5;color:#065f46;border-radius:999px;padding:0.15rem 0.5rem;font-size:0.8rem;margin-left:0.5rem;">${r.n}</span></button>`).join('');if(records.length>0){loadTop(records[0].canonical_subject);} }async function loadTop(canon){const { data, error }=await supabase.from('graphrag_resources_clean').select('file_path,title,quality_score,cultural_context,resource_type').eq('canonical_subject',canon).order('quality_score',{ascending:false}).limit(12);if(error){console.error(error);return;}const grid=document.getElementById('resource-grid');grid.innerHTML=(data||[]).map(r=>`<a href="${r.file_path}" style="background:white;padding:1rem;border-radius:12px;text-decoration:none;box-shadow:0 2px 12px rgba(0,0,0,0.06);border-top:4px solid #059669;display:block;"> <h3 style="color:#1f2937;margin:0 0 0.5rem 0;font-size:1rem;font-weight:700;">${r.title||'Untitled'}</h3> <div style="color:#6b7280;font-size:0.85rem;">${r.resource_type||'Resource'} ${r.quality_score?`â€¢ â­ ${r.quality_score}`:''} ${r.cultural_context?`â€¢ ğŸŒ¿ Cultural`:''}</div> </a>`).join('');}document.addEventListener('DOMContentLoaded',loadSubjects);</script>    <script src="/js/posthog-analytics.js" defer></script></body></html>

