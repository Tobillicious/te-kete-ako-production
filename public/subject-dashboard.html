<!DOCTYPE html>
<html lang="en"><head>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Subject Dashboard | Te Kete Ako</title>
<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest"/>
<meta content="#1a4d2e" name="theme-color">
<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ‚≠ê PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link href="/css/professionalization-system.css" rel="stylesheet"/>
<!-- ‚≠ê THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link href="/css/te-kete-professional.css" rel="stylesheet">
<link href="/css/te-kete-ultimate-beauty-system.css" rel="stylesheet"/>
<!-- ‚≠ê COMPONENT STYLES -->
<link href="/css/main.css" rel="stylesheet"/>
<link href="/css/navigation-standard.css" rel="stylesheet"/>
<link href="/css/mobile-revolution.css" rel="stylesheet"/>
<link href="/css/mobile-first-classroom-tablets.css" rel="stylesheet">
<!-- ‚≠ê PRINT STYLES (media="print" = only for printing) -->
<link href="/css/print.css" media="print" rel="stylesheet">
<link href="/css/print-professional.css" media="print" rel="stylesheet">
<!-- ‚≠ê TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link href="/css/tailwind.css" rel="stylesheet"/>
<!-- ‚≠ê CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link href="/css/cascade-fix.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // Wait for Supabase CDN to load before initializing singleton
    window.addEventListener('DOMContentLoaded', () => {
        if (!window.supabase) {
            // Log to monitoring instead of console
            if (window.posthog) {
                posthog.capture('supabase_cdn_error', {
                    message: 'Supabase CDN failed to load',
                    url: window.location.pathname
                });
            }
        }
    });
</script>
<script src="/js/supabase-singleton.js"></script>
<!-- My Kete Database Integration - loads after singleton -->
<script src="/js/my-kete-database.js"></script>
<!-- Navigation Loader Singleton - loads after supabase setup -->
<script src="/js/navigation-loader.js"></script>
<!-- Component Loader - centralized async component management -->
<script src="/js/component-loader.js"></script>
<meta content="yes" name="mobile-web-app-capable"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<meta content="Te Kete Ako" name="apple-mobile-web-app-title"/>
<link href="/icons/icon-192x192.png" rel="apple-touch-icon">
<!-- ENHANCED SEARCH -->
<script defer="" src="/js/enhanced-search.js"></script>
<!-- MOBILE PERFORMANCE OPTIMIZER -->
<script defer="" src="/js/mobile-performance-optimizer.js"></script>
<!-- TOUCH TARGET AUDITOR -->
<script defer="" src="/js/touch-target-auditor.js"></script>
<!-- üé® ULTIMATE CULTURAL GESTURES - Framer Motion System -->
<script defer="" src="/js/framer-cultural-gestures-ultimate.js"></script>
<!-- Service Worker Registration -->
<script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('‚úÖ PWA: Service Worker registered!', registration);
                    })
                    .catch(error => {
                        // Log to monitoring instead of console
                        if (window.posthog) {
                            posthog.capture('pwa_service_worker_error', {
                                message: 'Service Worker registration failed',
                                error: error.message,
                                url: window.location.pathname
                            });
                        }
                    });
            });
        }
</script>
<meta content="index, follow" name="robots"/>
<meta content="index, follow" name="googlebot"/>
<meta content="#1a4d2e" name="theme-color"/>
<meta content="index, follow" name="robots"/>
<meta content="index, follow" name="googlebot"/>
<meta content="#1a4d2e" name="theme-color"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="Browse resources by canonical subject across Te Kete Ako, powered by GraphRAG." name="description"/>
<!-- UNIFIED DESIGN SYSTEM -->
<!-- PWA Manifest -->
<link href="/manifest.json" rel="manifest">
<meta content="#1a4d2e" name="theme-color">
<!-- CSS - UNIFIED PROFESSIONAL DESIGN SYSTEM (CONSOLIDATED) -->
<!-- ‚≠ê PROFESSIONAL SYSTEM FIRST - Core design tokens -->
<link href="/css/professionalization-system.css" rel="stylesheet"/>
<!-- ‚≠ê THEME SYSTEM (Tailwind + Ultimate Beauty) -->
<link href="/css/te-kete-professional.css" rel="stylesheet">
<link href="/css/te-kete-ultimate-beauty-system.css" rel="stylesheet"/>
<!-- ‚≠ê COMPONENT STYLES -->
<link href="/css/main.css" rel="stylesheet"/>
<link href="/css/navigation-standard.css" rel="stylesheet"/>
<link href="/css/mobile-revolution.css" rel="stylesheet"/>
<link href="/css/mobile-first-classroom-tablets.css" rel="stylesheet">
<!-- ‚≠ê PRINT STYLES (media="print" = only for printing) -->
<link href="/css/print.css" media="print" rel="stylesheet">
<link href="/css/print-professional.css" media="print" rel="stylesheet">
<!-- ‚≠ê TAILWIND (Loads second-to-last - utilities only, NO DUPLICATES) -->
<link href="/css/tailwind.css" rel="stylesheet"/>
<!-- ‚≠ê CASCADE FIX (Loads LAST - overrides conflicting variables) -->
<link href="/css/cascade-fix.css" rel="stylesheet"/><body class="pattern-koru-subtle"> <div id="nav-container"></div> <script>fetch('/components/navigation-standard.html').then(r => r.text()).then(html => document.getElementById('nav-container').innerHTML = html);</script> <section class="hero text-center"> <h1 class="wiley-hero-title" style="font-size: 3rem; color: #1a4d2e;">üìö Subject Dashboard</h1> <p class="text-sm">Explore Te Kete Ako by canonical subject. Counts and resources are live from GraphRAG.</p> <div class="flex"> <span class="text-gray-500 italic" title="Link disabled: /generated-resources-alpha/">‚ú® Excellence Alpha (Coming soon)</span> <a class="btn font-bold" href="/handouts/index.html">üìÑ Handouts</a> <a class="btn font-bold" href="/lessons.html">üéì Lessons</a> </div> </section> <main class="max-w-6xl mx-auto"> <section class="glass-card" style="padding:1rem 1.25rem;border-left:4px solid #059669;margin-bottom:1.25rem;"> <strong style="color:#065f46;">Subjects</strong> <div class="grid" id="subject-grid"></div> </section> <section> <h2 style="font-size:1.5rem;color:#1f2937;margin:1.25rem 0;">Top Resources</h2> <div class="grid" id="resource-grid"></div> </section> </main> <div id="footer-container"></div> <script>fetch('/components/footer.html').then(r=>r.text()).then(html=>{document.getElementById('footer-container').innerHTML=html;});</script> <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> <script>const SUPABASE_URL='https://nlgldaqtubrlcqddppbq.supabase.co';const SUPABASE_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZ2xkYXF0dWJybGNxZGRwcGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwODkzMzksImV4cCI6MjA2ODY2NTMzOX0.IFaWqep1MBSofARiCUuzvAReC44hwGnmKOMNSd55nIM';const supabase=window.supabase.createClient(SUPABASE_URL,SUPABASE_KEY);const CANON_ORDER=['Mathematics','Science','English','Social Studies','Digital Technologies','Te Ao MƒÅori','Arts','Health & PE','Languages','Cross-Curricular','Platform Infrastructure'];async function loadSubjects(){const { data: records, error }=await supabase.from('graphrag_subject_counts').select('*');if(error){// Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('javascript_error', {
                error: err.message,
                url: window.location.pathname
            }));
        }
        // Show user-friendly message instead of error
        return;}records.sort((a,b)=>CANON_ORDER.indexOf(a.canonical_subject)-CANON_ORDER.indexOf(b.canonical_subject));const grid=document.getElementById('subject-grid');grid.innerHTML=records.map(r=>`<button class="subject-chip flex bg-white font-bold" onclick="loadTop('${(r.canonical_subject||'Unmapped').replace(/'/g,"\\'")}')" >${r.canonical_subject||'Unmapped'}<span class="text-xs" >${r.n}</span></button>`).join('');if(records.length>0){loadTop(records[0].canonical_subject);} }async function loadTop(canon){const { data, error }=await supabase.from('graphrag_resources_clean').select('file_path,title,quality_score,cultural_context,resource_type').eq('canonical_subject',canon).order('quality_score',{ascending:false}).limit(12);if(error){// Log to monitoring instead of console
        if (window.posthog) {
            posthog.capture('javascript_error', {
                error: err.message,
                url: window.location.pathname
            }));
        }
        // Show user-friendly message instead of error
        return;}const grid=document.getElementById('resource-grid');grid.innerHTML=(data||[]).map(r=>`<a href="${r.file_path}" class="bg-white p-4 rounded-xl block" > <h3 class="text-sm font-bold" >${r.title||'Untitled'}</h3> <div style="color:#6b7280;font-size:0.85rem;">${r.resource_type||'Resource'} ${r.quality_score?`‚Ä¢ ‚≠ê ${r.quality_score}`:''} ${r.cultural_context?`‚Ä¢ üåø Cultural`:''}</div> </a>`).join('');}document.addEventListener('DOMContentLoaded',loadSubjects);</script> <script defer="" src="/js/posthog-analytics.js"></script></body></link></link></link></link></meta></link></link></link></link></link></link></meta></head></html>
